<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Rolling UTXO set hashes <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014337_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Pieter Wuille 2017-05-15 20:01:14</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014342_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Peter Todd 2017-05-16 11:01:04</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014347_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Gregory Maxwell 2017-05-16 18:20:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014339_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>ZmnSCPxj 2017-05-15 23:04:01</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014342_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Peter Todd 2017-05-16 11:01:04</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014402_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Pieter Wuille 2017-05-23 20:43:45</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014337_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Pieter Wuille 2017-05-15 20:01:14</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014338_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Peter R 2017-05-15 20:53:45</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014339_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>ZmnSCPxj 2017-05-15 23:04:01</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014341_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Gregory Maxwell 2017-05-15 23:59:58</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014346_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>ZmnSCPxj 2017-05-16 00:15:58</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014347_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Gregory Maxwell 2017-05-16 18:20:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014383_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Rusty Russell 2017-05-23 04:47:48</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014339_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>ZmnSCPxj 2017-05-15 23:04:01</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014345_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Pieter Wuille 2017-05-16 18:17:19</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014383_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Rusty Russell 2017-05-23 04:47:48</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014341_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Gregory Maxwell 2017-05-15 23:59:58</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014345_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Pieter Wuille 2017-05-16 18:17:19</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014347_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Gregory Maxwell 2017-05-16 18:20:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014402_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Pieter Wuille 2017-05-23 20:43:45</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014342_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Peter Todd 2017-05-16 11:01:04</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014345_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Pieter Wuille 2017-05-16 18:17:19</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014383_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Rusty Russell 2017-05-23 04:47:48</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014402_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Pieter Wuille 2017-05-23 20:43:45</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014338_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Peter R 2017-05-15 20:53:45</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014341_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Gregory Maxwell 2017-05-15 23:59:58</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014346_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>ZmnSCPxj 2017-05-16 00:15:58</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014337_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Pieter Wuille 2017-05-15 20:01:14</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014338_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>Peter R 2017-05-15 20:53:45</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2017/014346_Rolling-UTXO-set-hashes.xml.html">Rolling UTXO set hashes</a>
                        <b>ZmnSCPxj 2017-05-16 00:15:58</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-May/014337.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2017-05-15T20:01:14+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>Developers on the bitcoin-dev mailing list recently discussed the most efficient way to construct UTXO commitments, with a focus on lightweight nodes being able to validate the hash without accessing the entire UTXO set. Pieter Wuille suggested using SHA512 with 256-bit truncated output as secp256k1 X coordinate or key to seed a ChaCha20 PRNG, while Gregory Maxwell preferred a txid||outnumber hash, which can be validated by lightweight nodes.Rolling UTXO set hashes were also proposed as a solution for efficiently comparing UTXO sets, although Pieter Todd cautioned that more analysis was needed before reducing the responsibilities of full nodes. The discussion also touched upon proposals to change the serialization of transaction outputs (txouts) and UTXO commitment schemes. Peter Todd argued that previous schemes did not require miners to generate a commitment and did not need a soft-fork to deploy, but all required a network-wide choice to be useful. Compact membership proofs were necessary in most cases, but Pieter suggested exploring other options prior to making a consensus change. Additionally, Pieter proposed a discussion on computing a UTXO set hash that is efficient to update but does not support any compact proofs of existence or non-existence.Two methods were presented for efficient addition and deletion: MuHash and ECMH. Both these approaches provide security against k-sum solving, but MuHash requires fast modular multiplication/inverse implementation while ECMH is more complicated to implement from scratch. Preliminary benchmarks showed that both approaches take low enough time to make it reasonable for full nodes and/or other software to always maintain one of them and effectively have a rolling cryptographical checksum of the UTXO set at all times. A proposal for computing a UTXO set hash that supports comparing two UTXO sets but not compact proofs of existence or non-existence was discussed among developers on bitcoin-dev mailing list. The rolling set hash can replace Bitcoin Core's gettxoutsetinfo RPC's hash computation and assist in the implementation of fast sync methods with known good blocks/UTXO sets and database consistency checking.The commitment to UTXO data has been an old advantage for lite nodes, but compact membership proofs are required for most arguments. A rise in interest in full block lite clients for privacy reasons may complement the usage of membership proofless solutions. The bitcoin-dev mailing list has been discussing the benefits of a commitment to UTXO data for lite nodes. This commitment would allow lite nodes to download UTXO sets from any full node and verify them by verifying only block headers starting from genesis. However, it requires a consensus change and compact membership proofs for most of the arguments. Pieter Wuille suggested gaining experience with an operation before implementing it as audibility and engineering reasons require the merkle tree root of transactions to be in addition to the commitment rather than instead of it. Proof of work needs to commit to the witness data; otherwise, there are chances of DOS attacks where people provide malleated blocks that have invalid witnesses. Another suggestion was to commit to the UTXO of the previous block and the merkle tree root of the transactions in the current block to reduce SPV mining. It is believed that this would help a miner to scan received new blocks to create the UTXO set of the previous block. However, it is not confirmed if this understanding is correct or if there are any subtleties missed regarding this approach.</p>
        <hr>
        <p><i>Updated on: 2023-06-12T00:50:27.486789+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>