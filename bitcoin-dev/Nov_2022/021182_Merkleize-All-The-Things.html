<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Merkleize All The Things</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Salvatore Ingala 2022-11-08 09:17:42
            <br><i>Published on: 2022-11-08T09:17:42+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/Nov_2022/combined_Merkleize-All-The-Things.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-November/021182.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Salvatore Ingala has proposed a method for enabling general smart contracts in Bitcoin using covenants. This method adds restrictions on the outputs of transactions spending UTXOs, called covenants, which has various benefits, including minimal impact on layer 1, generality, compatibility with P2TR, and no new cryptographic assumptions required. The proposal uses Merkle trees and does not require any other cryptographic primitive.The note explores concepts such as the contract's state, state transitions, and covenants, presenting a framework for defining smart contracts that fit the structure of Bitcoin. It also discusses the possibility of performing on-chain computation and argues that the execution of a contract should be performed off-chain, with blockchain consensus used only to verify the computation or skip the verification altogether. The proposed challenge protocol involves posting the statement “f(x) = y” and allowing a challenge period for anyone to dispute the claim. In case of a challenge, Alice and Bob enter a challenge resolution protocol arbitrated by layer 1. The remainder of the note sketches an instantiation of the challenge protocol involving a bisection protocol for arbitrary computation.The article discusses the use of Merkle trees to enable fully general smart contracts in the UTXO model. It explains how state transitions can be implemented using a challenge-response protocol and how this can be used in state channels and coin pools. Additionally, the article proposes a design of covenant opcodes that can be added in a soft fork to the existing SegWitv1 Script.The proposed covenant optimization for Bitcoin's layer 1 involves a bisection protocol that would simplify required changes to the script and potentially mitigate costs and risks analyzed in prior reports. The proposal does not rely on novel cryptography and would likely require a fully recursive version of the covenant for optimistic rollups. Acknowledgments are given to Antoine Poinsot for suggesting improvements to the original proposed covenant opcodes, as well as other individuals for their helpful discussions and comments on earlier versions of the proposal.References to similar fraud proof constructions in blockchain research are provided, along with prior publications regarding the basic idea of the bisection protocol. Footnotes include links to relevant websites and documents. The security model for the bisection protocol is also discussed, noting that it operates under the honest miner majority assumption. Finally, the article acknowledges that there is still room for optimization and that different challenge mechanisms could be more appropriate for different functions.Overall, Salvatore Ingala's proposal presents a promising method for enabling general smart contracts in Bitcoin using covenants, with various benefits and potential use cases explored in the note.</p>
    <hr>
    <p><i> Updated on: 2023-06-16T02:59:58.633167+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>