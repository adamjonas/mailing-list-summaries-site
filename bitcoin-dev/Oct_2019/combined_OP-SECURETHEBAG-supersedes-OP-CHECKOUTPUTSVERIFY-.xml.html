<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY) <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017036_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Anthony Towns 2019-06-20 22:05:52</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017038_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-23 06:43:22</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017039_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>ZmnSCPxj 2019-06-23 13:11:03</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017042_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-24 18:07:20</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017043_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-24 18:48:51</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017044_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-24 22:47:44</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017045_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-25 17:05:39</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2019/017349_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-10-03 23:22:47</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017035_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-18 20:57:34</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017036_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Anthony Towns 2019-06-20 22:05:52</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017039_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>ZmnSCPxj 2019-06-23 13:11:03</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017043_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-24 18:48:51</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017038_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-23 06:43:22</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017043_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-24 18:48:51</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/016997_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-01 05:35:45</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017000_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-02 14:32:33</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017001_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-02 21:32:20</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017011_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>ZmnSCPxj 2019-06-06 07:30:13</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017041_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-24 14:34:54</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017042_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-24 18:07:20</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017044_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-24 22:47:44</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017045_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-25 17:05:39</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/July_2019/017112_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Dmitry Petukhov 2019-07-08 10:26:24</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/016997_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-01 05:35:45</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017000_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-02 14:32:33</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017006_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Anthony Towns 2019-06-05 09:30:39</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017011_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>ZmnSCPxj 2019-06-06 07:30:13</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/016999_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>ZmnSCPxj 2019-06-02 05:35:43</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017001_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-02 21:32:20</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017041_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-24 14:34:54</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2019/017349_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-10-03 23:22:47</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2019/017349_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-10-03 23:22:47</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017035_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-18 20:57:34</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017041_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-24 14:34:54</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017045_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-25 17:05:39</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/016999_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>ZmnSCPxj 2019-06-02 05:35:43</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017001_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-02 21:32:20</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017038_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-23 06:43:22</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/July_2019/017112_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Dmitry Petukhov 2019-07-08 10:26:24</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017035_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-18 20:57:34</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/016997_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-01 05:35:45</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017000_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Russell O&#39;Connor 2019-06-02 14:32:33</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017006_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Anthony Towns 2019-06-05 09:30:39</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017011_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>ZmnSCPxj 2019-06-06 07:30:13</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017036_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Anthony Towns 2019-06-20 22:05:52</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017039_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>ZmnSCPxj 2019-06-23 13:11:03</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017042_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-24 18:07:20</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017044_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Jeremy 2019-06-24 22:47:44</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/016999_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>ZmnSCPxj 2019-06-02 05:35:43</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2019/017006_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Anthony Towns 2019-06-05 09:30:39</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/July_2019/017112_OP-SECURETHEBAG-supersedes-OP-CHECKOUTPUTSVERIFY-.xml.html">OP_SECURETHEBAG (supersedes OP_CHECKOUTPUTSVERIFY)</a>
                        <b>Dmitry Petukhov 2019-07-08 10:26:24</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2019-June/017036.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2019-06-20T22:05:52+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>The bitcoin-dev mailing list has seen several proposals for changes to Bitcoin Core's tapscript implementation. One of these proposals involves adding an opcode called OP_SECURETHEBAG, which would tweak public keys in Bitcoin script to prevent accidental covenants and enable recursive covenants only when intended. However, there is criticism of the proposed opcode's peeking semantics for breaking down the decomposition of the script into individual opcodes and harming its composability. Another proposal suggests using an ANYPREVOUT sighash to simulate OP_SECURETHEBAG, but this loses some functionality and requires a bigger script.Jeremy Rubin has announced that OP_CHECKOUTPUTSHASHVERIFY will be retracted in favor of OP_SECURETHEBAG. The new opcode fixes malleability issues and lifts the single output restriction to a known number of inputs restriction. The author also addresses concerns related to malleability and proposes a change to eliminate PUSHDATA and treat OP_SECURETHEBAG like a pushdata directly. Another proposal involves updating the tapscript implementation to prepare it for new uses of OP_SUCCESSx and handling multi-byte opcodes. Two approaches are suggested for this, with the second approach being better as it can clean up various semantics, separate parsing the script from executing it, improve versioning techniques, and be more compatible with templated script.There is also a discussion about eliminating malleability in UTXOs using the ANYPREVOUTANYSCRIPT signature, which would be used to restrict spending conditions. This mechanism could enable the rights to spend certain UTXOs to be transferred or revoked retroactively by creating taproot branches with different pairs of (vault, control) keys and a chain of transactions that each spend the previous control UTXO so that the newly created UTXO becomes controlled by the control key of the next pair together with the vault key in that pair.Furthermore, there is a proposal for a new opcode called OP_CHECKTXDIGESTVERIFY that might enable covenants through the use of Turing-complete smart contracts. However, some are not seeing any reason to complicate the spec to ensure the digest is precommitted as part of the opcode. Russell O'Connor has suggested that it could be simulated with an ANYPREVOUT (NOINPUT) sighash using "CHECKSIG" instead of constructing a Hash_BagHash for the script. ZmnSCPxj has explained that the commitment of script itself isn't part of OP_SECURETHEBAG and thus cannot create covenants even if it were to pull data from the stack unless some OP_TWEEKPUBKEY operation is added to Script.The author of the context suggests two approaches for upgrading the script parser, with the second approach being better in their opinion. This involves creating a new interpreter for Tapscript and cleaning up various semantics such as multibyte opcodes, templated scripts, Huffman encoding opcodes, and OP_IF handling. The author believes that OP_SECURETHEBAG's use of pushdata is a backwards compatible hack that can be redefined later on.In summary, multiple proposals for changes to Bitcoin Core's tapscript implementation have been suggested in the bitcoin-dev mailing list. These include updating the tapscript implementation, patching the parser to handle multi-byte opcodes, eliminating malleability in UTXOs using the ANYPREVOUTANYSCRIPT signature, and adding new opcodes such as OP_SECURETHEBAG and OP_CHECKTXDIGESTVERIFY.</p>
        <hr>
        <p><i>Updated on: 2023-06-13T19:17:25.776943+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>