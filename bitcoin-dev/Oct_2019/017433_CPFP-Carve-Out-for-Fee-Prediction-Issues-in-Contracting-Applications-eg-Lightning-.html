<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>CPFP Carve-Out for Fee-Prediction Issues in Contracting Applications (eg Lightning)</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Matt Corallo 2019-10-25 17:30:41
            <br><i>Published on: 2019-10-25T17:30:41+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/Oct_2019/combined_CPFP-Carve-Out-for-Fee-Prediction-Issues-in-Contracting-Applications-eg-Lightning-.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2019-October/017433.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The discussion revolves around the recently released RC for bitcoind 0.19, which includes a carve-out rule to pave the way for more robust CPFP of on-chain contracts (Lightning commitment transactions). Johan Tor√•s Halseth suggests relaxing some of the current limits to avoid adding a 1 CSV to all outputs. Matt Corallo responds that the rule still requires at least one non-CSV output per party. Rusty Russell proposes a simplified RBF where 'you can replace if 1. feerate is higher, 2. new tx is in first 4Msipa of mempool, 3. old tx isn't'. It allows someone 100k of free tx spam. The lightning close algorithm would be:1. Give bitcoind unilateral close.2. Ask bitcoind what current expedited fee is (or survey your mempool).3. Give bitcoind child "push" tx at that total feerate.4. If next block doesn't contain unilateral close tx, go to step 2.In effect, an attacker could exceed the MAX_PACKAGE_VIRTUAL_SIZE limit in some cases, but this seems like a problem with the current mempool acceptance code in bitcoind. There have been several changes to the acceptance code and eviction policy since the limit was first introduced.</p>
    <hr>
    <p><i> Updated on: 2023-05-20T18:30:20.689855+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>