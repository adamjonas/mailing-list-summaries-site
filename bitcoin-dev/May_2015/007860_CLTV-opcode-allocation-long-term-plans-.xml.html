<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>CLTV opcode allocation; long-term plans?</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Peter Todd 2015-05-04 05:07:15
            <br><i>Published on: 2015-05-04T05:07:15+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/May_2015/combined_CLTV-opcode-allocation-long-term-plans-.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-May/007860.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Matt Corallo raised concern over the scarcity of OP_NOP in Bitcoin mempool, regarding only CLTV pull-req. He suggested that using one of the precious few OP_NOPs would be more flexible and efficient. The author presents two lines of thought to address this issue. Firstly, we may end up with a Script v2.0 soon based on Russell O'Connor and Pieter Wuille's Merkelized Abstract Syntax Tree idea which requires at most a single OP_NOPx to implement, largely solving the scarcity issue. Secondly, even if all ten OP_NOPxs were used in script v1.0, implementing an OP_EXTENDED would be logical. The form of a relative CLTV is still not clear, but it is proposed that OP_PREVOUT_HEIGHT_VERIFY/OP_PREVOUT_DATA along with OP_ADD should be used whilst avoiding the use of any opcode accessing non-reorg-safe prevout info until the coinbase maturity period has passed for soft-fork safety. If people have strong feelings about this, the author proposes making OP_CLTV work as follows: 1 OP_CLTV where 1 selects absolute mode and all others act as OP_NOPs. A future relative CLTV could then be a future soft-fork implemented as follows: 2 OP_CLTV. Although there are concerns such as rewriting existing tests, example code and updating the BIP, and complicating the code base compared to sticking with just doing a Script v2.0, the author concludes that the above proposal is not too big of a deal.</p>
    <hr>
    <p><i> Updated on: 2023-06-09T19:28:11.058659+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>