<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Payment Protocol Proposal: Invoices/Payments/Receipts</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Peter Todd 2012-11-28 12:57:10
            <br><i>Published on: 2012-11-28T12:57:10+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/Nov_2012/combined_Payment-Protocol-Proposal-Invoices-Payments-Receipts.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2012-November/002014.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In an email conversation, Mike Hearn discussed the ambiguities of round-tripping with protocol buffers and how some implementations may not preserve ordering of unknown fields. He suggested several solutions to this problem, including changing the type of the Invoice field in Payment to be "bytes" and set it to be the hash of the originally received binary Invoice message, modifying the spec/implementations so ordering of unknown fields is specified, changing the language of the spec to explicitly state that the received Invoice may not be binary-identical to the one that was sent, or submitting just the merchant_data instead of the entire Invoice back to the merchant. The last option was his preferred solution. Additionally, he believed that the SignedInvoice message itself is broken since protobuf implementations have no reason to guarantee that they can give you the serialized bytes of the Invoice sub-message.</p>
    <hr>
    <p><i> Updated on: 2023-06-06T08:32:55.071078+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>