<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>BIP 16 changes (list inside)</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Amir Taaki 2012-03-18 14:04:27
            <br><i>Published on: 2012-03-18T14:04:27+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/March_2012/combined_BIP-16-changes-list-inside-.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2012-March/001325.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The discussion mentions the changes required for P2SH( Pay to Script Hash) and BIP 16(Bitcoin Improvement Proposal). The changes are listed in two categories: block validation and script. In block validation, a LegacySigOpCount is used instead of SigOpCount in CheckBlock. Changes are made only to ConnectBlock() which has a new SigOp calculation, however, there are no important changes to FetchInputs()/ConnectInputs(). Some efficient improvements are made to SetBestChain(), but they are not related to BIP 16. In script, Solver has a special case to check for TX_SCRIPTHASH which returns hash of input eval script. Another solver returns signature of pubkey script or TX_SCRIPTHASH; it finds the redeem script in KeyStore and returns it. ExtractAddress(es) and VerifyScript are also included. If the fValidatePayToScriptHash block date and output script (scriptPubKey) are P2SH, then scriptSig must be only push operations and evaluate the last item of copied stack as a script using the copied stack as the stack. A SigOpCount is used inside CBlock::ConnectBlock main loop that does scoring checksigs and multisigs. A newly added DecodeOP_N to normal SigOpCount is also used.Lastly, in Address, the main hash160 data is set with a beginning byte (nVersion) of 0x05.</p>
    <hr>
    <p><i> Updated on: 2023-06-06T03:41:23.931082+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>