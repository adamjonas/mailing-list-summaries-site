<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Unenforceable fee obligations in multiparty protocols with Taproot inputs <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021466_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Antoine Riard 2023-02-15 03:33:24+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021462_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Anthony Towns 2023-02-12 06:47:31+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021461_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Russell O&#39;Connor 2023-02-11 14:40:38+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021460_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Anthony Towns 2023-02-11 05:14:55+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021459_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Yuval Kogman 2023-02-10 19:35:06+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021458_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Russell O&#39;Connor 2023-02-08 14:04:16+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021457_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Andrew Poelstra 2023-02-08 14:00:48+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021456_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Michael Folkson 2023-02-08 09:34:57+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021454_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Antoine Riard 2023-02-08 00:56:30+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021453_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Peter Todd 2023-02-07 19:04:00+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021452_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Russell O&#39;Connor 2023-02-07 18:35:12+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021451_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Peter Todd 2023-02-07 18:12:36+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021450_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Andrew Poelstra 2023-02-07 18:10:10+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021448_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Andrew Poelstra 2023-02-07 13:46:22+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021447_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Peter Todd 2023-02-07 12:50:13+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021446_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Nadav Ivgi 2023-02-07 09:36:58+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021445_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Lloyd Fournier 2023-02-07 04:38:30+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Feb_2023/021444_Unenforceable-fee-obligations-in-multiparty-protocols-with-Taproot-inputs.html">Unenforceable fee obligations in multiparty protocols with Taproot inputs</a>
                        <b>Yuval Kogman 2023-02-07 02:49:28+00:00</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-February/021466.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2023-02-15T03:33:24+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>Several topics were discussed in a recent conversation regarding the security of multiparty transactions using Taproot. One concern raised was the potential for witness inflation and fee extraction in coinjoin transactions. It was noted that the last signer could manipulate the transaction's feerate by using an inflated witness, causing complications and wasting time value. To address this issue, several strategies were proposed, such as negotiating transactions at a lower feerate, enforcing minimal weights for non-witness data, requiring ownership proofs, and imposing minimum feerates or confirmation ages for inputs. It was also emphasized that full Replace-by-Fee (RBF) is necessary to ensure incentive compatibility in multiparty transactions.Another topic of discussion was a bug identified in Taproot where the same Tapleaf could be repeated multiple times within the same Taproot, potentially with different Taplevels and Tapfee rates. To mitigate this bug, it was recommended to always have knowledge of the entire Taptree when interacting with someone's Tapspend. Additionally, the CODESEPARATOR opcode could be used to prevent signature migration within or between branches.An email conversation between Yuval and LL highlighted a potential attack scenario in multiparty transactions, involving one participant unfairly extracting fee contributions from others. This exploit takes advantage of the variable size of Taproot spends by using a larger signature for the last input signed, reducing the feerate without affecting absolute fees. To prevent this attack, several mitigations were proposed. Negotiating a lower feerate ahead of time and establishing a minimum feerate that the attacker cannot go below was one solution. Another mitigation was enforcing a minimum weight for non-witness data in the transaction before considering it fully constructed. In a centralized setting with BIP-322 ownership proofs, the server could reject signatures that do not match the spend path specified in the ownership proof. Publicly verifiable protocol transcripts and requirements for minimum feerates or confirmation ages for inputs were also suggested as deterrents.Each mitigation proposed has its limitations and trade-offs. Pinning attacks can prevent RBF, but minimum confirmation age may not be applicable to lightning channels. Therefore, it is recommended to implement multiple mitigations simultaneously to effectively prevent this type of attack.</p>
        <hr>
        <p><i>Updated on: 2023-08-02T08:55:58.334868+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>