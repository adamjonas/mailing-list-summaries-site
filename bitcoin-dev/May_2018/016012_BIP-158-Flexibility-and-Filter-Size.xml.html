<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>BIP 158 Flexibility and Filter Size</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Gregory Maxwell 2018-05-23 17:28:29
            <br><i>Published on: 2018-05-23T17:28:29+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/May_2018/combined_BIP-158-Flexibility-and-Filter-Size.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-May/016012.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a conversation on the Bitcoin-dev mailing list, Jim Posen shared a graph showing filter sizes as a proportion of block size for each of the sub-filters. He explained that the first ~120,000 blocks are so small that the Golomb-Rice coding can't compress the filters that well, which is why the filter sizes are so high proportional to the block size. However, after block 120,000 or so, the filter compression converges pretty quickly to near the optimal value. He noted that if you look at the ratio of the combined size of the separated filters vs the size of a filter containing all of them (currently known as the basic filter), they are pretty much the same size. The mean of the ratio between them after block 150,000 is 99.4%. Basically, not much compression efficiently is lost by separating the basic filter into sub-filters.Jim Posen also suggested constructing entirely separate filters for different types of elements and allowing clients to download only the ones they care about. This would prevent an exponential blowup in the number of filters. If three separate filter types were created, one for output scripts, one for input outpoints, and one for TXIDs, each signaled with a separate service bit, it would work nicely with advertising different filter types independently. There is also the question of whether to separate or combine the headers, but Jim Posen leans towards keeping them separate because it's simpler that way.</p>
    <hr>
    <p><i> Updated on: 2023-05-20T08:22:48.455906+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>