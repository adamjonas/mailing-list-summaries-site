<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>BIP 158 Flexibility and Filter Size</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Jim Posen 2018-05-24 03:48:00
            <br><i>Published on: 2018-05-24T03:48:00+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/May_2018/combined_BIP-158-Flexibility-and-Filter-Size.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-May/016022.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The email thread discusses the comparison between the input script filter and the input outpoint filter, which is smaller due to address reuse. The ratio over time of combining the input prev script and output script filters versus keeping them separate is also analyzed. The graph shows that in recent blocks, there are decreasing savings. Jim Posen suggests constructing entirely separate filters for different types of elements and allowing clients to download only the ones they care about. He proposes three separate filter types, one for output scripts, one for input outpoints, and one for TXIDs, each signaled with a separate service bit. However, there are concerns about splitting up the filters, which may expose the client's interest and reduce anonymity set. Additionally, if a match is encountered, full nodes have more targeted insight into what caused a particular match. Conner Fromknecht agrees that bandwidth and privacy are always seemingly at odds, and he wants to ensure that the second order effects that fall out of optimizing for one metric when others exist are considered. Gregory Maxwell requests adding a graph of input-scripts instead of input outpoints. The attached graph provides information on filter sizes (as a proportion of block size) for each of the sub-filters. The graph shows that the filter compression converges pretty quickly to near the optimal value after block 120,000 or so. If there are enough elements per filter, the compression ratio shouldn't be much worse by splitting them up.</p>
    <hr>
    <p><i> Updated on: 2023-06-13T02:26:42.676520+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>