<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Alex Schoof 2022-05-11 23:32:34
            <br><i>Published on: 2022-05-11T23:32:34+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/May_2022/combined_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-May/020470.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>A proposal has been put forth for a v1 tapscript opcode that enables generic covenants. The proposal suggests using an OP_SUCCESS opcode unless it is used a-la OP_CHECKTEMPLATEVERIFY, which provides an obvious use case with clean future expansion. If experience shows that repurposing OP_NOP4 as a shortcut is useful optimization, then it can be done in the future. The proposal builds on Russell O'Connor's TXHASH, with Anthony Towns' modification via extending the opcode. The proposal defines certain bits that only need to be defined for this soft fork, and others can have semantics later. For thoroughness, some future potential uses are documented here. Note that pushing more than 1000 elements on the stack or an element more than 512 bytes will fail due to BIP-342 resource limits. By enumerating what exactly can be committed to, it's absolutely clear what is and isn't committed. The bits which separate concatenation and hashing provide a simple mechanism for template-style (i.e. CTV-style) commitments or programmatic treatment of individual elements (e.g. amounts). The lack of double-hashing of scriptsigs and other fields means we cannot simply reuse hashing done for SIGHASH_ALL. The OP_SUCCESS semantic is only valid in tapscript v1, so this does not allow covenants for v0 segwit or pre-segwit inputs. Dedicated opcodes can be provided for those cases if covenants prove useful.</p>
    <hr>
    <p><i> Updated on: 2023-06-15T20:41:36.103559+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>