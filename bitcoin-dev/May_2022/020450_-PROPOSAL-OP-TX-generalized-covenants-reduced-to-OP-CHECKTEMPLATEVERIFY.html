<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Rusty Russell 2022-05-10 10:35:54
            <br><i>Published on: 2022-05-10T10:35:54+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/May_2022/combined_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-May/020450.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>A proposal has been put forward to add a v1 tapscript opcode for generic covenants, with only OP_SUCCESS if used a-la OP_CHECKTEMPLATEVERIFY. This allows for an obvious use case and clean future expansion. Unknown flag patterns are also OP_SUCCESS, although some potential uses are documented for thoroughness. The lack of OP_CAT has been sidestepped by the first bit, while the latter bit allows for OP_TXHASH semantics and avoiding stack element limits. Several bits are defined, but only those marked with an asterisk have to be defined for this soft fork. The others can have semantics later. The proposal provides an enumeration of what can be committed to, thus making it clear what is not committed. Bits that separate concatenation and hashing provide a simple mechanism for template-style commitments or individual elements' programmatic treatment. The lack of double-hashing of scriptsigs and other fields means that hashing done for SIGHASH_ALL cannot be simply re-used.The OP_SUCCESS semantic is only valid in tapscript v1, which means that this does not allow covenants for v0 segwit or pre-segwit inputs. If covenants prove useful, dedicated opcodes can be provided for those cases like OP_CHECKTEMPLATEVERIFY.</p>
    <hr>
    <p><i> Updated on: 2023-06-15T20:41:49.546747+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>