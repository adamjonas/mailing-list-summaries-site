<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/June_2022/020599_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Anthony Towns 2022-06-24 06:06:05</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2022/020600_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Jeremy Rubin 2022-06-24 18:05:50</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2022/020470_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Alex Schoof 2022-05-11 23:32:34</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2022/020470_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Alex Schoof 2022-05-11 23:32:34</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2022/020450_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Rusty Russell 2022-05-10 10:35:54</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2022/020454_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Brandon Black 2022-05-10 15:16:10</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2022/020454_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Brandon Black 2022-05-10 15:16:10</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2022/020600_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Jeremy Rubin 2022-06-24 18:05:50</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2022/020470_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Alex Schoof 2022-05-11 23:32:34</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2022/020450_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Rusty Russell 2022-05-10 10:35:54</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2022/020599_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Anthony Towns 2022-06-24 06:06:05</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2022/020450_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Rusty Russell 2022-05-10 10:35:54</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2022/020454_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Brandon Black 2022-05-10 15:16:10</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2022/020599_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Anthony Towns 2022-06-24 06:06:05</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2022/020600_-PROPOSAL-OP-TX-generalized-covenants-reduced-to-OP-CHECKTEMPLATEVERIFY.xml.html">[PROPOSAL] OP_TX: generalized covenants reduced to OP_CHECKTEMPLATEVERIFY</a>
                        <b>Jeremy Rubin 2022-06-24 18:05:50</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-June/020599.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2022-06-24T06:06:05+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>A proposal has been made for a v1 tapscript opcode that would allow for generic covenants to be added to the Bitcoin network. The proposed soft fork involves OP_TX, followed by 4 bytes of flags. Only certain flag combinations have to be defined for this soft fork, while others can have semantics later. The lack of OP_CAT has been sidestepped by using the first bit, while the latter bit allows for OP_TXHASH semantics and avoiding stack element limits. The proposal provides an enumeration of what can be committed to, making it clear what is not committed. The bits separating concatenation and hashing provide a simple mechanism for commitments or individual elements' programmatic treatment. The OP_SUCCESS semantic is only valid in tapscript v1, which means that this does not allow covenants for v0 segwit or pre-segwit inputs.Rusty Russell proposed OPTX_SEPARATELY and OPTX_UNHASHED fields, which can be treated separately instead of concatenating and pushed on the stack without hashing, respectively. However, both approaches seem less efficient than using a merkle path. It is also difficult to prove that the output is being taken in its entirety, which raises concerns related to upgradability if additional features like CAT or TLUV are added. Both OP_TX and CTV are trying to take upgradability into account in advance.In a discussion on the bitcoin-dev mailing list, the topic of using a merkle tree for Commitment Transaction Verification (CTV) was brought up. While a merkle tree could be superior from an API perspective, the main reason not to use one was validation performance. The discussion also touched on other fields such as OPTX_SELECT_OUTPUT_AMOUNT32x2* and OPTX_SELECT_OUTPUT_SCRIPTPUBKEY*. The issue of upgradability was raised in relation to committing to specific outputs, as it can be awkward with the current approach used by both OP_TX and CTV. A merkle path was suggested as a potential solution for proving that an entire output has been taken.Brandon responded to the proposal for a v1 tapscript opcode, suggesting that OPTX_SELECT_IN_OUT_AMOUNT32x2 should be added so that a single script can be reused and a small script can be constructed for a relocatable, batchable construction. Overall, the discussion focused on the tradeoffs between using a merkle tree versus other methods for CTV and the proposed v1 tapscript opcode for generic covenants, which could potentially improve the efficiency and security of the Bitcoin network.</p>
        <hr>
        <p><i>Updated on: 2023-06-15T20:43:08.938430+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>