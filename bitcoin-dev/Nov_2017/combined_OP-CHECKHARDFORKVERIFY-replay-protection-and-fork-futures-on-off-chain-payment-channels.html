<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>OP_CHECKHARDFORKVERIFY <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/Nov_2017/015276_OP-CHECKHARDFORKVERIFY-replay-protection-and-fork-futures-on-off-chain-payment-channels.html">OP_CHECKHARDFORKVERIFY - replay protection and fork futures on off-chain payment channels</a>
                        <b>ZmnSCPxj 2017-11-10 23:33:31</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Nov_2017/015276_OP-CHECKHARDFORKVERIFY-replay-protection-and-fork-futures-on-off-chain-payment-channels.html">OP_CHECKHARDFORKVERIFY - replay protection and fork futures on off-chain payment channels</a>
                        <b>ZmnSCPxj 2017-11-10 23:33:31</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Nov_2017/015276_OP-CHECKHARDFORKVERIFY-replay-protection-and-fork-futures-on-off-chain-payment-channels.html">OP_CHECKHARDFORKVERIFY - replay protection and fork futures on off-chain payment channels</a>
                        <b>ZmnSCPxj 2017-11-10 23:33:31</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-November/015276.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2017-11-10T23:33:31+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>The author proposes the addition of an opcode to provide replay protection and enable the trustless creation of hardfork futures payment channels. In order for this to work, a hardfork must cooperate by changing the operation of OP_CHECKHARDFORKVERIFY in the hardfork. The proposed opcode is simple - it fails if the top stack is not the exact value 1. To prepare funds for splitting, a P2SH/P2WSH script is used. This allows transactions to spend the first branch on the legacy chain post-fork and create transactions that spend the second branch on the hardfork chain post-fork.The author suggests making a bet with another individual regarding the economic consensus of the hardfork. They use a transaction spending their funds and paying a single combined output to a P2SH/P2WSH. This can be used with an nLockTime transaction after the fork date to claim the legacy coin if it has value, or on the hardfork chain if it has value. Alternatively, they can both agree to cancel the bet.To perform price discovery of legacy and hardfork future coins to determine consensus, payment channel techniques are needed. The author recommends forming a payment channel between themselves and the other party. Before signing the anchor transaction, commitment transactions should be created first. For a Poon-Drjya channel, two commitment transactions should be created, one for each party, as well as two versions of both for the legacy token and the hardfork token. Commitment transactions can only be claimed after the fork, but they can be updated continuously using normal Poon-Dryja channel operations.Unfortunately, this method can only reach up to payment channels. To create a futures market, a payment channel network is needed. For Lightning, HTLCs are used to create atomic swaps of coins in different payment channels. However, commitment transactions can only be claimed after the fork, so any HTLCs on top of that will have expired before the commitment transactions can be claimed and the HTLCs enforced. The author does not know of any other construction that would allow the creation of a payment channel network on top of a payment channel primitive.</p>
        <hr>
        <p><i>Updated on: 2023-06-12T22:07:34.940366+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>