<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>BIP-341: Committing to all scriptPubKeys in the signature message</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Anthony Towns 2020-05-02 14:26:02
            <br><i>Published on: 2020-05-02T14:26:02+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/May_2020/combined_BIP-341-Committing-to-all-scriptPubKeys-in-the-signature-message.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2020-May/017813.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In the email thread, Russell O'Connor suggested keeping the hashes of the ScriptPubKeys separate from the input values. Andrew's suggestion to add another hash to the signature message for sha_scriptPubKeys achieves this, provided sha_scriptPubKeys inclusion is conditional on hash_type not matching ANYONECANPAY. They could also make the scriptPubKey field dependent on hash_type matching ANYONECANPAY, which would mean committing to each component of the UTXOs being spent. With ANYONECANPAY, it would be the same but just for this input's prevout. However, they would still arguably miss out on whether it was a coinbase output and what the height of the coin was. Russell O'Connor also proposed separating the hashing of the output values from the output ScriptPubKeys in sha_outputs so that applications interested only in summing the values of the outputs (for instance to compute fees) do not have to wade through those arbitrary long ScriptPubKeys in the outputs. However, if one did not verify the output scriptPubKeys, they would only be able to care about fees since they couldn't verify where any of the funds went. There are links provided to prior discussions on this topic.</p>
    <hr>
    <p><i> Updated on: 2023-05-20T23:16:42.036828+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>