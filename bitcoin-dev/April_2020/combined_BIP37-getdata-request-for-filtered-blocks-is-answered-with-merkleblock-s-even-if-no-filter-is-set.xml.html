<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>BIP37: &#39;getdata&#39; request for filtered blocks is answered with &#39;merkleblock&#39;s even if no filter is set <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/April_2020/017743_BIP37-getdata-request-for-filtered-blocks-is-answered-with-merkleblock-s-even-if-no-filter-is-set.xml.html">BIP37: &#39;getdata&#39; request for filtered blocks is answered with &#39;merkleblock&#39;s even if no filter is set</a>
                        <b>Sebastian Falbesoner 2020-04-02 15:26:40</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/April_2020/017743_BIP37-getdata-request-for-filtered-blocks-is-answered-with-merkleblock-s-even-if-no-filter-is-set.xml.html">BIP37: &#39;getdata&#39; request for filtered blocks is answered with &#39;merkleblock&#39;s even if no filter is set</a>
                        <b>Sebastian Falbesoner 2020-04-02 15:26:40</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/April_2020/017743_BIP37-getdata-request-for-filtered-blocks-is-answered-with-merkleblock-s-even-if-no-filter-is-set.xml.html">BIP37: &#39;getdata&#39; request for filtered blocks is answered with &#39;merkleblock&#39;s even if no filter is set</a>
                        <b>Sebastian Falbesoner 2020-04-02 15:26:40</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2020-April/017743.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2020-04-02T15:26:40+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>Sebastian, an independent researcher, has discovered a peculiar behavior in BIP37 bloom filters during his experimentation with the functional test for p2p_filter.py. According to BIP37, 'getdata' commands are only responded to if a filter is set. However, when no BIP37 is set and a filtered block is requested, there should be no response from the node. Instead, there is always a 'merkleblock' message received in reply due to a default filter that matches everything introduced in v0.8.4.This issue has resulted in some "dead code"-spots in the code base since the else-branch is never executed whenever there is a check if a filter is set. Sebastian is seeking suggestions on how to deal with this problem. For those interested in reproducing this issue and understanding the relevant code parts, further details can be found on the corresponding GitHub issue #18483. Andreas Schildbach has already pointed out that this could be a problem for clients and suggests that the connection should be dropped to clients requesting filtered blocks without any filter set.</p>
        <hr>
        <p><i>Updated on: 2023-06-14T00:31:54.843134+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>