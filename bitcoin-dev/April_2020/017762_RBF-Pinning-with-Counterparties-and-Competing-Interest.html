<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>RBF Pinning with Counterparties and Competing Interest</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> ZmnSCPxj 2020-04-22 06:08:06
            <br><i>Published on: 2020-04-22T06:08:06+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/April_2020/combined_RBF-Pinning-with-Counterparties-and-Competing-Interest.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2020-April/017762.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a discussion on the Bitcoin development mailing list, ZmnSCPxj proposed a new mechanism to protect against RBF (Replace-By-Fee) attacks on HTLC (Hashed Time-Locked Contract) transactions in the Lightning Network. The vulnerability occurs when a counterparty can use a low-fee transaction with RBF disabled to steal an HTLC value by claiming it after a few days using out-of-band agreements with small miners. Bidding wars can also occur between parties to get their version of reality committed on-chain. To prevent such attacks, ZmnSCPxj suggests that before L+1, HTLC-Timeout should be confirmed on-chain, which would allow B to add fees to HTLC-Timeout using `SIGHASH_NOINPUT` to make the C-side signature `SIGHASH_NOINPUT|SIGHASH_SINGLE`. If B can get HTLC-Timeout confirmed before L+1, then C cannot steal the HTLC value at all, as the UTXO it could steal from has already been spent. This mechanism is enough to sidestep the issue and does not require any change to the hashlock branch transaction of C since HTLC-Timeout is fee-bumpable.</p>
    <hr>
    <p><i> Updated on: 2023-06-14T00:35:28.455470+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>