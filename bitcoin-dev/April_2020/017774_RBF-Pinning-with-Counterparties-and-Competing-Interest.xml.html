<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>RBF Pinning with Counterparties and Competing Interest</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Matt Corallo 2020-04-22 22:53:37
            <br><i>Published on: 2020-04-22T22:53:37+00:00</i></p>

        
        

        
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2020-April/017774.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The discussion on the Lightning-dev mailing list involves a potential attack on the Lightning Network. The attack is based on spending an HTLC using the preimage with a low-fee, RBF-disabled transaction and then getting it mined via some out-of-band agreement with a small miner. If Bob broadcasts a conflicting transaction without realizing that it conflicts with a pinned transaction already in most node's mempools, he will face a problem. One solution suggested by David A. Harding is re-implementing something like a BIP61 reject message but with an extension that returns the txids of any conflicts. This way, when Bob connects to a bunch of Bitcoin nodes and sends his conflicting transaction, the nodes would reply with something like "rejected: code 123: conflicts with txid 0123...cdef". Bob could then reply with a getdata('tx', '0123...cdef') to get the pinned transaction, parse out its preimage, and resolve the HTLC. However, there are practical design issues as well, such as the need for the node to provide reject messages for each input which is conflicted, something which needs to be thought hard about the DoS implications of. It is unclear whether this solution is reliable enough to rely on for one's own funds.</p>
    <hr>
    <p><i> Updated on: 2023-05-20T22:05:46.398177+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>