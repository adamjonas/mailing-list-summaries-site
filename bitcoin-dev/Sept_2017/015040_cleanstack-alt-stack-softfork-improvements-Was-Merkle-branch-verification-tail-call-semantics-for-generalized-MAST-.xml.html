<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>cleanstack alt stack &amp; softfork improvements (Was: Merkle branch verification &amp; tail-call semantics for generalized MAST)</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Sergio Demian Lerner 2017-09-22 21:32:00
            <br><i>Published on: 2017-09-22T21:32:00+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/Sept_2017/combined_cleanstack-alt-stack-softfork-improvements-Was-Merkle-branch-verification-tail-call-semantics-for-generalized-MAST-.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/015040.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The lack of signed maximum segwit stack size was one of the objections to segwit presented last year. On Fri, Sep 22, 2017, a proposal was made by Mark Friedenbach to commit to the maximum stack size (in bytes) for an input. This is tricky as the only place where this could be packed is in the sequence_no with a soft-fork. For transactions with locktime >0, it was proposed that a last zero-satoshi output whose scriptPub contains OP_RETURN and followed by N VarInts, containing the maximum stack size of each input could be added. Normally, for a 400 byte, 2-input transaction, this will add 11 bytes, or a 2.5% overhead. The proposal suggests putting this information in the witness and it can either be committed to as part of the witness or at spend time by including it in the data signed by CHECKSIG. There are other solutions to this problem, but cleanstack was the approach taken. However, before signing a transaction, one cannot know the signature size (which may be variable), and one can only estimate the maximum size.</p>
    <hr>
    <p><i> Updated on: 2023-06-12T18:57:25.750986+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>