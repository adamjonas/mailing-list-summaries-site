<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>cleanstack alt stack &amp; softfork improvements (Was: Merkle branch verification &amp; tail-call semantics for generalized MAST)</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Mark Friedenbach 2017-09-19 07:33:54
            <br><i>Published on: 2017-09-19T07:33:54+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/Sept_2017/combined_cleanstack-alt-stack-softfork-improvements-Was-Merkle-branch-verification-tail-call-semantics-for-generalized-MAST-.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-September/015025.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The bitcoin-dev mailing list had a discussion on Sep 19, 2017, where Mark Friedenbach suggested that tail-call semantics could be maintained if the alt stack is used for transferring arguments to the policy script. However, Luke Dashjr pointed out that this could be considered a bug in the cleanstack rule. The cleanstack rule was introduced as a consensus rule to prevent denial of service vulnerability by a third party who could add data to the witness stack since witness data is not covered by a checksig. Cleanstack currently prohibits extra items on the stack; however, there is no reason to prohibit extra items on the altstack because those items can only arrive there purposefully. There are other solutions to this problem that could have been taken, such as committing to the number of items or maximum size of the stack as part of the sighash data. Arguably for a future script version upgrade one of these other approaches should be taken to allow for shorter tail-call scripts.</p>
    <hr>
    <p><i> Updated on: 2023-05-20T03:59:26.609130+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>