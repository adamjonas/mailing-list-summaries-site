<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Encrypted Wallet Backward Compatibility <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
    <ul>
        
        
        <li>
        <a href="/bitcoin-dev/July_2011/000129_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Matt Corallo 2011-07-04 17:52:53</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000135_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Matt Corallo 2011-07-05 01:10:39</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000134_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Gregory Maxwell 2011-07-04 22:30:12</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000132_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Gregory Maxwell 2011-07-04 20:59:07</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000163_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Pieter Wuille 2011-07-10 19:10:07</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000138_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Matt Corallo 2011-07-05 11:03:15</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000131_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Matt Corallo 2011-07-04 20:39:32</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000161_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Matt Corallo 2011-07-10 14:21:17</b>
        </li>
        

        
    </ul>
    
        <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2011-July/000129.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
    
    <p><i>Published on: 2011-07-04T17:52:53+00:00</i></p>
    <hr>
    <h3> Summary:</h3>
    <p>There are backward-compatibility issues with Bitcoin Wallet encryption. In version 0.3.23, Bitcoin fails to function after writing one unencrypted private key to the otherwise encrypted wallet. In version 0.3.22 and prior versions, Bitcoin opens fine but displays transactions only for unencrypted keys (of which it writes a minimum of one before opening), and each transaction shows only confirmation count, date, no description, and a debit/credit of 0.00.When attempting to perform any action that reads keypool, you get the "ReserveKeyFromKeyPool() : unknown key in key pool" error. Suggestions include renaming wallet.dat for encrypted wallets or doing nothing and letting old clients get mad. To prevent this issue in the future, Bitcoin really shouldn't continue on as if nothing had happened when faced with unknown keys.There is a need to agree on either <a href="https://github.com/bitcoin/bitcoin/pull/378">https://github.com/bitcoin/bitcoin/pull/378</a> or <a href="https://github.com/bitcoin/bitcoin/pull/381.">https://github.com/bitcoin/bitcoin/pull/381.</a> The former is simpler and means that you don't have to keep track of what features you have or have not used in a wallet, but instead just write and let the keys take care of themselves. However, there is a preference for 378 as it is simpler and easier to use.The email conversation revolves around the issue of intentionally breaking unsafe/badly designed backup mechanisms as import/export is planned to get merged at about the same time. The idea is to truncate wallet.dat and set its file-permissions to 000, so if old versions of bitcoin OR any dumb wallet backup scripts try to read it they fail.However, renaming wallet.dat could lead to unforeseeable errors for odd scripts. Future-proofing is suggested by adding a nMinVersion that specifies "you must be at least THIS version to read this file." Meanwhile, Matt Corallo digs deeper and finds a data structure in wallet settings that should cause all versions to crash on load instead of making a new wallet or opening in some bizarre half-state. This resolves all known issues and suggestions that he knows of on newenc except for the invalid mlock calculations which he intends to fix.</p>
    <hr>
    <p><i> Updated on: 2023-05-18T21:38:27.169349+00:00 </i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>