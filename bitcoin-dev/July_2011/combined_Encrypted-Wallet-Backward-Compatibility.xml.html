<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Encrypted Wallet Backward Compatibility <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
    <ul>
        
        
        <li>
        <a href="/bitcoin-dev/July_2011/000129_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Matt Corallo 2011-07-04 17:52:53</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000135_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Matt Corallo 2011-07-05 01:10:39</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000134_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Gregory Maxwell 2011-07-04 22:30:12</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000132_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Gregory Maxwell 2011-07-04 20:59:07</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000163_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Pieter Wuille 2011-07-10 19:10:07</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000138_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Matt Corallo 2011-07-05 11:03:15</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000131_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Matt Corallo 2011-07-04 20:39:32</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/July_2011/000161_Encrypted-Wallet-Backward-Compatibility.xml.html">Encrypted Wallet Backward Compatibility</a>
        <b>Matt Corallo 2011-07-10 14:21:17</b>
        </li>
        

        
    </ul>
    
        <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2011-July/000129.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
    
    <p><i>Published on: 2011-07-04T17:52:53+00:00</i></p>
    <hr>
    <h3> Summary:</h3>
    <p>There are currently backward-compatibility issues with Wallet encryption in Bitcoin. In version 0.3.23, Bitcoin dies with "ReserveKeyFromKeyPool() : unknown key in key pool" after writing one unencrypted private key to the (otherwise) encrypted wallet. In version 0.3.22, Bitcoin opens fine and displays transactions, however shows a total balance of what is help only in unencrypted keys (of which it also writes a minimum of one before opening), and each transaction shows only confirmation count, date, no description, and a debit/credit of 0.00.Users have suggested several solutions, including renaming wallet.dat for encrypted wallets or simply doing nothing and letting old clients get mad. One proposed solution is to agree on either <a href="https://github.com/bitcoin/bitcoin/pull/378">https://github.com/bitcoin/bitcoin/pull/378</a> or <a href="https://github.com/bitcoin/bitcoin/pull/381,">https://github.com/bitcoin/bitcoin/pull/381,</a> which prevent the issue from occurring in the future. The priority is to release 0.3.24 as soon as possible to give users lead time on 0.4 so that any solution can be in as many hands as possible, and so that network issues can be resolved.In July 2011, Gavin Andresen discussed a plan to intentionally break unsafe/badly designed backup mechanisms while merging import/export. He suggests creating an encrypted wallet file named "wallet_e.dat" which truncates the original wallet.dat and sets its file-permissions to 000, so that any old versions of bitcoin or outdated wallet backup scripts trying to read it will fail. However, silently breaking these backup mechanisms is not desirable as people may notice if they start backing up a zero-byte file.Meanwhile, Matt Corallo discovered a data structure in wallet settings that should cause all versions of Bitcoin to crash on load instead of making a new wallet or opening in some bizarre half-state. By putting an empty object in addrIncoming, he created a commit at <a href="https://github.com/TheBlueMatt/bitcoin/commit/2e8383469d7e12a495b3a1dbd41a8d211ff34fe8">https://github.com/TheBlueMatt/bitcoin/commit/2e8383469d7e12a495b3a1dbd41a8d211ff34fe8</a> to resolve all known issues on newenc except for the invalid mlock calculations. During discussions, they also talked about future-proofing by adding a nMinVersion that specifies "you must be at least THIS version to read this file."</p>
    <hr>
    <p><i> Updated on: 2023-05-18T22:36:32.054241+00:00 </i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>