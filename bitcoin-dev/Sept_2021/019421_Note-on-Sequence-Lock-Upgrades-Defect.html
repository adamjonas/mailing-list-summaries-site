<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Note on Sequence Lock Upgrades Defect</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2021-09-09 00:02:45
            <br><i>Published on: 2021-09-09T00:02:45+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/Sept_2021/combined_Note-on-Sequence-Lock-Upgrades-Defect.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-September/019421.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a discussion thread on bitcoin-dev, a user named Jeremy has proposed patching a flaw in the Sequence lock implementation with respect to upgradability. The flaw is related to the fact that the current mempool policies signaling are not separated from consensus data, which can cause problems for L2 nodes and set of counterparties who want to update their mempool policies non-interactively. The user suggests introducing a new field to signal policy through p2p packages but notes that this could be vulnerable to tampering by malicious peers. The user also discusses the implications of taking back the `nSequence` field for consensus-semantic sounds and how it could deprive the application-layer from a discrete, zero-cost payload, while increasing the price of such applications if they're still willingly to relay application specific data through the p2p network. The user suggests distinguishing between different types of policy deployments: loosening changes, tightening changes, and new feature introductions. The user suggests that loosening changes do not require much ecosystem coordination, whereas flag day activations might make sense for tightening changes to create a higher level of commitment by the base layer software. However, the user warns against reversing the process and asking for Bitcoin applications/higher layers to update first as it could result in never making the change. Regarding the proposed policy change in #22871, the user suggests deploying full-rbf first, giving time for higher applications to free up the `nSequence` field, and then starting to discourage its usage. The user notes that introducing discouragement waivers would move away from the policy design principle of separating mempool policies signaling from consensus data.</p>
    <hr>
    <p><i> Updated on: 2023-06-15T01:28:29.713101+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>