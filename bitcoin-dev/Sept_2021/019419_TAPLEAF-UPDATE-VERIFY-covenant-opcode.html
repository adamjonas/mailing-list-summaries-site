<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>TAPLEAF_UPDATE_VERIFY covenant opcode</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Anthony Towns 2021-09-09 06:41:38
            <br><i>Published on: 2021-09-09T06:41:38+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/Sept_2021/combined_TAPLEAF-UPDATE-VERIFY-covenant-opcode.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-September/019419.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The article proposes a new idea for using a taproot tree to update an unspent transaction output (UTXO) in Bitcoin. This involves changing the internal public key and merkle path of scripts, and adding or removing scripts from the control block. A new opcode called "TAPLEAF_UPDATE_VERIFY" (TLUV) is proposed, which takes three inputs to calculate the scriptPubKey that matches that and verifies that the output corresponding to the current input spends to that scriptPubKey. To verify that the updated UTXO retains the bitcoin that was in the old UTXO, a new opcode called IN_OUT_AMOUNT is proposed.The article provides two examples of how this functionality might be used. The first is a basic vault that limits the hot wallet to withdrawing at most L satoshis every D blocks, and the second scheme allows for a UTXO to represent a group's pooled funds, with efficient movement of money around within the pool using the taproot key path.The concept of "recursive covenants" and their use for pooled transactions are also discussed in the article. It explains how they allow multiple participants to operate a pool with efficient and private transfers, and compared to on-chain transactions using non-pooled funds, this method is more efficient and private. However, it does require all participants to be online in order to sign via the key path, which limits the number of people who can be included in a pool.The article goes on to explain how this method could be used for funding joint ventures or buying land, ensuring that funds can be reclaimed if the deal falls through. It also notes two limitations: recursive covenants can't tweak scripts in areas of the merkle tree that it can't see, and they don't provide a way for utxos to "interact."The article concludes by suggesting that dedicated opcodes for this functionality would make the feature easy to use correctly and efficient both in wallets and for nodes to validate. Links to related articles and concepts are provided throughout the text.</p>
    <hr>
    <p><i> Updated on: 2023-05-21T03:47:52.756629+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>