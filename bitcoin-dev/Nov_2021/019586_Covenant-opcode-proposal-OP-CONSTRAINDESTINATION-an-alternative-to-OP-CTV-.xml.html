<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Covenant opcode proposal OP_CONSTRAINDESTINATION (an alternative to OP_CTV)</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Billy Tetrud 2021-11-01 01:19:42
            <br><i>Published on: 2021-11-01T01:19:42+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/Nov_2021/combined_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-November/019586.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a recent email thread on the bitcoin-dev mailing list, Billy Tetrud responded to Jeremy's suggestion of splitting up the fee limiting functionality from OP_CD into a separate opcode called OP_LIMITFEECONTRIBUTION. While Tetrud found the idea interesting, he noted that there were some limitations and considerations to keep in mind. For example, when it came to output addresses, Tetrud had added specifying amounts to make script evaluation simpler and eliminate a potential DOS vector. However, he acknowledged that this could require calculating various combinations of inequalities, which could get expensive in scenarios where many inputs had overlapping destinations. Tetrud also pointed out that while it might be possible to verify that a number of inputs with destination address limitations is within limits, he didn't know of an elegant and cheap way to do so. Additionally, if there was a good way to evaluate what addresses an input goes to without knowing what amounts it contributes to each output, Tetrud wouldn't want to propose validating specific amounts going to specific outputs. As for the fee-limit opcode, Tetrud believed it could be done on its own but noted that a version of OP_CD that doesn't specify fees would have to take the fee-limit into account, and the calculation for the standalone fee-limit operation would be moot for that output.Regarding Jeremy's comment that all transactions are twice as large as they might otherwise need to be, Tetrud clarified that the transaction wouldn't be quite twice as large and added that perhaps it would be reasonable to allow omitting an output value in cases where the entire output amount is contributed by that input. This would reduce the overhead of specifying output amounts to 2 bytes for most outputs, meaning that it would only make the transaction about 7% larger. Tetrud welcomed others' input on these ideas.</p>
    <hr>
    <p><i> Updated on: 2023-06-15T00:23:02.161731+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>