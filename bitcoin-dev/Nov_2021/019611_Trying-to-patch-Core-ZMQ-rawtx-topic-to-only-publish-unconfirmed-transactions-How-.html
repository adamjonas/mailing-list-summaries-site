<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Trying to patch Core ZMQ &#34;rawtx&#34; topic to only publish unconfirmed transactions: How?</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> 0xB10C 2021-11-29 09:32:15
            <br><i>Published on: 2021-11-29T09:32:15+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/Nov_2021/combined_Trying-to-patch-Core-ZMQ-rawtx-topic-to-only-publish-unconfirmed-transactions-How-.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-November/019611.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a Bitcoin Core pull request, a new function called NotifyMempoolTransaction() has been added to notify CZMQNotificationInterface about TransactionAddedToMempool. This function calls the publisher with the rawmempooltx topic. The author of the pull request mentions that a mempool transaction publisher with both the raw transaction and transaction fee would also be useful but would require changes to the chain notifications in interfaces/chain.h. A link to the pull request as well as to the relevant lines of code on GitHub is provided in the message.Meanwhile, on the Bitcointalk forum, a user named Ali Sherief reports experiencing an issue where the ZeroMQ topic "rawtx" emits a raw transaction not only when it appears on the mempool, but also once it's already confirmed, causing software to add txids, addresses, etc. a second time inside arrays. Array de-duping is not a viable solution long-term, so Ali attempts to instruct Core to only publish unconfirmed bitcoin transactions. However, according to a Bitcoin Stack Exchange post, it is not possible to configure this from a configuration or command-line option and requires editing the source code directly. Ali is unsure which function to patch for their own build and wonders if the pblock check suggested by Jonas Schnelli several years ago is still applicable in the present day.</p>
    <hr>
    <p><i> Updated on: 2023-06-15T03:01:50.207127+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>