<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Error handling in payment protocol (BIP-0070 and BIP-0072)</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Andreas Schildbach 2014-04-25 22:33:36
            <br><i>Published on: 2014-04-25T22:33:36+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/April_2014/combined_Error-handling-in-payment-protocol-BIP-0070-and-BIP-0072-.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2014-April/005567.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In an email thread from 2014, J Ross Nicoll expressed concern about the lack of specificity on handling error states in the payment protocol specifications. He proposed that for any transport failure or non-200 HTTP status code while sending the Payment message, the client should retry after a delay of 30-60 seconds. For 400 status codes, the request should not be repeated, and as such the user should be alerted and a copy of the Payment message saved to be resent later. Nicoll also suggested that Payment messages should have a fixed maximum size of 10MB to avoid merchant systems theoretically having to accept files of any size. Additionally, he recommended a defined maximum time to wait to avoid DDoS via connection holding. Merchant systems should handle repeatedly receiving the same Payment message and return an equivalent (if not identical) PaymentACK to each. Finally, Nicoll raised a question about potential timing issues with transactions. If a merchant system wants to see confirmation of a transaction before sending a PaymentACK, he wondered whether it should hold the connection, send a PaymentACK with a memo indicating payment has been seen on the relay network but is not yet confirmed, or do something else. The email thread ended with Nicoll offering to write up these suggestions as a new BIP if that was more appropriate than editing the original.</p>
    <hr>
    <p><i> Updated on: 2023-06-08T21:35:19.166649+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>