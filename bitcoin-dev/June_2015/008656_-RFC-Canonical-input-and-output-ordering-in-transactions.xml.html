<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>[RFC] Canonical input and output ordering in transactions</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Gregory Maxwell 2015-06-14 23:02:51
            <br><i>Published on: 2015-06-14T23:02:51+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2015/combined_-RFC-Canonical-input-and-output-ordering-in-transactions.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-June/008656.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The Canonical Input and Output Ordering BIP proposes a canonical ordering of inputs and outputs when creating transactions. The motivation behind this proposal is to avoid trivial linkage analysis, especially change outputs. Most bitcoin wallet implementations randomize the outputs of transactions they create; however, mistakes have been made in the past. Using a canonical ordering has the same effect but is simpler, more obvious if incorrect, and can eventually be enforced by IsStandard() and even a soft-fork to enforce it. The proposed specification requires inputs to be ordered by index (lower value first) and txid (little-endian order, lower byte first). Outputs should be ordered by amount (lower value first) and script (starting from the first byte, lower byte first, shorter wins). Any single wallet is already free to implement this, but if other wallets do not, it would reduce privacy by making those transactions stand out. A BIP is appropriate, especially if this were to become an IsStandard() rule once widely adopted. However, there are concerns regarding the strict ordering requirements that are incompatible with future soft-forks that may expose additional ordering constraints. There may also be invisible constraints in systems, such as hardware wallets that sign top-down or future transaction covenants that have constraints about ordering. If everyone else was ordered, even if it wasn't enforced, these applications would be highly distinguishable. The motivations behind this proposal are understated, and there is an unstated motivation related to collaborative transaction systems like coinjoins or micropayment channels, where multiple clients need to agree on the same ordering. Overall, alternative proposals could be considered, such as privately derandomizing the ordering or proposing a simple derandomized randomization algorithm.</p>
    <hr>
    <p><i> Updated on: 2023-05-19T20:43:50.566470+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>