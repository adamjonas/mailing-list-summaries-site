<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>[RFC] Canonical input and output ordering in transactions <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008657_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Gregory Maxwell 2015-06-14 23:04:58</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008669_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Kristov Atlas 2015-06-15 04:01:36</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008495_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-06 06:44:07</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008518_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Danny Thorpe 2015-06-08 21:25:40</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008664_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Gregory Maxwell 2015-06-15 02:33:03</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008666_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Mark Friedenbach 2015-06-15 02:47:15</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008669_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Kristov Atlas 2015-06-15 04:01:36</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008497_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Mark Friedenbach 2015-06-06 09:45:23</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008487_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-06 04:42:10</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/009054_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Kristov Atlas 2015-06-24 22:09:32</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008755_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-16 08:06:38</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008657_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Gregory Maxwell 2015-06-14 23:04:58</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008663_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-15 02:29:11</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008669_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Kristov Atlas 2015-06-15 04:01:36</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008518_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Danny Thorpe 2015-06-08 21:25:40</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008487_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-06 04:42:10</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008656_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Gregory Maxwell 2015-06-14 23:02:51</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008666_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Mark Friedenbach 2015-06-15 02:47:15</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008705_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-15 21:01:04</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008496_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Wladimir J. van der Laan 2015-06-06 08:24:48</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008487_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-06 04:42:10</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008488_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Mark Friedenbach 2015-06-06 04:46:17</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008755_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-16 08:06:38</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008656_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Gregory Maxwell 2015-06-14 23:02:51</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008657_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Gregory Maxwell 2015-06-14 23:04:58</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008495_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-06 06:44:07</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008496_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Wladimir J. van der Laan 2015-06-06 08:24:48</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008518_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Danny Thorpe 2015-06-08 21:25:40</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008521_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Peter Todd 2015-06-08 21:36:11</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008705_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-15 21:01:04</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008728_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Jorge Timón 2015-06-16 07:10:17</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008488_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Mark Friedenbach 2015-06-06 04:46:17</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008728_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Jorge Timón 2015-06-16 07:10:17</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008656_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Gregory Maxwell 2015-06-14 23:02:51</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008666_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Mark Friedenbach 2015-06-15 02:47:15</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008495_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-06 06:44:07</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008496_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Wladimir J. van der Laan 2015-06-06 08:24:48</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008521_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Peter Todd 2015-06-08 21:36:11</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008663_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-15 02:29:11</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008755_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-16 08:06:38</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008497_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Mark Friedenbach 2015-06-06 09:45:23</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008521_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Peter Todd 2015-06-08 21:36:11</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008728_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Jorge Timón 2015-06-16 07:10:17</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008663_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-15 02:29:11</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008664_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Gregory Maxwell 2015-06-15 02:33:03</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/009054_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Kristov Atlas 2015-06-24 22:09:32</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/009054_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Kristov Atlas 2015-06-24 22:09:32</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008664_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Gregory Maxwell 2015-06-15 02:33:03</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008488_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Mark Friedenbach 2015-06-06 04:46:17</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008497_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Mark Friedenbach 2015-06-06 09:45:23</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008705_-RFC-Canonical-input-and-output-ordering-in-transactions.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Rusty Russell 2015-06-15 21:01:04</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-June/008657.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2015-06-14T23:04:58+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>The Bitcoin community has been discussing transaction ordering and the best practices for it. While sorting inputs and outputs is generally better than random, there are situations where the order of inputs and outputs is significant, so it should not be included in IsStandard() or consensus rules. A canonical ordering proposal has been made, which would reduce privacy risks and could become an IsStandard() rule once widely adopted. The proposed specification requires inputs to be ordered by index (lower value first) and txid (little-endian order, lower byte first). Outputs should be ordered by amount (lower value first) and script (starting from the first byte, lower byte first, shorter wins). However, some developers have expressed skepticism towards enforcing strict transaction ordering requirements due to potential conflicts with future soft-forks that may impose further ordering constraints. There are also concerns about invisible constraints in systems such as hardware wallets that sign top-down or future transaction covenants that have constraints about ordering. Some have suggested adding a private sorting key for wallets to sort inputs and outputs instead of implementing the proposed strict ordering requirements, but this may not be widely adopted.In addition to the canonical ordering proposal, there have been discussions on ways to order transactions in multi-party transactions without affecting other types of transactions' privacy. One suggestion is using a deterministic method that depends on a random seed previously shared by all parties involved in the transaction.Kristov Atlas has proposed a new BIP 69 to improve transaction ordering, but objections still exist concerning some transactions' inability to comply with the BIP due to input and/or output index dependencies. There are also concerns that setting a standard now for transactions that is not apparently random ordering from the perspective of passive blockchain observers will mean that such transactions stand out, which may be undesirable.Other discussions in this context include ways to order multi-party transactions without affecting other transaction types' privacy, concerns about compatibility with SIGHASH_SINGLE used in assurance contracts, and proposals for alternative methods of ordering transactions. Mark Friedenbach suggests a special exemption for compact commitments via mid-state compression, while Peter Todd's best-effort language could also be used.Wladimir J. van der Laan suggests removing the discussion of IsStandard or consensus rules, while Mark Friedenbach raises concerns about compatibility with SIGHASH_SINGLE and suggests a special exemption for compact commitments via mid-state compression. Despite challenges, outputs can be sorted by the first byte minus 107 (or 0 if script is zero length) and the remainder of the script in lexicographical order, which would place OP_RETURN outputs last. Alternatively, Peter Todd's best-effort language could be used for non-canonical ordering as OP_RETURN transactions cannot be hidden to look like something else.</p>
        <hr>
        <p><i>Updated on: 2023-06-09T22:19:50.496899+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>