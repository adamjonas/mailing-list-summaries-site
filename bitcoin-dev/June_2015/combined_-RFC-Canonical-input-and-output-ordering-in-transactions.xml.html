<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>[RFC] Canonical input and output ordering in transactions <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008664_-RFC-Canonical-input-and-output-ordering-in-transactions.xml.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Gregory Maxwell 2015-06-15 02:33:03</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008657_-RFC-Canonical-input-and-output-ordering-in-transactions.xml.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Gregory Maxwell 2015-06-14 23:04:58</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2015/008656_-RFC-Canonical-input-and-output-ordering-in-transactions.xml.html">[RFC] Canonical input and output ordering in transactions</a>
                        <b>Gregory Maxwell 2015-06-14 23:02:51</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-June/008664.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2015-06-15T02:33:03+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>Rusty Russell proposed a canonical ordering for inputs and outputs when creating transactions in a draft BIP. The motivation behind this proposal is to avoid trivial linkage analysis by randomizing the outputs of transactions, which most Bitcoin wallet implementations do. However, these implementations have made mistakes in the past, leading to reduced privacy. A canonical ordering has the same effect but is simpler, more obvious if incorrect, and can eventually be enforced by IsStandard() and even a soft-fork to enforce it. According to the proposed specification, inputs should be ordered based on index (lower value first) and txid (little endian order, lower byte first), while outputs should be ordered based on amount (lower value first) and script (starting from first byte, lower byte first, shorter wins). The reference implementation is available on Rusty Russell's Github page.Danny Thorpe expressed concerns about the proposal, stating that recommending sorting of inputs and outputs as part of IsStandard() or consensus rules is not ideal because there are cases where the order of the inputs and outputs is significant. Additionally, he argued that implementing strict ordering requirements could be incompatible with future soft-forks that may expose additional ordering constraints.Thorpe also noted that there may be invisible constraints in systems, such as hardware wallets that sign top down, or future transaction covenants that have constraints about ordering. He suggested that an alternative to the proposal would be to privately derandomize the ordering, similar to how DSA is done.Overall, it appears that the motivation behind the proposal is driven by collaborative transaction systems like coinjoins or micropayment channels, where multiple clients need to agree on the same ordering. However, there may be concerns regarding the compatibility of this proposal with future soft-forks and potential invisible constraints in systems.</p>
        <hr>
        <p><i>Updated on: 2023-05-19T20:44:20.596390+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>