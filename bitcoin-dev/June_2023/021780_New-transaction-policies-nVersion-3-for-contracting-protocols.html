<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>New transaction policies (nVersion=3) for contracting protocols</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Greg Sanders 2023-06-21 20:57:45+00:00
            <br><i>Published on: 2023-06-21T20:57:45+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_New-transaction-policies-nVersion-3-for-contracting-protocols.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021780.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>A proposal has been made to introduce new rules for Bitcoin transactions, specifically related to fee rates and conflicts in the mempool. The first rule states that when replacing a transaction, the minimum between the package feerate and ancestor feerate of the child should not be lower than the individual feerates of all directly conflicting transactions and the ancestor feerates of all original transactions. This modification aims to ensure that replacement transactions are not less incentive-compatible to mine. The rationale behind this rule is that the ancestor feerate may overestimate the incentive compatibility of a transaction, so a more conservative value is used.The second rule requires all package transactions with mempool conflicts to be V3, including the "sponsoring" child transaction. This means that only V3 transactions can pay to replace their ancestors' conflicts, and only V3 transactions' replacements may be paid for by a descendant. The rationale behind this rule is that the fee-related rules are economically rational for ancestor packages, but not necessarily for other types of packages. It becomes more difficult to account for all possibilities, especially in complex non-tree-shaped packages. Additionally, there may be concerns about the policy's incentive compatibility if the sponsor is not a direct descendant of the sponsee.For more detailed information on these rules, please refer to the documents "version3_transactions.md" and "packages.md" in the corresponding pull request.Regarding the usage of these rules in the Lightning Network (LN), it is recommended that commitment transactions should be V3 and have 1 anchor output. These transactions can be signed with 0 fees or 1 sat/vbyte once package relay is deployed on a significant portion of the network. If the commitment transaction needs to be broadcasted, the desired feerate at broadcast time should be determined, and the anchor output should be spent in a high feerate transaction. The child transaction attached to the broadcasted commitment transaction must also be V3 and should be limited to a maximum of 1000vB. It is possible for one child transaction to fund fees for multiple commitment transactions through batched fee-bumping. To add more fees, the child transaction should be replaced with a higher-feerate transaction, and it is not recommended to attach a grandchild transaction.It is important to note that unconfirmed V3 transactions should not be spent from except in specific cases, as the descendant limits for V3 transactions are very restrictive.The introduction of these rules addresses concerns about Rule 3 Pinning and provides a solution to fee-bump a counterparty's commitment transaction without using Child-Pays-for-Parent (CPFP). The adoption of V3 transactions in LN may not be widespread outside of Layer 2, so it is unlikely to worsen privacy concerns. Furthermore, backward compatibility is not an issue since under the previous policy, V3 transactions would not have been in the mempool.In terms of compatibility between V2 and V3 transactions, it is possible for a V2 transaction to replace a V3 transaction and vice versa. However, if the original V3 transaction has an unconfirmed V3 parent, this would violate the "inherited V3" rule and be rejected.Feedback and review of these proposed rules are welcome and encouraged. For more information, please refer to the provided links [1] [2].</p>
    <hr>
    <p><i> Updated on: 2023-07-11T02:22:31.964290+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>