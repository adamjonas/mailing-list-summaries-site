<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-19 01:14:10+00:00
            <br><i>Published on: 2023-06-19T01:14:10+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021776.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a conversation between Antoine Riard and Greg Sanders, Antoine raises a question about the opt-in mechanism for protocols that are not yet deployed. He asks whether this mechanism applies to non-deployed protocols or already deployed ones like coinjoin/lightning spending P2TR outputs. He also mentions the possibility of inflating the witness through a counterparty script spend path and the need to commit to avoid future interferences.Greg responds by stating that people should not be building protocols meant for production on undeveloped upgrade hooks. He requests a citation to clarify Antoine's point. Antoine acknowledges that ideally, they should not be encumbered by premature choices, but if these use-cases gain economic weight, the coordination cost of deploying a new policy might be prohibitive. He suggests focusing on sound and "firewalled" signaling and upgrading mechanisms to deploy new policy rules smoothly.In a separate email, Greg questions Antoine's statement about modifying current Taproot support on the Lightning side. He asks for a citation and emphasizes that protocols should not be built on undeveloped upgrade hooks. Antoine responds by explaining that requiring every input to commit to an annex, even if it is empty, would require modifying Taproot support on the Lightning side. He highlights the significance of this upgrade for Lightning nodes and the potential impact on propagations of their `option_taproot` channel transactions.Antoine further discusses the idea of limiting the maximum size of the value to 256 bytes to protect opt-in users. He mentions another approach where the maximum size/weight of the witness/transaction is introduced as a TLV record itself, providing a link to a related GitHub branch. He suggests considering this approach for future extensibility.The conversation shifts to Joost Jager, who proposes a restrictive policy for enabling annex-vaults while ensuring compatibility with existing multi-party protocols. His proposed policy includes opt-in annex, TLV format, allowing only unstructured data in tlv record 0, and limiting the maximum size of the value to 256 bytes. Joost highlights the need for a larger size limit due to the requirements of presigned transactions in vaults.The conversation concludes with Antoine acknowledging the insufficiency of the current 126-byte limit for vaults and asking if there are any remaining practical objections to making the annex standard under the conditions proposed by Joost.Overall, the conversation revolves around the opt-in mechanism, the possibility of inflating the witness, the need for sound and "firewalled" signaling and upgrading mechanisms, modifying Taproot support on the Lightning side, and the proposal for a restrictive policy for annex-vaults.</p>
    <hr>
    <p><i> Updated on: 2023-07-05T02:37:46.195164+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>