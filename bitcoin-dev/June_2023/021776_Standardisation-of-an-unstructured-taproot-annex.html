<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-19 01:14:10+00:00
            <br><i>Published on: 2023-06-19T01:14:10+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021776.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Antoine Riard raised a question regarding the opt-in mechanism for non-deployed and deployed protocols. He mentioned scenarios like pre-signed vaults and coinjoin/lightning spending P2TR outputs, where witness inflation can occur due to a counterparty script spend path. Antoine suggested committing to an annex now to avoid future interferences in such cases. He also mentioned that opting-in through script spend path could be a solution for currently deployed protocols. However, Greg Sanders requested a citation for this information and stated that building protocols on undeveloped upgrade hooks should be avoided. Antoine acknowledged this but emphasized that if these use-cases gain economic weight, deploying new policies may become costly or time-consuming. He suggested focusing on sound and "firewalled" signaling and upgrading mechanisms to deploy new policy rules smoothly. In another discussion, Greg Sanders questioned the need for modifying current Taproot support on the Lightning-side, where all P2TR spends must add an annex and commit to it in the BIP341 signature digest. He requested a citation for this information and emphasized that protocols should not be built on undeveloped upgrade hooks. Antoine clarified that requiring every input to commit to an annex, even if it is empty, might be necessary to protect opt-in users and prevent pinning vectors. Joost Jager proposed a more restrictive policy for enabling annex-vaults while ensuring compatibility with existing multi-party protocols. This policy included opt-in annex, TLV format, allowing only unstructured data, and limiting the maximum size of the value to 256 bytes. However, Joost highlighted that the previous limit of 126 bytes would not be sufficient for certain vault scenarios. He sought feedback on making the annex standard based on the conditions mentioned.</p>
    <hr>
    <p><i> Updated on: 2023-07-02T02:51:30.035558+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>