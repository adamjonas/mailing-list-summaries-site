<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-19 01:14:10+00:00
            <br><i>Published on: 2023-06-19T01:14:10+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021776.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Antoine Riard is seeking clarification on the opt-in mechanism and its impact on non-deployed and deployed protocols. He questions whether the opt-in is necessary for non-deployed protocols, as currently deployed protocols can be opted-in through script spend paths. Greg Sanders requests a citation for the claim that people should not build protocols on undeveloped upgrade hooks, expressing concern about being encumbered by premature choices. Antoine explains that while ideally premature choices should be avoided, there may be cases where use-cases gain economic weight and the coordination cost of deploying a new policy becomes prohibitive. He suggests focusing on sound and "firewalled" signaling and upgrading mechanisms to deploy new policy rules smoothly.Greg asks Antoine for clarification on the requirement to modify current Taproot support on the Lightning-side, specifically regarding P2TR spends adding an annex and committing to it in the BIP341 signature digest. He emphasizes that protocols should not be built on undeveloped upgrade hooks and requests a citation for further understanding. Antoine discusses the mandatory upgrade for Lightning nodes and the potential impact on propagations of `option_taproot` channel transactions.Antoine also mentions an alternative approach where the maximum size/weight of the witness/transaction is introduced as a TLV record itself, shared in a GitHub branch. He notes that this branch implements the "only allow tlv record 0" with the TLV format from BIPs #1381.Joost Jager proposes a restrictive policy to enable annex-vaults and align with existing work. The proposed policy includes an opt-in annex for every input (even if empty) to ensure multi-party protocols remain unaffected, a TLV format for future extensibility, allowing only unstructured data in the tlv record 0 for future extensibility, and limiting the maximum size of the value to 256 bytes to protect opt-in users. Joost highlights the need for a larger limit than the current 126 bytes to accommodate multiple presigned transactions and additional vault parameters. He asks for practical objections to making the annex standard under these conditions.</p>
    <hr>
    <p><i> Updated on: 2023-07-04T02:39:40.620142+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>