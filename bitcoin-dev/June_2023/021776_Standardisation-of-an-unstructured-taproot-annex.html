<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-19 01:14:10+00:00
            <br><i>Published on: 2023-06-19T01:14:10+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021776.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a conversation between Antoine Riard and Greg Sanders, the topic of discussion revolves around the opt-in annex mechanism for protocols in the context of Bitcoin. Antoine raises a question regarding the type of protocols that should be subject to opt-in, whether they are non-deployed-yet or already deployed protocols like coinjoin/lightning spending P2TR outputs. He mentions the need for committing to an annex now to avoid future interferences, especially in cases where witness inflation can occur due to counterparty script spend paths. Antoine further suggests that if the opt-in mechanism is solely for non-deployed-yet protocols, then existing protocols can always be opted-in to the new annex policy through script spend paths in collaborative added inputs. Greg responds by stating that building protocols meant for production on top of undeveloped upgrade hooks is not advisable and premature choices should not encumber the process. He requests a citation for clarification.Antoine acknowledges Greg's point about avoiding premature choices but argues that if these use-cases gain economic weight, deploying a new policy may become prohibitively costly or time-consuming. He emphasizes the legitimacy of these use-cases and suggests focusing on sound and "firewalled" signaling and upgrading mechanisms to deploy new policy rules smoothly for new use-cases. The conversation then shifts to a discussion between Greg and Joost Jager. Joost proposes an opt-in annex mechanism for annex-vaults, which has potential for improving Bitcoin custody. Joost suggests several conditions for this mechanism, including requiring every input to commit to an annex even if it is empty, using the TLV format for future extensibility, allowing only unstructured data in tlv record 0 for future extensibility, and limiting the maximum size of the value to 256 bytes to protect opt-in users. Joost points out that the previously proposed limit of 126 bytes is insufficient for annex-vaults due to the space required for presigned transactions and other vault parameters. Antoine joins the discussion by proposing an alternative approach where the maximum size/weight of the witness/transaction is introduced as a TLV record itself. He provides a link to a GitHub branch that implements this approach along with the "only allow tlv record 0" condition from bips #1381.Overall, the conversation revolves around the opt-in annex mechanism for protocols in the Bitcoin ecosystem, discussing its implications, potential limitations, and alternative approaches for implementing it effectively.</p>
    <hr>
    <p><i> Updated on: 2023-06-29T02:33:39.210965+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>