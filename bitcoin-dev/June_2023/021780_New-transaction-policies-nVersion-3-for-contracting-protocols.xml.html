<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>New transaction policies (nVersion=3) for contracting protocols</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Greg Sanders 2023-06-21 20:57:45+00:00
            <br><i>Published on: 2023-06-21T20:57:45+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_New-transaction-policies-nVersion-3-for-contracting-protocols.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021780.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Bitcoin developer Gloria has proposed changes to the Bitcoin network's transaction replacement rules with the aim of aiding L2/contract protocols. The proposal includes a set of mempool/transaction relay policies that apply additional policy rules to V3 transactions and modifications to package RBF rules.Under the new rules, V3 transactions can be replaced even if they do not signal BIP125 replaceability. Any descendant of an unconfirmed V3 transaction must also be V3, and an unconfirmed V3 transaction cannot have more than one descendant. Additionally, a V3 transaction with an unconfirmed V3 ancestor cannot be larger than 1000 virtual bytes, allowing for inherited replaceability signaling when descendants of unconfirmed transactions are created. These rules solve Rule 3 pinning and may allow getting rid of CPFP carve-out.The proposal also suggests allowing OP_TRUE to become a standard script type and enabling a single dust-value output that is immediately spent by the package. However, Gregory Sanders points out that this regime still allows pinning anytime you are sharing a transaction with someone else where you don't have control over all the inputs.In terms of fee-related rules, the new rule requires that all package transactions with mempool conflicts must be V3. This means only V3 transactions can pay to replace their ancestors' conflicts, and only V3 transactions' replacements may be paid for by a descendant. Commitment transactions should be V3 and have one anchor output, signed with 0 fees or 1sat/vbyte once package relay is deployed on a significant portion of the network. The child must be V3 and at most 1000vB, restricting the number of inputs used to fund the fee bump. One child may fund fees for multiple commitment tx, and to do a second fee-bump to add more fees, replace the child with a higher-feerate tx. The V3 descendant limit restricts both you and your counterparty, fixing Rule 3 Pinning.</p>
    <hr>
    <p><i> Updated on: 2023-06-24T01:21:09.199642+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>