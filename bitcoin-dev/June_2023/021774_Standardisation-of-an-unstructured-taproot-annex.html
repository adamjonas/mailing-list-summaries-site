<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Greg Sanders 2023-06-18 20:40:53+00:00
            <br><i>Published on: 2023-06-18T20:40:53+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021774.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Antoine Riard raised some questions and concerns regarding the proposed changes to Taproot support on the Lightning-side. He asked for a citation to better understand the requirements and implications of these modifications. Antoine mentioned that requiring every input to commit to an annex, even if it is empty, would be a mandatory upgrade for Lightning nodes. Failure to do so would break propagations of their `option_taproot` channel transactions.There was also a discussion about limiting the maximum size of the value to 256 bytes. Antoine suggested another approach where the maximum size/weight of the witness/transaction is introduced as a TLV record itself. He provided a link to a related GitHub branch that implements this approach along with the "only allow tlv record 0" using the TLV format from BIPs #1381.Greg Sanders agreed that the TLV format seems like a reasonable place to start, as it shouldn't unduly impact current users and is simple from an accounting perspective. He mentioned that the maximum size restriction could help protect opt-in users and potentially address anti-pinning efforts. Greg also suggested using max tx size policy "hints" in an annex field to relax the restrictions in the future.Joost Jager proposed a set of policies that would enable annex-vaults while remaining restrictive enough to protect opt-in users and align with existing work. These policies include an opt-in annex requirement for every input, Tlv format as defined in BIP #1381 for future extensibility, allowing only tlv record 0 for unstructured data, and limiting the maximum size of the value to 256 bytes. Joost pointed out that the previously proposed limit of 126 bytes would not be sufficient for these types of vaults due to the space required for presigned transactions and other parameters.Overall, the discussion revolved around the technical aspects and potential impacts of implementing these changes to Taproot support on the Lightning-side. The participants shared their perspectives and considered different approaches to address concerns and protect users while allowing for future extensibility.</p>
    <hr>
    <p><i> Updated on: 2023-07-03T02:42:35.378131+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>