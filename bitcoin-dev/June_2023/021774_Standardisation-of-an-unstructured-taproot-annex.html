<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Greg Sanders 2023-06-18 20:40:53+00:00
            <br><i>Published on: 2023-06-18T20:40:53+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021774.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a discussion on the bitcoin-dev mailing list, Greg Sanders expressed confusion regarding a proposed modification to Taproot support on the Lightning side. He requested a citation to better understand the context and implications of the suggested change. Antoine Riard responded, explaining that the modification would require all P2TR spends to add an annex and commit to it in the BIP341 signature digest. This mandatory upgrade for Lightning nodes could potentially break the propagation of `option_taproot` channel transactions if not implemented. Another topic discussed was the limitation on the maximum size of the value to 256 bytes, which aims to protect opt-in users. Joost Jager suggested an alternative approach where the maximum size/weight of the witness/transaction is introduced as a TLV record. This branch also implements the "only allow tlv record 0" with the TLV format from BIP #1381. Greg Sanders mentioned that the TLV format seemed like a reasonable starting point and highlighted its simplicity from an accounting perspective. He also suggested that the maximum size restriction could be further relaxed in the future by using max tx size policy "hints" in an annex field. In response, Joost Jager outlined a more restrictive policy that would enable annex-vaults while protecting opt-in users. The proposed policy includes opting-in to an annex even if it is empty, using the TLV format as defined in BIP #1381 for future extensibility, allowing only unstructured data in the tlv record 0 for future extensibility, and limiting the maximum size of the value to 256 bytes to protect opt-in users. However, Jager noted that the current limit of 126 bytes in a pull request might not be sufficient for certain types of vaults that require more space for signatures and other parameters. Overall, the discussion revolved around modifying Taproot support, introducing limitations on maximum size, and considering the TLV format for future extensibility.</p>
    <hr>
    <p><i> Updated on: 2023-07-13T02:44:38.637156+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>