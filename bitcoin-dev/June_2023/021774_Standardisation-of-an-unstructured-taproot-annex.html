<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Greg Sanders 2023-06-18 20:40:53+00:00
            <br><i>Published on: 2023-06-18T20:40:53+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021774.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a conversation thread on the bitcoin-dev mailing list, Greg Sanders expresses confusion and requests clarification regarding an opt-in annex feature being discussed. He questions the need for modifying current Taproot support on the Lightning side and asks for a citation to better understand the proposal. Antoine Riard responds to Greg's query by explaining that the requirement of every input to commit to an annex, even if it is empty, would necessitate modifications to the current Taproot support on the Lightning side. Antoine highlights that this upgrade would be mandatory for Lightning nodes using P2TR spends, as failure to do so would disrupt propagations of their `option_taproot` channel transactions.Additionally, Antoine discusses another approach to limit the maximum size of the value to 256 bytes. He references a GitHub branch that introduces the maximum size/weight of the witness/transaction as a TLV record itself. This branch also implements the "only allow tlv record 0" with the TLV format from BIPs #1381.Shifting the discussion, Joost Jager proposes a set of policies to enable annex-vaults while ensuring compatibility with existing multi-party protocols and future extensibility. These policies include an opt-in annex for every input, the use of the TLV format defined in BIP #1381, allowing only unstructured data as tlv record 0, and limiting the maximum size of the value to 256 bytes to protect opt-in users. However, Joost points out that the current limit of 126 bytes proposed in a previous pull request is insufficient for vaults requiring multiple presigned transactions and additional parameters. Joost seeks feedback on any practical objections to making the annex standard under these conditions.The conversation demonstrates a discussion among bitcoin developers regarding the implementation of an opt-in annex feature and the associated modifications to Taproot support on the Lightning side. Different approaches and policies are being considered to ensure compatibility, extensibility, and user protection within the proposed feature.</p>
    <hr>
    <p><i> Updated on: 2023-07-11T02:28:49.152488+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>