<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Greg Sanders 2023-06-18 20:40:53+00:00
            <br><i>Published on: 2023-06-18T20:40:53+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021774.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Antoine Riard raised some questions regarding the implementation of Taproot support on the Lightning-side. He asked for a citation to clarify certain points and emphasized the importance of not building protocols on undeveloped upgrade hooks. Antoine also mentioned that requiring every input to commit to an annex, even if it is empty, would require modifying current Taproot support on the Lightning-side. This would be a mandatory upgrade for Lightning nodes to ensure the proper functioning of their `option_taproot` channel transactions.Another approach to protect opt-in users is to limit the maximum size/weight of the witness/transaction to 256 bytes. There is a branch in GitHub that implements this approach by introducing the maximum size/weight as a TLV record itself.Greg Sanders responded to Joost Jager's question about whether it would still be necessary to restrict the annex to a maximum size. Greg mentioned that it is worth considering to protect opt-in users and for other anti-pinning efforts. He also suggested using max tx size policy "hints" in an annex field for future flexibility.Joost Jager proposed a set of policies that enable annex-vaults while still being in line with existing work. These policies include opt-in annex, TLV format, allowing only unstructured data, and limiting the maximum size of the value to 256 bytes. However, Joost pointed out that the current limit of 126 bytes is insufficient for these types of vaults, as there may be multiple presigned transactions and additional parameters that need to be stored.Overall, the discussion revolves around the implementation of Taproot support on the Lightning-side and the need to protect opt-in users by limiting the size of transactions and ensuring compatibility with existing protocols.</p>
    <hr>
    <p><i> Updated on: 2023-07-07T02:36:44.443014+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>