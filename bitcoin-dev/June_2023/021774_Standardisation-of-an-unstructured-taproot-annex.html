<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Greg Sanders 2023-06-18 20:40:53+00:00
            <br><i>Published on: 2023-06-18T20:40:53+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021774.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Antoine Riard suggested a modification to the current Taproot support on the Lightning-side, where all P2TR spends must add an annex and commit to it in the BIP341 signature digest. This would be a mandatory upgrade for Lightning nodes, as failure to do so would break propagations of their `option_taproot` channel transactions. There is another approach suggested by Antoine Riard, where the maximum size/weight of the witness/transaction is introduced as a TLV record itself. He provided a link to a branch that implements this approach along with the "only allow tlv record 0" using the TLV format from BIP #1381.Greg Sanders responded to Joost Jager's question about whether it would still be necessary to restrict the annex size. Greg mentioned that he thinks it's worth considering the restriction to protect opt-in users and for anti-pinning efforts. However, he also noted that it wouldn't be sufficient for all pinning vectors.Joost Jager proposed a set of policies for opt-in annex-vaults to ensure they remain unaffected by existing multi-party protocols. These policies include requiring every input to commit to an annex even if it is empty, using the Tlv format as defined in BIP #1381 for future extensibility, allowing only unstructured data in the tlv record 0 for future extensibility, and limiting the maximum size of the value to 256 bytes to protect opt-in users.However, Joost pointed out that the current limit of 126 bytes in a pull request made by bitcoin-inquisition isn't sufficient for these types of vaults. He explained that the signatures for two presigned transactions (unvault and emergency) alone would take up 128 bytes, and additional space is needed for the ephemeral key and other vault parameters.Overall, there are discussions and suggestions regarding modifying Taproot support on the Lightning-side, introducing a TLV record for the maximum size/weight of transactions, and implementing policies to protect opt-in users and future extensibility.</p>
    <hr>
    <p><i> Updated on: 2023-07-04T02:39:24.290908+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>