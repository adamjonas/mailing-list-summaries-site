<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Greg Sanders 2023-06-18 20:40:53+00:00
            <br><i>Published on: 2023-06-18T20:40:53+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021774.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Antoine Riard proposed some modifications to the Taproot support on the Lightning-side. He suggested that all P2TR spends should add an annex and commit to it in the BIP341 signature digest. This would require a mandatory upgrade for Lightning nodes, as failure to do so would break propagations of their `option_taproot` channel transactions. Greg Sanders raised some concerns about building protocols on undeveloped upgrade hooks and requested a citation for clarification.In addition, Antoine mentioned another approach where the maximum size/weight of the witness/transaction is introduced as a TLV record itself. He provided a link to a branch that implements this approach along with the "only allow tlv record 0" using the TLV format from BIP #1381.Greg Sanders expressed support for the TLV format, stating that it wouldn't unduly impact current users and could be further relaxed in the future by using max tx size policy "hints" in an annex field. He invited others to share their thoughts on the matter.Joost Jager responded to Greg's comment, suggesting a set of policies to enable annex-vaults while protecting opt-in users. These policies include opt-in annex (every input must commit to an annex even if it is empty), Tlv format as defined in BIP #1381, only allowing tlv record 0 for unstructured data, and limiting the maximum size of the value to 256 bytes. Joost also mentioned that the current limit of 126 bytes in a pull request isn't sufficient for these types of vaults, as multiple presigned transactions and additional vault parameters require more space.Overall, the discussion revolves around the proposed modifications to Taproot support on the Lightning-side and the implementation of the TLV format for future extensibility and protection of opt-in users. The participants are addressing concerns, sharing ideas, and seeking consensus on the best approach.</p>
    <hr>
    <p><i> Updated on: 2023-07-02T02:51:14.105572+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>