<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Greg Sanders 2023-06-18 20:40:53+00:00
            <br><i>Published on: 2023-06-18T20:40:53+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021774.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Antoine Riard replied to a message from Greg Sanders regarding the opt-in annex feature. He asked for clarification on whether rejecting a transaction without the minimal annex with its 0x50 tag would be required. Antoine mentioned that if this is the case, it would require modifying current Taproot support on the Lightning-side, where all P2TR spends must add an annex and commit to it in the BIP341 signature digest. This mandatory upgrade for Lightning nodes would ensure that failure to add the annex would break propagations of their `option_taproot` channel transactions.Antoine also mentioned another approach to limit the maximum size of the value to 256 bytes as a way to protect opt-in users. He referred to a branch that implements this approach along with the "only allow tlv record 0" using the TLV format from bips #1381. Greg responded to Joost's question about whether it would still be necessary to restrict the annex to a maximum size. Greg stated that he thinks it's worth considering to protect the opt-in users and can also be used for other anti-pinning efforts. He suggested that a more relaxed policy could be implemented in the future by using max tx size policy "hints" in an annex field.Joost proposed a set of policies for annex-vaults that would enable future extensibility and protect opt-in users. These policies include: opt-in annex (every input must commit to an annex even if it is empty), Tlv format as defined in <a href="https://github.com/bitcoin/bips/pull/1381,">https://github.com/bitcoin/bips/pull/1381,</a> only allowing tlv record 0 for unstructured data, and limiting the maximum size of the value to 256 bytes. Joost mentioned that the current limit of 126 bytes in a pull request isn't sufficient for these types of vaults, as they require more space for signatures and other parameters.Overall, the discussion revolves around the opt-in annex feature and its implementation, as well as the need to protect opt-in users and enable future extensibility.</p>
    <hr>
    <p><i> Updated on: 2023-07-01T02:55:40.801911+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>