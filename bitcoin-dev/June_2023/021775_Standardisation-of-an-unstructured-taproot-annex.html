<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-18 20:32:12+00:00
            <br><i>Published on: 2023-06-18T20:32:12+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021775.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a discussion on the bitcoin-dev mailing list, the topic of introducing an opt-in annex for every input in transactions was raised. The proposal suggests that even if the annex is empty, every input must commit to it. This requirement would not affect existing multi-party protocols. However, there is a concern regarding the implementation of this change in Taproot support on the Lightning-side. Currently, all P2TR spends must add an annex and commit to it in the BIP341 signature digest. Failure to do so would disrupt the propagation of `option_taproot` channel transactions for Lightning nodes.Another approach suggested in the discussion is to limit the maximum size/weight of the witness/transaction to 256 bytes. This limitation aims to protect opt-in users. A related branch in the discussion implements the restriction of allowing only TLV record 0 with the TLV format from BIP #1381.Greg Sanders agrees that the TLV format could be a reasonable starting point as it would not have a significant impact on current users. He also suggests that max transaction size policy "hints" in an annex field could provide flexibility in the future. However, Greg invites others to provide their opinions on the matter.Joost Jager proposes a set of policies that would enable annex-vaults while aligning with previous work done. These policies include the opt-in annex requirement, the use of the TLV format defined in BIP #1381 for future extensibility, allowing only unstructured data in tlv record 0 for future extensibility, and limiting the maximum size of the value to 256 bytes to protect opt-in users.</p>
    <hr>
    <p><i> Updated on: 2023-07-10T02:44:44.385248+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>