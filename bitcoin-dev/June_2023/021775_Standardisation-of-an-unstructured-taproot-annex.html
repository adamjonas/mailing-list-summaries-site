<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-18 20:32:12+00:00
            <br><i>Published on: 2023-06-18T20:32:12+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021775.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The discussion revolves around two main topics: requiring every input to commit to an annex even if it is empty, and limiting the maximum size of the value to 256 bytes. The purpose of these measures is to protect opt-in users and ensure that existing multi-party protocols remain unaffected.One proposal suggests modifying current Taproot support on the Lightning-side, where all P2TR spends must add an annex and commit to it in the BIP341 signature digest. This would require a mandatory upgrade for Lightning nodes to avoid breaking propagations of their `option_taproot` channel transactions.Another approach is to introduce the maximum size/weight of the witness/transaction as a TLV record itself. A branch implementing this approach has been proposed, which also implements the "only allow tlv record 0" with the TLV format from BIP #1381.A participant named Greg Sanders agrees that using the TLV format for the annex seems reasonable and should not unduly impact current users. He suggests that it can be further relaxed in the future by using max tx size policy "hints" in an annex field.Joost Jager outlines a more restrictive policy that would still enable annex-vaults and is in line with previous work. This policy includes the opt-in annex requirement, the TLV format as defined in BIP #1381, only allowing unstructured data in tlv record 0, and limiting the maximum size of the value to 256 bytes. However, Joost points out that the current limit of 126 bytes in a proposed branch is not sufficient for these types of vaults, as presigned txes and other parameters already take up a significant portion of the available space.Overall, the participants are discussing various measures to protect opt-in users and ensure the compatibility of existing protocols while introducing new features related to annexes and transaction size limits.</p>
    <hr>
    <p><i> Updated on: 2023-07-11T02:28:30.761573+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>