<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-18 20:32:12+00:00
            <br><i>Published on: 2023-06-18T20:32:12+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021775.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The discussion revolves around two proposals to enhance Bitcoin's functionality. The first proposal suggests requiring every input to commit to an annex, even if it is empty, in order to ensure existing multi-party protocols remain unaffected. This would necessitate modifying the current Taproot support on the Lightning-side, as all P2TR spends must add an annex and commit to it in the BIP341 signature digest. Failure to upgrade Lightning nodes accordingly would disrupt propagations of their `option_taproot` channel transactions.The second approach involves introducing a maximum size/weight limit for the witness/transaction as a TLV record itself. This proposal can be found in the following link: <a href="https://github.com/bitcoin-inquisition/bitcoin/pull/28">https://github.com/bitcoin-inquisition/bitcoin/pull/28</a>. Additionally, this branch also implements the restriction of allowing only TLV record 0 with the TLV format from BIP #1381.Joost Jager suggests a set of policies that enable annex-vaults while aligning with previous work. These policies include an opt-in annex requirement for every input, the adoption of the TLV format defined in BIP #1381 for future extensibility, allowing only unstructured data in TLV record 0 for further extensibility, and limiting the maximum size of the value to 256 bytes to protect opt-in users. However, there is concern that the current limit of 126 bytes in another proposal (<a href="https://github.com/bitcoin-inquisition/bitcoin/pull/22)">https://github.com/bitcoin-inquisition/bitcoin/pull/22)</a> is insufficient for these types of vaults. Joost points out that if there are two presigned transactions (unvault and emergency), the signatures alone would take up 128 bytes, leaving little room for additional parameters. Overall, the discussion explores the need for enhanced protocols to ensure compatibility with multi-party systems and protect opt-in users.</p>
    <hr>
    <p><i> Updated on: 2023-06-29T02:32:46.529997+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>