<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-18 20:32:12+00:00
            <br><i>Published on: 2023-06-18T20:32:12+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021775.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The discussion revolves around the implementation of an opt-in annex and the limit on the size of the value in Bitcoin transactions. The opt-in annex requires every input to commit to an annex, even if it is empty, to ensure that existing multi-party protocols remain unaffected. This would require modifying current Taproot support on the Lightning-side, where all P2TR spends must add an annex and commit to it in the BIP341 signature digest. Failure to do so would break propagations of `option_taproot` channel transactions.Another approach discussed is introducing the maximum size/weight of the witness/transaction as a TLV (Type-Length-Value) record itself. This approach is implemented in a branch that also implements allowing only TLV record 0 with the TLV format from BIPs #1381. This approach aims to protect opt-in users and can be further relaxed in the future using max tx size policy "hints" in an annex field.There is a suggestion to restrict the size of the annex to 256 bytes to protect opt-in users. However, it is noted that the current limit of 126 bytes is not sufficient for certain types of vaults. For example, if there are two presigned transactions (unvault and emergency), those signatures would already take up 2*64=128 bytes. Additionally, 32 bytes need to be stored for the ephemeral key itself, as it cannot be reconstructed from the Schnorr signature. The remaining bytes could be used for a third presigned transaction and/or additional vault parameters.The discussion participants are considering the most restrictive policy that would still enable annex-vaults and is in line with previous work. The proposed policies include the opt-in annex, TLV format, allowing only TLV record 0, and limiting the maximum size of the value to 256 bytes. The goal is to ensure the security and functionality of Bitcoin transactions while protecting opt-in users. The practical objections to making the annex standard under these conditions are being considered.Overall, the discussion is focused on finding ways to enhance Bitcoin transactions through the implementation of an opt-in annex and setting limits on the size of the value in order to protect users and maintain compatibility with existing protocols.</p>
    <hr>
    <p><i> Updated on: 2023-07-08T02:34:28.852903+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>