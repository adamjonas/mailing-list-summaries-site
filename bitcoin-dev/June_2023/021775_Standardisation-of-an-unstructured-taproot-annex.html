<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-18 20:32:12+00:00
            <br><i>Published on: 2023-06-18T20:32:12+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021775.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>There is a discussion regarding the implementation of an opt-in annex and the limitation of the maximum size of the value in Bitcoin transactions. The opt-in annex would require every input to commit to an annex, even if it is empty. This change aims to ensure that existing multi-party protocols remain unaffected. However, there are concerns about how this would impact current Taproot support on the Lightning-side, as all Pay-to-Taproot spends must add an annex and commit to it in the BIP341 signature digest. Failure to do so would break propagations of `option_taproot` channel transactions.Another approach suggested is to introduce the maximum size/weight of the witness/transaction as a TLV (Type-Length-Value) record itself. This proposal can be found in a GitHub branch that also implements the "only allow tlv record 0" with the TLV format from BIP #1381. This approach is seen as a reasonable starting point as it does not unduly impact current users and is simple from an accounting perspective. It also allows for future relaxations by using maximum transaction size policy "hints" in an annex field.In response to this suggestion, Joost Jager proposes a more restrictive policy that would enable annex-vaults while protecting opt-in users. The proposed policy includes the opt-in annex requirement, the use of the TLV format defined in BIP #1381, allowing only unstructured data in tlv record 0, and limiting the maximum size of the value to 256 bytes. However, it is noted that the current limit of 126 bytes in a GitHub pull request is insufficient for these types of vaults.</p>
    <hr>
    <p><i> Updated on: 2023-07-13T02:44:12.373905+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>