<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-18 20:32:12+00:00
            <br><i>Published on: 2023-06-18T20:32:12+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021775.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The discussion thread begins with a proposal to require every input to commit to an annex, even if it is empty. This would involve modifying the current Taproot support on the Lightning-side, where all P2TR spends must add an annex and commit to it in the BIP341 signature digest. Failure to do so would break propagations of 'option_taproot' channel transactions. Another approach suggested is to limit the maximum size/weight of the witness/transaction to 256 bytes as a way to protect opt-in users. A pull request on GitHub (<a href="https://github.com/bitcoin-inquisition/bitcoin/pull/28)">https://github.com/bitcoin-inquisition/bitcoin/pull/28)</a> implements this approach along with the "only allow tlv record 0" using the TLV format from BIP #1381.Joost Jager proposes a more restrictive policy that would still enable annex-vaults while protecting opt-in users. The proposed policy includes an opt-in annex requirement for every input, the use of the TLV format defined in BIP #1381 for future extensibility, allowing only unstructured data in tlv record 0 for future extensibility, and limiting the maximum size of the value to 256 bytes to protect opt-in users. However, the existing limit of 126 bytes in another pull request (<a href="https://github.com/bitcoin-inquisition/bitcoin/pull/22)">https://github.com/bitcoin-inquisition/bitcoin/pull/22)</a> is deemed insufficient for these types of vaults. Joost explains that if there are two presigned transactions (unvault and emergency), those signatures alone would take up 128 bytes, and an additional 32 bytes would be needed to store the ephemeral key itself. The remaining bytes could be used for a third presigned transaction and/or additional vault parameters.Overall, the discussion focuses on ensuring the compatibility of multi-party protocols with the proposed changes, protecting opt-in users, and considering future extensibility options.</p>
    <hr>
    <p><i> Updated on: 2023-07-12T02:35:46.313293+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>