<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-18 20:32:12+00:00
            <br><i>Published on: 2023-06-18T20:32:12+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021775.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The discussion is focused on making modifications to the Taproot support on the Lightning-side in order to require every input to commit to an annex, even if it is empty. This would be a mandatory upgrade for Lightning nodes to ensure the propagation of their `option_taproot` channel transactions. Additionally, there is a proposal to limit the maximum size/weight of the witness/transaction to 256 bytes in order to protect opt-in users.There is another approach being considered, which involves introducing the maximum size/weight of the witness/transaction as a TLV (Type-Length-Value) record itself. This proposed approach can be found in the following link: <a href="https://github.com/bitcoin-inquisition/bitcoin/pull/28">https://github.com/bitcoin-inquisition/bitcoin/pull/28</a>. This branch also implements the "only allow tlv record 0" with the TLV format from BIPs #1381.Greg Sanders suggests that the TLV format is a reasonable starting point as it wouldn't unduly impact current users and is simple from an accounting perspective. He also mentions that the maximum size policy "hints" in an annex field could be used to further relax the restrictions in the future.Joost Jager suggests a set of policies that would enable annex-vaults while ensuring compatibility with existing multi-party protocols. These policies include the opt-in annex requirement, the use of the TLV format, only allowing unstructured data in tlv record 0, and limiting the maximum size of the value to 256 bytes. However, he points out that the current limit of 126 bytes proposed in another pull request isn't sufficient for vaults that involve multiple presigned transactions. Joost seeks feedback on whether there are any practical objections to making the annex standard under these conditions.Overall, the discussion revolves around making changes to the Taproot support on the Lightning-side, specifically requiring every input to have an annex and limiting the size of the witness/transaction. The proposed approach involves the use of TLV records, and there is a suggestion to relax the restrictions in the future using the annex field.</p>
    <hr>
    <p><i> Updated on: 2023-07-02T02:50:36.353499+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>