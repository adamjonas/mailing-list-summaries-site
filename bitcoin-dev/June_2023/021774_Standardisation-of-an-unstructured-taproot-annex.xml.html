<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Standardisation of an unstructured taproot annex</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Greg Sanders 2023-06-18 20:40:53+00:00
            <br><i>Published on: 2023-06-18T20:40:53+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/June_2023/combined_Standardisation-of-an-unstructured-taproot-annex.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021774.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In an email chain between Antoine Riard and Greg Sanders, they discuss the proposed Opt-in annex for Bitcoin. Joost Jager proposes a policy for annex-vaults that is in line with previous work done, which includes opt-in annexes where every input must commit to an annex even if it's empty, Tlv format as defined in <a href="https://github.com/bitcoin/bips/pull/1381">https://github.com/bitcoin/bips/pull/1381</a> for future extensibility, only allow tlv record 0 - unstructured data for future extensibility, and limit maximum size of the value to 256 bytes to protect opt-in users. Greg suggests using max tx size policy "hints" in an annex field to further relax the policy in the future. Antoine asks for clarification on requiring every input to commit to an annex even if it's empty, and notes that this would require modifying current Taproot support on the Lightning side. He explains that all P2TR spends must add an annex and commit to it in the BIP341 signature digest, making it a mandatory upgrade for Lightning nodes. Antoine also suggests another approach where the maximum size/weight of the witness/transaction is introduced as a TLV record itself, linking to <a href="https://github.com/bitcoin-inquisition/bitcoin/pull/28,">https://github.com/bitcoin-inquisition/bitcoin/pull/28,</a> which also implements the "only allow tlv record 0" with the TLV format from bips #1381. Greg expresses confusion about the proposed changes and asks for a citation to clarify the situation. He criticizes building protocols on undeveloped upgrade hooks and argues that premature choices should not encumber their development. Overall, the conversation revolves around how to implement the Opt-in annex policy and what implications it may have on existing systems.</p>
    <hr>
    <p><i> Updated on: 2023-06-23T01:25:23.716856+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>