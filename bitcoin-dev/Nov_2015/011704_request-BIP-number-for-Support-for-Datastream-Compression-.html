<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>request BIP number for: &#34;Support for Datastream Compression&#34;</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Jeff Garzik 2015-11-10 16:46:15
            <br><i>Published on: 2015-11-10T16:46:15+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/Nov_2015/combined_request-BIP-number-for-Support-for-Datastream-Compression-.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2015-November/011704.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a discussion on the bitcoin-dev mailing list, Tier Nolan suggested that for historical data, sticking to just blocks would be the best plan. He proposed defining a "cblocks" message that handles multiple blocks by concatenating block messages as payload before compression. The sending peer could combine blocks so that each cblock is compressing at least 10kB of block data and it is probably worth specifying a maximum size for network buffer reasons (either 1MB or 1 block maximum). Similarly, transactions could be combined together and compressed "ctxs." The inv messages could be modified so that you can request groups of 10-20 transactions. The discussion also raised some points regarding the use of compression protocols such as zlib and LZO. While most blocks and transactions have runs of zeroes and/or highly common bit-patterns, which contributes to useful compression even at smaller sizes, zlib has a dictionary (32K?) that works well with repeated patterns such as those you see with concatenated runs of transactions. However, zlib has a crappy security track record, and a fallback path to non-compressed is required, should compression fail or crash. LZO should provide much better compression, at a cost of CPU performance and using a less-reviewed, less-field-tested library. Overall, the discussion focused on ways to save bandwidth in sending historical blocks and transactions while considering the pros and cons of various compression protocols. Johnathan Corgan emphasized that trade-off decisions should be local and negotiated between peers, not a required feature of the network P2P.</p>
    <hr>
    <p><i> Updated on: 2023-06-11T00:58:22.095830+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>