<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>BIP for OP_VAULT</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Greg Sanders 2023-03-06 16:07:38
            <br><i>Published on: 2023-03-06T16:07:38+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/March_2023/combined_BIP-for-OP-VAULT.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-March/021527.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In an email exchange between James O'Beirne and Greg, they discussed the proposed implementation of a TLUV-ified OP_VAULT. This would allow for withdrawal authorization to be committed at deposit time and prevent cheeky opcodes from being prepended to the script at spend time. The benefits of this implementation include avoiding nested and recursive script execution, making the spec easier to reason about, and reducing general indirection. Additionally, using CTV (CheckTemplateVerify) solves issues with the existing proposal's txid malleability. The required opcodes for this implementation include OP_VAULT, OP_VAULT_RECOVER, and OP_CHECKTEMPLATEVERIFY. To create an initial deposit, vaulted coins are spent to an output with the taproot structure that includes $recovery_leaf and $trigger_leaf. To trigger a withdrawal request, an output of the same form is spent with a witness that contains the Taproot control block pointing to $trigger_leaf and indicating the trigger output, which must abide by certain rules. The output structure for withdrawal includes $recovery_leaf and $expr_withdraw. The validation rules are essentially unchanged from the existing proposal, and all batching and fee management characteristics remain the same. Finally, recovery can happen from any of the above outputs using the $recovery_leaf script path in a way similar to the existing OP_VAULT proposal.</p>
    <hr>
    <p><i> Updated on: 2023-06-16T15:33:28.287596+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>