<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>New transaction policies (nVersion=3) for contracting protocols <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/June_2023/021780_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Greg Sanders 2023-06-21 20:57:45+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Sept_2022/020943_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Gloria Zhao 2022-09-26 16:47:49+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Sept_2022/020950_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Bastien TEINTURIER 2022-09-29 09:15:02+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Sept_2022/020937_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Gloria Zhao 2022-09-23 15:18:21+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Sept_2022/020959_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Bastien TEINTURIER 2022-09-30 12:08:41+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Sept_2022/020960_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Greg Sanders 2022-09-30 12:17:38+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Sept_2022/020941_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Bastien TEINTURIER 2022-09-26 15:27:40+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Sept_2022/020938_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Greg Sanders 2022-09-23 18:48:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Sept_2022/020942_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Greg Sanders 2022-09-26 16:01:54+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Sept_2022/020957_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Ruben Somsen 2022-09-30 00:13:53+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Sept_2022/020951_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Greg Sanders 2022-09-29 14:41:28+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Sept_2022/020939_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Antoine Riard 2022-09-25 23:59:22+00:00</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2022/020962_New-transaction-policies-nVersion-3-for-contracting-protocols.html">New transaction policies (nVersion=3) for contracting protocols</a>
                        <b>Ruben Somsen 2022-10-01 09:59:55+00:00</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-June/021780.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2023-06-21T20:57:45+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>Recently, the Bitcoin development team has proposed a set of mempool and transaction relay policies called BIP-325 to assist Layer 2/contract protocols. The proposal includes introducing version 3 transactions (V3) and modifying package RBF rules.The proposed policies aim to solve Rule 3 pinning and potentially eliminate CPFP carve-out. For V3 transactions, the existing standardness rules apply, but there are additional rules. Firstly, a V3 transaction can be replaced even if it does not signal BIP125 replaceability. This allows for inherited replaceability signaling when descendants of unconfirmed transactions are created. Secondly, any descendant of an unconfirmed V3 transaction must also be V3, ensuring consistency in signaling and making it easier to check descendant limits. However, a confirmed V3 transaction does not require its descendants to be V3.The proposal also limits the number of descendants and the size of V3 transactions. An unconfirmed V3 transaction cannot have more than one descendant, preventing a pinning attack where malicious actors prevent fee-bumping by adding many non-fee-bumping descendant transactions. The limit is set to allow for at least one descendant to enable CPFP of the presigned transaction. Furthermore, a V3 transaction with an unconfirmed V3 ancestor cannot exceed 1000 virtual bytes in size. This limit ensures that the cost to replace a V3 transaction has lower variance and allows for fee-bumping without requiring a carefully-managed UTXO pool. The limit of 1000 virtual bytes allows for 6-15 UTXOs, which should be sufficient to fund a fee-bump.Regarding package RBF modifications, the rule around unconfirmed inputs states that a package may include new unconfirmed inputs, but the ancestor feerate of the child must be at least as high as the ancestor feerate of the package. This ensures that added inputs do not decrease the overall feerate.The proposal also addresses the usage of commitment transactions in the Lightning Network. It suggests that commitment transactions should be V3 and have one anchor output. These transactions can be signed with zero fees or 1sat/vbyte once package relay is deployed on a significant portion of the network. If the commitment transaction needs to be broadcasted, the desired feerate can be determined at broadcast time, and the anchor output can be spent in a high feerate transaction. The child transaction must also be V3 and limited to a size of 1000vB. These changes are intended to make fee-bumping more efficient and minimize costs.The Bitcoin development team has answered some expected questions about this policy. It is clarified that the V3 descendant limit restricts both the user and the counterparty, providing a solution to Rule 3 Pinning. Additionally, concerns about privacy issues and fingerprinting LN transactions based on nVersion are addressed. It is mentioned that V3 transactions may not be widely used outside of L2, so the impact on privacy is limited. It is also confirmed that a V3 transaction that does not signal BIP125 replaceability is replaceable. Furthermore, it is noted that a V2 transaction can replace a V3 transaction and vice versa, as long as the original V3 transaction does not have an unconfirmed V3 parent.Overall, the proposed mempool and transaction relay policies aim to enhance the replace-by-fee feature and improve the efficiency of fee-bumping transactions. Feedback and review from the Bitcoin community are encouraged to further refine and optimize these policies.Bitcoin developer Gloria Zhao has proposed a new version of transaction format, V3, aimed at improving replace-by-fee (RBF) and child-pays-for-parent (CPFP) protocols. The proposal includes four rules that specify limits on the size and number of "descendant" transactions, or those that rely on an unconfirmed parent transaction for funding. One of the key changes is that a V3 transaction cannot change based on what transactions are mined, which simplifies subsequent rules about descendant limits much easier to check.Unconfirmed V3 transactions cannot have more than one descendant. A V3 transaction that has an unconfirmed V3 ancestor cannot be larger than 1000 virtual bytes. Commitment transactions should also be V3 and have one anchor output. The proposal aims to prevent pinning attacks where a malicious counterparty prevents a transaction from being replaced by adding many descendant transactions that aren't fee-bumping. The smaller the descendant size limit, the fewer UTXOs a child may use to fund this fee-bump. However, as the fee-bumping child only needs to fund fees, just a few UTXOs should suffice. With a limit of 1000 virtual bytes, depending on the output types, the child can have 6-15 UTXOs, which should be enough to fund a fee-bump without requiring a carefully-managed UTXO pool.Package RBF modifications have also been suggested.</p>
        <hr>
        <p><i>Updated on: 2023-07-13T02:38:04.562873+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>