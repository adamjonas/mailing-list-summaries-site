<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Question on creating test cases for block.CheckBlock() <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/July_2014/006331_Question-on-creating-test-cases-for-block-CheckBlock-.xml.html">Question on creating test cases for block.CheckBlock()</a>
                        <b>Sergio Lerner 2014-07-21 17:30:34</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/July_2014/006331_Question-on-creating-test-cases-for-block-CheckBlock-.xml.html">Question on creating test cases for block.CheckBlock()</a>
                        <b>Sergio Lerner 2014-07-21 17:30:34</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/July_2014/006334_Question-on-creating-test-cases-for-block-CheckBlock-.xml.html">Question on creating test cases for block.CheckBlock()</a>
                        <b>Mike Hearn 2014-07-22 11:13:50</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/July_2014/006334_Question-on-creating-test-cases-for-block-CheckBlock-.xml.html">Question on creating test cases for block.CheckBlock()</a>
                        <b>Mike Hearn 2014-07-22 11:13:50</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/July_2014/006334_Question-on-creating-test-cases-for-block-CheckBlock-.xml.html">Question on creating test cases for block.CheckBlock()</a>
                        <b>Mike Hearn 2014-07-22 11:13:50</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/July_2014/006331_Question-on-creating-test-cases-for-block-CheckBlock-.xml.html">Question on creating test cases for block.CheckBlock()</a>
                        <b>Sergio Lerner 2014-07-21 17:30:34</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2014-July/006331.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2014-07-21T17:30:34+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>The author is working on a BIP that requires modification of the block acceptance rules and has two ways of testing it. They can either mine blocks on the testnet or create test cases for Bitcoin Core. The author wants to create test cases for block.CheckBlock() by verifying 100 dynamically generated blocks. However, they are unsure about the state of the blockchain when a test case is executed, as well as which network it is configured for (regtest, testnet3, or mainnet) and what blocks are in the blockchain. The checkblock_tests.cpp is the only test case for CheckBlock(), but it assumes that the mainnet is configured. Therefore, the author needs to use regtest so they can create blocks of difficulty 1. Currently, there is no infrastructure for writing blockchain unit tests, but the pull tester has been extended as a solution to this problem.The pull tester is a bitcoinj based app called BitcoindComparisonTool that builds a regtest chain and submits it to a local regtest node. It tests reorgs and various rules by speaking to the node only via P2P. However, verifying your BIP depends on how easy it is to do so via P2P. Additionally, the code needs cleaning up, as there is a lot of copy/paste coding going on in there.In an email thread from July 21, 2014, Sergio Lerner discusses two ways of testing a BIP that involves modifying the block acceptance rules. The two ways are mining blocks on the testnet and creating test cases for Bitcoin Core. Lerner wants to create test cases for block.CheckBlock(), which involves verifying 100 dynamically generated blocks. However, he is unsure about the state of the blockchain when a test case is executed and what blocks are in the blockchain. The checkblock_tests.cpp seems to be the only test case for CheckBlock() and assumes the mainnet is configured. Lerner needs to use the regtest to create blocks of difficulty 1.</p>
        <hr>
        <p><i>Updated on: 2023-06-09T01:28:13.998443+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>