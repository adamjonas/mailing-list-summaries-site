<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Request for review/testing: headers-first synchronization in Bitcoin Core <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006724_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Pieter Wuille 2014-10-11 23:34:15</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006726_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Gregory Maxwell 2014-10-12 07:14:32</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006728_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Luke Dashjr 2014-10-12 09:44:21</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006735_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>21E14 2014-10-13 22:43:35</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006724_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Pieter Wuille 2014-10-11 23:34:15</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006725_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Aaron Voisine 2014-10-12 05:51:41</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006726_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Gregory Maxwell 2014-10-12 07:14:32</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006727_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Geir Harald Hansen 2014-10-12 08:41:29</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006729_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Wladimir 2014-10-12 09:52:31</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006735_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>21E14 2014-10-13 22:43:35</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006728_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Luke Dashjr 2014-10-12 09:44:21</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006729_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Wladimir 2014-10-12 09:52:31</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006731_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Jameson Lopp 2014-10-12 19:13:06</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006760_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Rebroad (sourceforge) 2014-10-16 05:05:58</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006725_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Aaron Voisine 2014-10-12 05:51:41</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006727_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Geir Harald Hansen 2014-10-12 08:41:29</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006760_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Rebroad (sourceforge) 2014-10-16 05:05:58</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006728_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Luke Dashjr 2014-10-12 09:44:21</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006730_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Geir Harald Hansen 2014-10-12 10:06:25</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006731_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Jameson Lopp 2014-10-12 19:13:06</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006760_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Rebroad (sourceforge) 2014-10-16 05:05:58</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006724_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Pieter Wuille 2014-10-11 23:34:15</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006730_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Geir Harald Hansen 2014-10-12 10:06:25</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006729_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Wladimir 2014-10-12 09:52:31</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006730_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Geir Harald Hansen 2014-10-12 10:06:25</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006731_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Jameson Lopp 2014-10-12 19:13:06</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006725_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Aaron Voisine 2014-10-12 05:51:41</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006726_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Gregory Maxwell 2014-10-12 07:14:32</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006727_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>Geir Harald Hansen 2014-10-12 08:41:29</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/Oct_2014/006735_Request-for-review-testing-headers-first-synchronization-in-Bitcoin-Core.html">Request for review/testing: headers-first synchronization in Bitcoin Core</a>
                        <b>21E14 2014-10-13 22:43:35</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2014-October/006724.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2014-10-11T23:34:15+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>A new synchronization method called headers-first synchronization has been developed for Bitcoin Core. This method changes the way the best chain is discovered, downloaded and verified and comes with several advantages such as faster sync on typical network connections, no more stalled downloads, robustness against unresponsive or slow peers, removing a class of DoS attacks related to peers feeding low-difficulty valid large blocks on a side branch, reducing the need for checkpoints in the code, no orphan blocks stored in memory anymore, reducing memory usage during sync and is a major step towards an SPV mode using the reference codebase. The method technically works by replacing the single-peer blocks download by a single-peer headers download and verification while simultaneously fetching blocks along the best known headers chain from all peers that are known to have the relevant blocks. There are some known issues such as very slow downloading at the very start of the sync due to limited number of blocks requested per peer simultaneously and blocks being stored on disk out of order which makes it incompatible with some tools or other programs. Additionally, the block index database will now hold headers for which no block is stored on disk, which earlier versions won't support. However, if fully synced, it may still be possible to go back to an earlier version.Pieter Wuille, a Bitcoin developer, announced on October 12, 2014 that orphan blocks will no longer be stored in memory which would reduce the amount of memory used during synchronization. In another email exchange between Aaron Voisine of breadwallet.com and Pieter Wuille, headers-first synchronization was discussed. This mode of operation changes the way the best chain is discovered, downloaded, and verified and has several advantages including parallel block downloading, no more stalled downloads, more robustness against unresponsive or slow peers, and reduces the need for checkpoints in the code. The code is available as a GitHub pull request and binaries can be found to test with.A developer named Edmund has made improvements to Pieter Wuille's headers-first synchronization pull request for Bitcoin Core. The code updates are available on Github and the branch is "sipa-headersfirst8-patches". Edmund has improved the code by tracking the block as it downloads and avoiding node stalling due to many blocks being added to the ActiveTip. Additionally, he has added code ready to adapt the window size for download and make it prefer downloading from faster nodes.Parallel block downloading was suggested by Pieter Wuille to improve syncing speed of Bitcoin's network. The benchmarking results show that syncing to 295,000 using this method takes only one hour and five minutes, which is significantly faster than the old code that took seven hours and wasn't even at 250,000. The target was chosen because after that point, ecdsa dominates, and the libsecp256k1 is six times faster, making more of a difference.Overall, headers-first synchronization is a significant step forward for Bitcoin Core, making it practical to run a full node part-time on a laptop again. While there are known issues that will need experimentation and improvement, this mode of operation has been around for years and has finally been refactored enough to support it. It would be interesting to see the statistics, not from a single node perspective but from the viewpoint of an Internet backbone provider.</p>
        <hr>
        <p><i>Updated on: 2023-06-09T03:07:07.396187+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>