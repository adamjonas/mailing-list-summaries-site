<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Optimized Header Sync</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Jim Posen 2018-04-03 05:34:39
            <br><i>Published on: 2018-04-03T05:34:39+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/April_2018/combined_Optimized-Header-Sync.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-April/015866.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The email thread discusses the use of nBits versus chain work as a short specifier in Bitcoin's consensus protocol. By using nBits, there is a 16% savings in the size of a checkpts message, but it requires checkpoints to be fetched at intervals of 2016 and is tightly coupled to a specific parameter in Bitcoin's consensus protocol. On the other hand, using total chain work instead of nBits is the right tradeoff and is worth the extra 1KB. The checkpoints message is only fetched once per peer per download from genesis, and subsequent catchups only fetch checkpoints from the locator fork point. Additionally, numbers on the space savings from the omission of nVersion were pulled. Three bits in the encoding indicator represent a value 1-7 of the distance in block height since another block with the same version. Looking at the current Bitcoin main chain, this is a table of the occurrences of these values. Given this information, it may be possible to consider only allocating 2 bits in the encoding header rather than 3. Finally, the email suggests that checkpoints and compressed headers streams should be handled in chunks of 2016 headers and queried by chunk number instead of height, falling back to current method if the chunk is not full yet for cache-friendly purposes.</p>
    <hr>
    <p><i> Updated on: 2023-06-13T01:13:06.137358+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>