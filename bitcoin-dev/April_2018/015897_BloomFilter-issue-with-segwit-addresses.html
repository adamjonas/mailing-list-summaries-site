<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>BloomFilter issue with segwit addresses</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Luke Dashjr 2018-04-13 22:52:23
            <br><i>Published on: 2018-04-13T22:52:23+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/April_2018/combined_BloomFilter-issue-with-segwit-addresses.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-April/015897.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>A compatibility issue between SegWit and BIP37 (Bloom Filtering) has been brought to light by Anton, a developer on the bitcoinj mailing list. The issue affects only P2WPKH and the special case of transactions without change outputs. In this case, neither inputs nor outputs contain any data elements that would cause a match for the filter. The public key, which would match, goes to the witness but not to the input. OP_RETURN output with a matching public key is suggested as a workaround in such transactions. Bitcoin Core has been asked to extend the BIP37 matching rules such that data elements in the witness are also matched against. Bitcoin Knots supports the MSG_FILTERED_WITNESS_BLOCK extension to download witness data while BIP158 is still being implemented and deployed. However, light clients currently have no way to verify the witness data is correct. It is suggested to look for specific COutPoints for matching, which should work already with standard BIP37.  It is understood that the plan is to deprecate and remove BIP37 entirely once BIP158 is implemented and deployed.</p>
    <hr>
    <p><i> Updated on: 2023-06-13T01:32:17.677050+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>