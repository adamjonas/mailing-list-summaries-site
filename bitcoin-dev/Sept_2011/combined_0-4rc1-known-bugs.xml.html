<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>0.4rc1 known bugs <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
    <ul>
        
        
        <li>
        <a href="/bitcoin-dev/Sept_2011/000463_0-4rc1-known-bugs.xml.html">0.4rc1 known bugs</a>
        <b>Pieter Wuille 2011-09-06 11:55:30</b>
        </li>
        
        <li>
        <a href="/bitcoin-dev/Sept_2011/000447_0-4rc1-known-bugs.xml.html">0.4rc1 known bugs</a>
        <b>Matt Corallo 2011-09-04 02:43:48</b>
        </li>
        

        
    </ul>
    
        <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2011-September/000463.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
    
    <p><i>Published on: 2011-09-06T11:55:30+00:00</i></p>
    <hr>
    <h3> Summary:</h3>
    <p>On September 4th, 2011, Pieter Wuille compiled bitcoind with Gavin's DEBUG_LOCKORDER and fixed two potential reported deadlock issues. However, he later realized that there were no actual potential deadlocks as all locking of cs_vRecv/cs_vSend happened inside TRY_CRITICAL_SECTION blocks. He suggested to Gavin to add the rule to his debug code which ignored critical sections only locked through TRY_...?. In addition to this, Sipa found what looked like a deadlock between the addr-handling and IRC-join-handling code. Regarding the actual deadlock between IRC seeding and AddAddress, internally DB also used pthreads to implement the txn_begin()/commit() scheme. While processing "addr," a db transaction was created for the entire message while only locking cs_mapAddresses inside AddAddress. For the IRC seeded addresses, however, no db tx was pre-created, and AddAddress first locked cs_mapAddress, and then did the database write causing a lock inside. To solve this issue, a CRITICAL_BLOCK was added in main.cpp under ProcessMessage, case "addr". Furthermore, on September 3rd, 2011, Gavin Andresen provided a status update on 0.4 and reported that he probably won't have time to tackle the deadlock problems before Tuesday. UukGoblin also reported a deadlock problem on a bitcoind handling getwork requests. Gavin suggested that if someone wanted to become more familiar with the bitcoin code and had patience, tracking down deadlocks is a great way to do it. Lastly, ArtForz found a performance bug with transactions that had thousands of inputs and outputs on the solidcoin test network.</p>
    <hr>
    <p><i> Updated on: 2023-05-19T00:57:37.372897+00:00 </i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>