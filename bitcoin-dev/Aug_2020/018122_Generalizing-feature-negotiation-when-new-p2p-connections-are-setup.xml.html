<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Generalizing feature negotiation when new p2p connections are setup</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Jeremy 2020-08-21 19:50:21
            <br><i>Published on: 2020-08-21T19:50:21+00:00</i></p>

        
        

        
        
        <li>
        <a href="/bitcoin-dev/Aug_2020/combined_Generalizing-feature-negotiation-when-new-p2p-connections-are-setup.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2020-August/018122.html">Click here to read original discussion on the bitcoin-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The proposal is to replace VERACK with HANDSHAKEACK after feature negotiation in Protocol >= 70016. This change should make it clear that more than just the version is being acked. The sequencing of messages has minimal impact, but it is suggested that verack come before feature negotiation to divorce the idea that protocol number and feature support are tied. Once this change is made, Verack can be replaced with HANDSHAKENACK or HANDSHAKEACK to signal success or failure to agree on a connection. AJ suggests using a FEATURE wrapper for all messages during this period, which would allow for a semantic for ACKing that a feature is enabled. This would clarify whether a node ignored a feature because it's unknown or disabled. It is proposed that a message called SYNC be added, indicating the end of a list of features and a request to send ACKs or NACKs back. This allows for multi-round negotiation where the set of features offered may be expanded based on the presence of other features. This multi-round negotiation makes it an actual negotiation rather than a pure announcement system. Although it may not be used much in the near term, it makes sense to define it correctly now and build for the future.</p>
    <hr>
    <p><i> Updated on: 2023-06-14T15:04:17.841190+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>