<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Two questions about segwit implementation <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016982_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Aymeric Vitte 2019-05-25 23:56:48</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016987_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Johnson Lau 2019-05-26 17:24:13</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016989_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Pieter Wuille 2019-05-26 17:54:08</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016986_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Johnson Lau 2019-05-26 16:28:57</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016988_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Aymeric Vitte 2019-05-26 16:18:46</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016991_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Thomas Kerin 2019-05-26 19:34:55</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016982_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Aymeric Vitte 2019-05-25 23:56:48</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016986_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Johnson Lau 2019-05-26 16:28:57</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016990_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Aymeric Vitte 2019-05-26 17:09:31</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016985_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Johnson Lau 2019-05-26 14:33:06</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016986_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Johnson Lau 2019-05-26 16:28:57</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016993_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Kostas Karasavvas 2019-05-27 07:26:21</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016987_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Johnson Lau 2019-05-26 17:24:13</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016990_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Aymeric Vitte 2019-05-26 17:09:31</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016987_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Johnson Lau 2019-05-26 17:24:13</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016989_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Pieter Wuille 2019-05-26 17:54:08</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016988_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Aymeric Vitte 2019-05-26 16:18:46</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016990_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Aymeric Vitte 2019-05-26 17:09:31</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016991_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Thomas Kerin 2019-05-26 19:34:55</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016992_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Aymeric Vitte 2019-05-26 21:17:30</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016982_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Aymeric Vitte 2019-05-25 23:56:48</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016985_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Johnson Lau 2019-05-26 14:33:06</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016989_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Pieter Wuille 2019-05-26 17:54:08</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016992_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Aymeric Vitte 2019-05-26 21:17:30</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016993_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Kostas Karasavvas 2019-05-27 07:26:21</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016985_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Johnson Lau 2019-05-26 14:33:06</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016988_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Aymeric Vitte 2019-05-26 16:18:46</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016991_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Thomas Kerin 2019-05-26 19:34:55</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016992_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Aymeric Vitte 2019-05-26 21:17:30</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/May_2019/016993_Two-questions-about-segwit-implementation.html">Two questions about segwit implementation</a>
                        <b>Kostas Karasavvas 2019-05-27 07:26:21</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2019-May/016982.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2019-05-25T23:56:48+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>In a recent discussion on the Bitcoin development mailing list, there was clarification on the implementation of segwit-enabled inputs in transactions. The author had realized that their segwit implementation was incorrect due to a misunderstanding of the specifications and had two questions. First, why is OP_0 represented as 00 in witness data instead of 0100? Second, for non-segwit inputs, why is there a 00 length in segwit data and what is the rationale for that? Johnson Lau clarified that an empty scriptSig does not necessarily imply a segwit input and can still be spent with an empty scriptSig if the previous scriptPubKey is OP_1, which does not allow witness. Similarly, Aymeric Vitte suggested that the transaction creator can parse the transaction and associate the correct input to the correct witness data without using "00" for non-segwit inputs. However, upon further reflection, he realized that if the validator sees an empty or witness script in scriptSig, then this is a segwit input. By doing this one-by-one, the validator can associate the correct segwit data to the correct segwit input, making the use of "00" unnecessary.The lack of clear documentation on this topic is noted as a concern. The discussion sheds light on the nuances of implementing segwit and highlights some misconceptions regarding its implementation. Regarding the representation of OP_0 as 00 in witness data, Johnson Lau explains that the witness is not script and provides a detailed explanation of how it works for each input. The "00" element signifies zero size and creates an empty element on the stack. For non-segwit inputs, the "00" indicates that the input has no witness stack element. This information is necessary because it is difficult to determine whether an input is segwit-enabled or not until you look up the UTXO, which may not always be available. The Bitcoin scriptSig populates the stack for opcode operations, while witnesses are similar to the script stack and are passed in as such. OP_0 pushes a zero-length value onto the stack, while OP_1 pushes 0x01, serialized as 0101. The witness structure can be considered as vector> and its length must equal the number of inputs. While Vitte questioned the need for "00" in non-segwit inputs, Lau emphasizes that validators have no way of knowing which inputs are segwit-enabled until they look up the UTXO set, so there needs to be a way to tell the validator that "the witness for this input is empty," and it is the "00". The discussion highlights some misconceptions regarding the implementation of segwit and sheds light on the nuances of its implementation.</p>
        <hr>
        <p><i>Updated on: 2023-06-13T19:11:01.900361+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>