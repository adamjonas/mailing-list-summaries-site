<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Wallet related bug? <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/bitcoin-dev/June_2012/001628_Wallet-related-bug-.html">Wallet related bug?</a>
                        <b>grarpamp 2012-06-22 11:01:19</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2012/001629_Wallet-related-bug-.html">Wallet related bug?</a>
                        <b>grarpamp 2012-06-23 00:10:57</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2012/001629_Wallet-related-bug-.html">Wallet related bug?</a>
                        <b>grarpamp 2012-06-23 00:10:57</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2012/001628_Wallet-related-bug-.html">Wallet related bug?</a>
                        <b>grarpamp 2012-06-22 11:01:19</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2012/001629_Wallet-related-bug-.html">Wallet related bug?</a>
                        <b>grarpamp 2012-06-23 00:10:57</b>
                    </li>
                
                    <li>
                        <a href="/bitcoin-dev/June_2012/001628_Wallet-related-bug-.html">Wallet related bug?</a>
                        <b>grarpamp 2012-06-22 11:01:19</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2012-June/001628.html">Click here to read the original discussion on the bitcoin-dev mailing list</a>
        
        <p><i>Published on: 2012-06-22T11:01:19+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>The writer has identified a potential bug related to the order of operations when rescanning, upgrading wallets, and marking the last block. They encountered an issue when dropping an old wallet into a current blockchain and running it in rescan mode, receiving an old wallet version message. Upon rescanning the entire chain, some blockhashes, blocks out of range, and invalid/nonwallet txids were added to the wallet that were already present as legit ones in the old logs. In plain mode, the new wallet version was logged and the last 20k blocks were rescanned, which may have been the marker for the old wallet's last use. However, subsequent runs duplicated the second one without saying 'upgrading wallet' as it sometimes does. The writer always ran detach=1 and questions why the last 20k blocks need to be scanned every time if the whole chain was already done, suggesting that it should only happen once if not. Additionally, they suggest dumping the run params (bitcoin.conf, cmdline) to the log would be useful and not automatically truncating the log when big, but just appending or rolling it.The speaker had previously commented on their references to wallet version, which were actually in reference to nFileVersion. They have since been able to update both the nFileVersion and the real wallet version but still experience the wallet rescanning the last 14,000+ blocks every time it is invoked, which seems unnecessary. The speaker is unsure why this is happening more than once and plans to send the balance from their old wallets (version 10500) to a new wallet soon to avoid the issue.</p>
        <hr>
        <p><i>Updated on: 2023-06-06T05:55:10.582476+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>