<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>New BIP: Dealing with OP_IF and OP_NOTIF malleability in P2WSH <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/Sept_2016/000605_New-BIP-Dealing-with-OP-IF-and-OP-NOTIF-malleability-in-P2WSH.html">New BIP: Dealing with OP_IF and OP_NOTIF malleability in P2WSH</a>
                        <b>Rusty Russell 2016-09-05 01:32:19+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2016/000602_New-BIP-Dealing-with-OP-IF-and-OP-NOTIF-malleability-in-P2WSH.html">New BIP: Dealing with OP_IF and OP_NOTIF malleability in P2WSH</a>
                        <b>Johnson Lau 2016-09-01 11:39:51+00:00</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-September/000605.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2016-09-05T01:32:19+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>Johnson Lau, a user on the bitcoin-dev forum, has proposed a restriction for the segwit OP_IF argument as policy. He is looking for feedback from users of OP_IF, especially those who are using it in real-world applications like the Lightning network. Another user, Rusty, mentions that his current scripts use OP_IF and OP_NOTIF only after OP_EQUAL, except for one instance where they use OP_EQUAL...OP_EQUAL...OP_ADD OP_IF. However, he states that this does not have any impact on the c-lightning implementation.To address the malleability issue with OP_IF and OP_NOTIF in pay-to-witness-script-hash (P2WSH) scripts, a new BIP (Bitcoin Improvement Proposal) has been prepared. The proposed changes will only apply to P2WSH scripts described in BIP141, which has not yet been activated on the Bitcoin mainnet. In order to ensure that transactions using OP_IF and OP_NOTIF created before the introduction of this BIP will still be accepted by the network, the new rules will not be applied to non-segregated witness scripts.Under the new rules, in P2WSH, the argument for OP_IF and OP_NOTIF must be either an empty vector or 0x01. If the argument does not meet these criteria, the script evaluation fails immediately. This is considered a softfork on top of BIP141. The rules have been enforced as a relay policy by the reference client since the initial release of BIP141 (v0.13.1).There may be compatibility issues if your script uses the combination of "OP_SIZE OP_IF" or "OP_DEPTH OP_IF". To comply with this new policy/softfork, you will need to use "OP_SIZE OP_0NOTEQUAL OP_IF" or "OP_DEPTH OP_0NOTEQUAL OP_IF", or modify your scripts accordingly.For more in-depth discussions on this topic, you can refer to the following link: <a href="https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2016-August/013036.html">https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2016-August/013036.html</a>.</p>
        <hr>
        <p><i>Updated on: 2023-07-31T19:11:25.370884+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>