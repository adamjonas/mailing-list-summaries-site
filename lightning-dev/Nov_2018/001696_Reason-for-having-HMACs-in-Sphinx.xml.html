<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Reason for having HMACs in Sphinx</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Christian Decker 2018-11-29 17:13:29
            <br><i>Published on: 2018-11-29T17:13:29+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/Nov_2018/combined_Reason-for-having-HMACs-in-Sphinx.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-November/001696.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a Lightning-dev email thread, Christian Decker explains that HMACs are necessary in Sphinx to ensure that hops cannot modify the packet before forwarding it, without the next node detecting the modification. Christian suggests that an attacker could learn the path length by messing with different per-hop payloads, flipping bits until no error is returned. Adding HMACs solves this issue by ensuring that the next hop will return an error if anything was changed, removing the leak about which node would have failed the route. Corné Plooy asks why we need HMACs in Sphinx and what could go wrong if we didn't have them. He argues that receiving nodes do not know what the origin node is, and he doesn't see any attack mode where an attacker wouldn't be able to generate a valid HMAC. Corné thinks that the only real use case of the HMAC value is a 0-valued HMAC, indicating the end of the route, but he considers this "just silly" since it's essentially a boolean, not a cryptographic verification.</p>
    <hr>
    <p><i> Updated on: 2023-06-02T15:24:45.892609+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>