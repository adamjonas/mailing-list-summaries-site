<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>A Mobile Lightning User Goes to Pay a Mobile Lightning User...</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Matt Corallo 2021-10-13 04:44:21
            <br><i>Published on: 2021-10-13T04:44:21+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/Oct_2021/combined_A-Mobile-Lightning-User-Goes-to-Pay-a-Mobile-Lightning-User-.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-October/003307.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Lightning users on mobile devices face issues when trying to pay or receive payments from other lightning users on mobiles as it requires coordination to ensure that both parties are online at the same time. Though invoices help, some users still prefer to use lightning for tips or accept payments without keeping their phones unlocked and with the app open 24/7. There are a few solutions available but they have drawbacks. Blockstream Greenlight reduces resource requirements, keysend/AMP works for tips but has limitations, lnurl provides an invoice but doesn't help with payment receipt, trusted LSPs can accept payments and forward them later, and untrusted LSPs can send notifications.To solve this problem, a new model is proposed where the sender sends an HTLC with a long CLTV timeout to their own LSP with instructions saying "when you get an onion message telling you nonce B, forward this HTLC, until then, just sit on it". The Tipper sends an onion message to the recipient's LSP saying "hey, when the recipient is online again, use the included reply path to send nonce B to my LSP." When the Recipient comes online, their LSP sends the reply to the Tipper's LSP, causing the Tipper's LSP to forward the original HTLC that the Recipient receives. This solution does not encumber funds for any extended period of time except for the original sender, who wants to send the funds off elsewhere anyway. The lnurl model of a trusted party not reusing invoices so that the Recipient's LSP cannot steal all funds after the first claim sucks, and the PTLCs (Payment Pointers over Lightning Channels) solution is proposed where the sender always adds some random nonce to the PTLC they're paying and sends the recipient a random nonce in the onion. This makes it difficult for anyone to collude to steal the funds.</p>
    <hr>
    <p><i> Updated on: 2023-05-23T16:42:12.995423+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>