<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Decoy node_ids and short_channel_ids</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Bastien TEINTURIER 2020-02-04 14:50:26
            <br><i>Published on: 2020-02-04T14:50:26+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/Feb_2020/combined_Decoy-node-ids-and-short-channel-ids.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-February/002499.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In this email thread, Rusty Russell and Bastien Teinturier discuss the implementation of a feature that allows temporary node IDs to be used for private channels in Lightning Network. They explore the potential attack vectors associated with using temporary IDs, including the possibility of Mallory sending malformed payments to Alice using a transient key in an invoice to see if she decrypts it. Bastien proposes a solution to this by using payment_secret and decoy_key to derive a decoy_scid, which can protect against unknown_next_peer and improve privacy. However, he notes that Alice may need to share her decoy_node_ids with Bob, which would require more state management. Rusty suggests two uses for the temporary ID feature: always using a temporary ID to obscure the onchain footprint, or applying a new temporary ID and node ID for every invoice to add an extra layer of transience. However, implementing the latter securely is challenging, as it requires brute-forcing the onion against N keys and ensuring that all code paths return WIRE_INVALID_ONION_HMAC to prevent attacks from Mallory. Rusty suggests using the payment_hash as a fastpath to streamline the decryption process, but acknowledges that the code required for this is still complex.</p>
    <hr>
    <p><i> Updated on: 2023-06-02T22:44:08.787401+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>