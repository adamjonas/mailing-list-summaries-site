<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Dynamic Commitments Part 2: Taprooty Edition</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Olaoluwa Osuntokun 2022-03-24 22:52:42
            <br><i>Published on: 2022-03-24T22:52:42+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/March_2022/combined_Dynamic-Commitments-Part-2-Taprooty-Edition.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2022-March/003531.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The Lightning Network is considering upgrading channel types and eliminating hard coded limits by using dynamic commitments. The idea of upgrading existing channels to anchor output commitment variant was suggested two years ago to create a more resilient internal routing network. With taproot now active on mainnet, the concept can be used to upgrade all 80k+ public channels to taproot without any on-chain transactions. The dynamic commitments concept involves an "adaptor commitment" that upgrades to future segwit witness versions, enabling peers to collaboratively create a new adapter commitment that spends the old v0 multi-sig output and produces a new v1 multi-sig output. However, to implement this concept, a concrete protocol is needed for dynamic commitment updates. Last year, a spec PR was made outlining a way to upgrade the commitment type upon channel re-establish, but it doesn't allow both sides to adjust parameters like the number of HTLCs allowed.An alternative approach inspired by the Raft consensus protocol has been proposed, allowing upgrading nearly all channel/commitment related values and involving sending a new config to the leader who synchronizes the config change with other members of the cluster. Laolu, a Lightning Network developer, has proposed a protocol for updating commitments on-the-fly in the Lightning Network. The proposal suggests introducing two new messages, `commitment_update_propose` and `commitment_update_apply`, to allow either party to propose a commitment/channel parameter update, but only the initiator can apply it. The proposal aims to introduce flexibility by allowing floating some inflexible parameters like the 483 HTLC limit, which would enable peers to apply similar congestion avoidance algorithms used in TCP today. The proposal also allows for the extension of the message structure to add other things like tweaking the total number of max HTLCs, min/max HTLCs, etc.Ultimately, this proposal will help in upgrading the commitment type upon channel re-establish and introduce more flexibility in the Lightning Network.</p>
    <hr>
    <p><i> Updated on: 2023-05-23T17:31:46.244715+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>