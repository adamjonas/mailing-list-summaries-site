<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>A Proposal for Adding Bandwidth Metered Payment to Onion Messages</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Olaoluwa Osuntokun 2022-03-23 00:25:40
            <br><i>Published on: 2022-03-23T00:25:40+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/March_2022/combined_A-Proposal-for-Adding-Bandwidth-Metered-Payment-to-Onion-Messages.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2022-March/003525.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Laolu and Rusty engaged in an email conversation centered on the Lightning Network technology. They discussed various topics, such as AMP and keysend specifications, which pertained to payment splitting and control over pulling all funds. Additionally, Laolu and Rusty talked about using HTLCs for sending data and rate limiting events.Lightning Labs has proposed a way to expand the scope of the Lightning Network beyond being just a decentralized peer-to-peer payment system. This proposal involves onion messaging, which would allow for sending and receiving invoices directly over the existing Lightning Network. However, there are issues with unsolicited messages, lack of compensation for network bandwidth expended by forwarding nodes, and rate limiting policies not being concretely addressed.To address these issues, an explicit onion messaging session creation is introduced with an optional payment for nodes that forward the onion messages. Nodes can signal their willingness to be paid to forward onion messages and specify their pricing using two new TLVs added to the node_announcement message: sats_per_byte and sats_per_block. A new TLV is added to the existing HTLC onion blob that allows a sending node to tender paid onion message session creation. After session creation succeeds, nodes will forward onion messages that include the onion_session_id. Nodes do the necessary bookkeeping to tally how much bandwidth is left in the session and check that the session hasn't expired before forwarding.Laolu and Rusty also discussed the idea of charging for forwarding onion messages, which can be implemented on top of existing onion_messages. They made references to specific resources such as bLIP and BOLT tracker. Furthermore, they touched upon incentivizing nodes to reliably forward messages.</p>
    <hr>
    <p><i> Updated on: 2023-05-23T17:11:54.775014+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>