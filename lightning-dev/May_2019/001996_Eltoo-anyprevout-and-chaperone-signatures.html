<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Eltoo, anyprevout and chaperone signatures</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Anthony Towns 2019-05-16 15:37:48
            <br><i>Published on: 2019-05-16T15:37:48+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/May_2019/combined_Eltoo-anyprevout-and-chaperone-signatures.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-May/001996.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a discussion on the Bitcoin-dev mailing list, members were discussing the use of the collaborative path in Taproot. Christian Decker expressed concern that the collaborative path cannot be used with update_tx, as it needs to be signed with noinput and there is no way to specify the chaperone key since the committed script is not revealed. While Bastien Teinturier stated that he would look into previous discussions on the matter, the conversation also turned towards potential optimizations unlocked by taproot/tapscript.The topic then shifted to a series of eltoo scripts that were passed around privately for discussion. The scripts described an eltoo update transaction (UPDATE TX n), settlement transaction (SETTLEMENT TX n), and HTLC claim/refund transactions that utilized muSig. Each UPDATE TX involved revealing a 33-byte control block, 43-byte redeem script, 65-byte ANYPREVOUT signature, and 64-byte sighash all signature, which totaled to an extra 143 weight units or 35.75 virtual bytes compared to a 65-byte key path spend.The proposed UPDATE TX script was roughly "IF 2 Asi Bsi ELSE CLTV DROP 2 Au Bu ENDIF 2 OP_CHECKMULTISIG", which was estimated to be about 282 WU total or an extra 216 WU/54 vbytes over a 65 byte key path spend. The discussion also included a potential alternative approach that used SIGHASH_ALL key path spends for the common unilateral case where only a single UPDATE TX was published, but this required generating additional signatures.The conversation touched on various aspects of the proposed scripts, including combining multiple UPDATE TXs and SETTLEMENT TXs, adding fees, and calculating the private key using ECDH between peers to generate the seed. Overall, the scripts were considered more "thought bubble" than draft at the time of discussion.</p>
    <hr>
    <p><i> Updated on: 2023-05-23T02:04:02.705797+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>