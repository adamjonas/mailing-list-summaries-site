<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>PTLCs early draft specification <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003378_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>ZmnSCPxj 2021-12-07 00:08:24</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003380_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>ZmnSCPxj 2021-12-07 08:04:09</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003387_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Bastien TEINTURIER 2021-12-08 10:00:18</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003389_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Bastien TEINTURIER 2021-12-08 15:02:02</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003394_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Anthony Towns 2021-12-09 05:00:16</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003377_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Bastien TEINTURIER 2021-12-06 17:21:12</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003381_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Bastien TEINTURIER 2021-12-07 13:11:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003393_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Lloyd Fournier 2021-12-09 01:34:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003429_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Anthony Towns 2021-12-19 22:23:44</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003433_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Bastien TEINTURIER 2021-12-21 15:25:41</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003434_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Anthony Towns 2021-12-21 16:04:03</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003435_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Bastien TEINTURIER 2021-12-22 08:02:23</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003379_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Lloyd Fournier 2021-12-07 06:09:06</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003382_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>ZmnSCPxj 2021-12-07 23:52:04</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003385_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Bastien TEINTURIER 2021-12-08 08:40:35</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Dec_2021/003386_PTLCs-early-draft-specification.xml.html">PTLCs early draft specification</a>
                        <b>Anthony Towns 2021-12-08 09:28:53</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-December/003378.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2021-12-07T00:08:24+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>In a mailing list conversation, it was pointed out that the final message "Bob -> Alice: revoke_and_ack" is not necessary if Alice is only sending new transactions paying Bob. However, it's intended to cover all update messages, and if Alice is also including any `update_fulfill_htlc` or `update_fail_htlc` messages in the commitment, she's potentially gaining funds. Instead, an approach was suggested where each node can unilaterally send various messages that always update the state asynchronously and nodes can track the state by having a list of htlcs/ptlcs/balances, etc for state (n), and a list of unapplied update messages for themselves and the other party (a+1,...,a') and (b+1,...,b'), and apply them in order when constructing the new state (n+1) for a new commitment signing round.A proposal has been made to add an additional feature bit that allows a channel to forward PTLCs only, no HTLCs, which ensures that state information is bounded no matter how long the channel remains open or how many transactions travel over the channel. However, it leaves you at risk of losing funds if the other party never attempts to claim them, so it's not recommended.In a recent email exchange, concerns were raised about the "toxic waste" issue that arises with HTLCs in Bitcoin due to committing to the payment_hash directly inside the transaction scripts, which requires remembering all payment_hashes seen to recreate the scripts and spend the outputs even if they are revoked. Using revkey would prevent bumping the current remote commitment if it appears on-chain as the private revkey is not yet known for the latest commitment, but if someone else's commitment is being bumped, the remote_anchor they provided will be used instead of the local_anchor.In a discussion on Lightning-dev, it was stated that fast-forwards could be an alternative to updating the commitment transactions on the payment-forwarding path, but this creates a problem where previous adaptor signatures would be invalidated, even if the B->A PTLC conditional on Y is within a fast-forward child-transaction. The author suggests doing a synchronous update of commitments to the channel state, reducing latency when forwarding by reducing the 2 round-trip protocol to update the state commitment to a 0.5 round-trip update.</p>
        <hr>
        <p><i>Updated on: 2023-06-03T06:47:36.892905+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>