<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Split payments within one LN invoice</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> ZmnSCPxj 2021-12-18 00:22:56
            <br><i>Published on: 2021-12-18T00:22:56+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/Dec_2021/combined_Split-payments-within-one-LN-invoice.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-December/003426.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The context describes a method for splitting payments between multiple parties using the C-Lightning plugin. Only N-1 payees need the plugin, with the last payee issuing a normal invoice. The previous payee then uses the plugin to emit a new invoice and this continues until the first payee is reached. In the case of A paying B and C, C issues a normal invoice, which is then handed over to B. B receives the invoice and issues a plugin-provided command, adding to the invoice before it is handed over to A. Ronan pays the invoice without needing the plugin. In another example, if Ronan paid cdecker, jb55, and ZmnSCPxj, ZmnSCPxj would issue a normal invoice and hand it over to jb55. jb55 would then use a plugin-provided command to create a larger invoice, which is then handed over to cdecker. cdecker uses a similar command to create an even larger invoice, which is finally handed over to Ronan, who pays the invoice without needing the plugin. The context also discusses creating a `signfakeinvoice` command in the lightningd hsmd interface. This would allow for signing invoices without the preimage, but since the HSM might be replaced with an actual hardware signing module in the future, the plugin cannot rely on `hsm_secret` existing. Instead, a plugin could read `getsharedsecret` to consider a future where the HSM is truly a hardware module.</p>
    <hr>
    <p><i> Updated on: 2023-06-03T06:58:00.765724+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>