<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>SIGHASH_SINGLE + update_fee Considered Harmful <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/Nov_2020/002882_SIGHASH-SINGLE-update-fee-Considered-Harmful.html">SIGHASH_SINGLE + update_fee Considered Harmful</a>
                        <b>Johan Torås Halseth 2020-11-23 15:11:52+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2020/002800_SIGHASH-SINGLE-update-fee-Considered-Harmful.html">SIGHASH_SINGLE + update_fee Considered Harmful</a>
                        <b>Antoine Riard 2020-09-13 23:29:59+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2020/002799_SIGHASH-SINGLE-update-fee-Considered-Harmful.html">SIGHASH_SINGLE + update_fee Considered Harmful</a>
                        <b>Antoine Riard 2020-09-13 23:28:51+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2020/002798_SIGHASH-SINGLE-update-fee-Considered-Harmful.html">SIGHASH_SINGLE + update_fee Considered Harmful</a>
                        <b>Johan Torås Halseth 2020-09-11 08:15:30+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2020/002797_SIGHASH-SINGLE-update-fee-Considered-Harmful.html">SIGHASH_SINGLE + update_fee Considered Harmful</a>
                        <b>Olaoluwa Osuntokun 2020-09-10 18:13:03+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2020/002796_SIGHASH-SINGLE-update-fee-Considered-Harmful.html">SIGHASH_SINGLE + update_fee Considered Harmful</a>
                        <b>Antoine Riard 2020-09-10 16:27:37+00:00</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-November/002882.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2020-11-23T15:11:52+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>The Lightning Network's anchor output specification update introduced a potential vulnerability related to the new usage of SIGHASH_SINGLE for HTLC transactions. This vulnerability allows a malicious party to inflate fees committed on HTLC input/output pairs and redirect the inflated fee to a single-controlled output. An example given in the context shows how Alice gained 125600 sats through the exploitation of this vulnerability.To mitigate this vulnerability, several countermeasures can be taken. One approach is to tighten channel policies by further limiting the number of accepted HTLCs or restricting the acceptance of `update_fee` requests. Another suggestion is to adopt a scorched earth approach with Justice transactions, where their feerate is bound to the maximum value. This increases the odds of winning the feerate race and deters attackers. However, this approach introduces a griefing attack vector where the counterparty can burn more fees than the victim punishes its revoked balance.In conclusion, there is a need to address the vulnerability in the Lightning Network's anchor output spec update. Possible solutions include tightening channel policies, adopting a scorched earth approach with Justice transactions, or patching the current anchor specification to remove the application of `feerate_per_kw` on 2nd-stage transactions. Further discussions and thoughts on countermeasures are welcomed.It is worth noting that in lnd, anchors are currently behind a build flag, but the plan is to enable them by default for their upcoming 0.12 release.</p>
        <hr>
        <p><i>Updated on: 2023-07-31T23:03:11.099149+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>