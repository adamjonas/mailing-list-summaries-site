<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Onion routing design. <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/Sept_2015/000198_Onion-routing-design-.xml.html">Onion routing design.</a>
                        <b>Rusty Russell 2015-09-20 21:05:58</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2015/000191_Onion-routing-design-.xml.html">Onion routing design.</a>
                        <b>Rusty Russell 2015-09-18 23:39:44</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2015/000193_Onion-routing-design-.xml.html">Onion routing design.</a>
                        <b>Anthony Towns 2015-09-19 01:27:16</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2015/000205_Onion-routing-design-.xml.html">Onion routing design.</a>
                        <b>Anthony Towns 2015-09-22 05:25:44</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2015/000208_Onion-routing-design-.xml.html">Onion routing design.</a>
                        <b>Rusty Russell 2015-09-22 10:38:08</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2015/000194_Onion-routing-design-.xml.html">Onion routing design.</a>
                        <b>Anthony Towns 2015-09-19 01:44:18</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2015/000196_Onion-routing-design-.xml.html">Onion routing design.</a>
                        <b>Rusty Russell 2015-09-20 20:48:37</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2015/000204_Onion-routing-design-.xml.html">Onion routing design.</a>
                        <b>Anthony Towns 2015-09-22 01:22:57</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2015/000207_Onion-routing-design-.xml.html">Onion routing design.</a>
                        <b>Zooko Wilcox-OHearn 2015-09-22 01:27:03</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2015-September/000198.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2015-09-20T21:05:58+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>The conversation revolves around the vulnerabilities in the Lightning Network and the methods used to protect transaction routes from being guessed and exploited. Nodes create a route backward to calculate size and randomly pick a total size between 1024 and 4096, padding it with at least 32 bytes of random padding to offer protection from guessing the route length. However, there is potential vulnerability due to the lack of MAC, which could enable a nosy node to replace routing entirely, leading to a successful or failed HTLC.Several defenses are proposed, such as disallowing two HTLCs with the same R value, forcing probe serialization, and probabilistic backoff for duplicate R values. However, these solutions may not work for more sophisticated probe sequences. One solution suggested is having two R values, one known only by the recipient and one by the sender, making the HTLCs payable on presentation of both R and S and including S encrypted to the final recipient in the onion payload.Another issue discussed is that nodes should not leak information to passive observers on the route due to errors. To prevent information leakage, signing errors and using the 'sum' field as a secret key seems sensible. The format of a route for onion routing was also discussed by Rusty Russell in terms of requirements and desiderata.Although onion routing provides limited protection against correlating HTLCs by R value, it is suggested that the format of a route should be something like required bytes hop_key; encrypted with a public key and required bytes route; encrypted with hop_key. OFB or CTR mode for the symmetric cipher can be used to calculate D_KD() of all the padding and work out the hash H of the plaintext message. CBC mode cannot be used because they need to know E_KD(grbg) to know D_KD(padding), but they need to know grbg to know H, and they need to know E_KD(H + ...) to work out E_KD(grbg). They cannot use sum for Kx because they need to know Kx before working out the sum.The conversation also touches upon the vulnerability of the Tor network to probing attacks that reveal the length of the chain. In summary, the conversation discusses various solutions to the vulnerabilities in the Lightning Network, including adding padding, disallowing duplicate R values, and having two R values, among others. The conversation also highlights the need for confidential transactions to maintain financial privacy.</p>
        <hr>
        <p><i>Updated on: 2023-06-01T23:46:58.751258+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>