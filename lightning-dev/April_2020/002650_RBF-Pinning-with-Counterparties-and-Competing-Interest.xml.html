<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>RBF Pinning with Counterparties and Competing Interest</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> David A. Harding 2020-04-22 18:24:54
            <br><i>Published on: 2020-04-22T18:24:54+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/April_2020/combined_RBF-Pinning-with-Counterparties-and-Competing-Interest.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-April/002650.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>On the Lightning-dev mailing list, Matt Corallo raised a concern where a lightning counterparty could potentially spend an HTLC using the preimage with a low-fee, RBF-disabled transaction. If Bob broadcasts the commitment transaction, A could claim the HTLC from B via the timeout mechanism, leaving B short the HTLC value. The main issue appears to be that Bob may broadcast a transaction without realizing it conflicts with a pinned transaction already in most nodes' mempools. To address this, Dave suggested re-implementing something like a BIP61 reject message with an extension that returns the txids of any conflicts. When Bob connects to a bunch of Bitcoin nodes and sends his conflicting transaction, the nodes would reply with a message containing the conflicting txid. Bob could then use this information to parse out the preimage and resolve the HTLC. This approach may not be perfect due to the unreliability of reject messages causing BIP61 to be disabled in Bitcoin Core. However, if Bob had at least one honest peer with the pinned transaction in its mempool and which implemented reject-with-conflicting-txid, he might be okay.</p>
    <hr>
    <p><i> Updated on: 2023-06-03T00:53:32.879850+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>