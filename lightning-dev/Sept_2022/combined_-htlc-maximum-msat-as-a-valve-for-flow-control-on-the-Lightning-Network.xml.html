<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>`htlc_maximum_msat` as a valve for flow control on the Lightning Network <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/Sept_2022/003690_-htlc-maximum-msat-as-a-valve-for-flow-control-on-the-Lightning-Network.xml.html">`htlc_maximum_msat` as a valve for flow control on the Lightning Network</a>
                        <b>Matt Corallo 2022-09-23 08:43:41</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2022/003697_-htlc-maximum-msat-as-a-valve-for-flow-control-on-the-Lightning-Network.xml.html">`htlc_maximum_msat` as a valve for flow control on the Lightning Network</a>
                        <b>ZmnSCPxj 2022-09-26 00:29:24</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2022/003698_-htlc-maximum-msat-as-a-valve-for-flow-control-on-the-Lightning-Network.xml.html">`htlc_maximum_msat` as a valve for flow control on the Lightning Network</a>
                        <b>ZmnSCPxj 2022-09-26 01:26:57</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2022/003702_-htlc-maximum-msat-as-a-valve-for-flow-control-on-the-Lightning-Network.xml.html">`htlc_maximum_msat` as a valve for flow control on the Lightning Network</a>
                        <b>ZmnSCPxj 2022-09-27 00:23:38</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2022/003703_-htlc-maximum-msat-as-a-valve-for-flow-control-on-the-Lightning-Network.xml.html">`htlc_maximum_msat` as a valve for flow control on the Lightning Network</a>
                        <b>ZmnSCPxj 2022-09-28 02:07:51</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2022/003686_-htlc-maximum-msat-as-a-valve-for-flow-control-on-the-Lightning-Network.xml.html">`htlc_maximum_msat` as a valve for flow control on the Lightning Network</a>
                        <b>René Pickhardt 2022-09-22 06:40:30</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2022/003706_-htlc-maximum-msat-as-a-valve-for-flow-control-on-the-Lightning-Network.xml.html">`htlc_maximum_msat` as a valve for flow control on the Lightning Network</a>
                        <b>Anthony Towns 2022-09-29 03:45:39</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2022/003691_-htlc-maximum-msat-as-a-valve-for-flow-control-on-the-Lightning-Network.xml.html">`htlc_maximum_msat` as a valve for flow control on the Lightning Network</a>
                        <b>René Pickhardt 2022-09-23 10:27:03</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2022/003695_-htlc-maximum-msat-as-a-valve-for-flow-control-on-the-Lightning-Network.xml.html">`htlc_maximum_msat` as a valve for flow control on the Lightning Network</a>
                        <b>Anthony Towns 2022-09-24 12:12:03</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2022/003701_-htlc-maximum-msat-as-a-valve-for-flow-control-on-the-Lightning-Network.xml.html">`htlc_maximum_msat` as a valve for flow control on the Lightning Network</a>
                        <b>Anthony Towns 2022-09-26 23:26:24</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2022/003704_-htlc-maximum-msat-as-a-valve-for-flow-control-on-the-Lightning-Network.xml.html">`htlc_maximum_msat` as a valve for flow control on the Lightning Network</a>
                        <b>Anthony Towns 2022-09-28 18:58:16</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Sept_2022/003705_-htlc-maximum-msat-as-a-valve-for-flow-control-on-the-Lightning-Network.xml.html">`htlc_maximum_msat` as a valve for flow control on the Lightning Network</a>
                        <b>ZmnSCPxj 2022-09-29 00:41:44</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2022-September/003690.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2022-09-23T08:43:41+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>René Pickhardt, a Lightning Network developer, proposed a mechanism to mitigate channel depletion through the use of `htlc_maxium_msat` as a control valve to regulate drain pressure. This proposal suggests that channels set their value so that payment flow is balanced on average, resulting in rare depletion and usually successful payments. It relies on senders paying higher fees for long-term benefits and depends on cooperation. The proposal has limitations regarding collecting forwarding fees, but it is better than the fee rate cards idea in several ways.In another forum, users discussed monetization and the undercutting of fees by CLBOSS, with the consensus being that the software should be modified to raise fees and preserve liquidity supply. The author discusses the challenges in creating a reliable forwarding node for Lightning Network payments while optimizing for low fees. One challenge is creating fake payment flows to rebalance channels requires reserving capital, which could become prohibitively capital intensive if there is high demand at X's fee rate along the path. Additionally, max_msat creates another challenge as forwarding nodes may split their rebalancing into quanta of N millisats.The Lightning Network is a payment protocol that operates on top of Bitcoin. The discussion revolves around the issue of unbalanced flow in Lightning Network. Forwarding nodes sell IPpvHg or liquidity, and if they run out of stock, they cannot forward against the balance, leading to no profit. A forwarding node's stock of IPpvHg can be depleted by "mostly a drain" peers, and the stock received from "mostly a source" peers is less valuable.In this context, there are three individuals - A, B, and Z - involved in the Lightning network. A and B have channels with each other and are collecting $0.90 in routing fees per day, while Z has a channel through which $10,000 is flowing from A to B, but his channel runs out after 5 days, at which point he has collected $200 and has to spend $200 rebalancing on-chain. Each person paying $5 to B pays $0.002045 in fees, while each person paying $1000 to A pays $0.01 in fees.To break even, Z must reduce his fee rate below 0.4% and increase his channel capacity above $50k. However, increasing the B->A channel flow would lead X and Y's flows to be unbalanced, causing payers to have to route more flow through Z. Therefore, it is necessary to have a mechanism to move funds outside of the Lightning network, so that every published node should have onchain/offchain swap capability. This will allow for better management of channels and reduce the risk of running out of funds.Additionally, ZmnSCPxj notes that rebalancing is a strategy used by forwarding nodes to buy cheaper liquidity and resell it at a higher price. However, this can occur at any time and may lead to channel saturation due to being cheaper by 0.0001%. In another conversation, participants debated the concept of "stock of liquidity" as a metaphor for the network's ability to handle transactions. The thread also touched on rebalancing channels and the issue of private information, as well as the proposal of an alternative to splicing.Another issue facing the Lightning Network is the disparity in fees paid by users due to routing issues and latency. To address this issue, one proposal is max_msat throttling which avoids channel depletion cases, but it has flaws and requires continuous payment flow/payment size curve. René Pickhardt proposes using `htlc_maximum_msat` as a control valve to regulate the pressure coming from drained channels and mitigate their depletion. He provides theoretical models and experimental algorithmic ideas for node operators to find decent `htlc_maximum_msat` values in a greedy fashion. In response to questions raised by Matt Corallo, René addresses the gossip overhead generated by this type of protocol and its privacy implications. Finally, the discussion highlights the importance of considering market forces while implementing any mechanism for throttling payment traffic.Overall, it is important to consider both on-chain and off-chain solutions when working with the Lightning Network.</p>
        <hr>
        <p><i>Updated on: 2023-06-04T04:07:57.758636+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>