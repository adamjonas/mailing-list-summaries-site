<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>[BOLT Draft] Onion Routing Spec</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Christian Decker 2016-08-08 12:27:39
            <br><i>Published on: 2016-08-08T12:27:39+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/Aug_2016/combined_-BOLT-Draft-Onion-Routing-Spec.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-August/000564.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In an email thread, Olaoluwa Osuntokun and other participants discuss various options for including payloads in the header HMAC. They prefer the first option which involves including payloads in the header HMAC computation because of its "fail fast" behavior and minimal overhead. The group also discusses anonymous rendezvous meetings and suggests using a version 0 packet to process the first two types of mix-header formats while a version 1 packet denotes a rendezvous packet. To prevent replay attacks, they propose including a timestamp rounded up to the closest hour in packets, with a sliding window of accepted timestamps of +/- 1 hour. The group weighs the trade-off between window size and storage overhead.The conversation concludes with a discussion on using the announced key as a root key for HD key derivation. They also discuss a proposed method for non-interactive key rotation in onion routing without compromising forward secrecy. This proposal involves using an HD Onion Key approach, authenticated via a signature of a schnorr multi-sign of the channel multi-sig key and the node's identity key. An intermediate onion derivation point is introduced to prevent compromise of the master root HD priv key. Each node pre-generates 365 keys to produce the final child onion key, then destroys the OD key to prevent an attacker from deriving the final child onion key.However, the group also discusses difficulties in enabling intermediate nodes to reply to a packet. One suggestion is to continue blinding the ephemeral key on the return path and sending a factor along with the header that tells each hop the current ephemeral key will be blinded by this factor. Unfortunately, this method was found to leak too much information about shared secrets or blinding factors.</p>
    <hr>
    <p><i> Updated on: 2023-05-24T00:03:14.788468+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>