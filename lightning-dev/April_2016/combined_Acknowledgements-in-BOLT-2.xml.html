<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Acknowledgements in BOLT #2 <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/April_2016/000510_Acknowledgements-in-BOLT-2.xml.html">Acknowledgements in BOLT #2</a>
                        <b>Joseph Poon 2016-04-01 19:38:50</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/March_2016/000506_Acknowledgements-in-BOLT-2.xml.html">Acknowledgements in BOLT #2</a>
                        <b>Rusty Russell 2016-03-31 23:49:26</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/April_2016/000508_Acknowledgements-in-BOLT-2.xml.html">Acknowledgements in BOLT #2</a>
                        <b>Fabrice Drouin 2016-04-01 14:57:37</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/April_2016/000507_Acknowledgements-in-BOLT-2.xml.html">Acknowledgements in BOLT #2</a>
                        <b>Pierre 2016-04-01 13:32:15</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/April_2016/000512_Acknowledgements-in-BOLT-2.xml.html">Acknowledgements in BOLT #2</a>
                        <b>Rusty Russell 2016-04-04 02:04:34</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-April/000510.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2016-04-01T19:38:50+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>In an email conversation between Pierre and the Lightning Network developers in April 2016, Joseph Poon explained that odd/even HTLC IDs were originally intended for debugging purposes, but he had been working on a cleaner solution. Rusty agreed with Pierre's concerns about the placement of acknowledgements in BOLT #2 and suggested moving the "ack" back into the update_commit/authenticate messages to avoid needing to write persistently to disk before every new packet sent.In a recent discussion, it was realized that HTLC IDs are not always sufficient, and the acknowledge field needs to be taken into account in some cases. This is because in certain scenarios, checking the 'acknowledge' field becomes necessary to prevent mismatches in expected signatures. The new absolute "lnd-like 64 bits unique id" introduced in Rusty is preferred over the previous relative "order-I-added-them-in" id to keep track of messages received and restart conversations after a reconnect.At the protocol level, only the HTLC id should be used instead of relying on the acknowledge field. However, at the transport level, the acknowledge field should still be relied upon to know which messages should be replayed. Although seemingly redundant, this approach separates the transport from the protocol, making testing easier. Additionally, the even/odd differentiation of HTLC ids is used to quickly determine the direction of a given HTLC and catch bugs. The latest spec leaves this open, but the current implementation uses a different number from other nodes, making it easier to eyeball.</p>
        <hr>
        <p><i>Updated on: 2023-06-02T00:31:00.202798+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>