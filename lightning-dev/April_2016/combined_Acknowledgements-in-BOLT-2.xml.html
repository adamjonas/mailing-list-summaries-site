<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Acknowledgements in BOLT #2 <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/April_2016/000507_Acknowledgements-in-BOLT-2.xml.html">Acknowledgements in BOLT #2</a>
                        <b>Pierre 2016-04-01 13:32:15</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/April_2016/000512_Acknowledgements-in-BOLT-2.xml.html">Acknowledgements in BOLT #2</a>
                        <b>Rusty Russell 2016-04-04 02:04:34</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/April_2016/000510_Acknowledgements-in-BOLT-2.xml.html">Acknowledgements in BOLT #2</a>
                        <b>Joseph Poon 2016-04-01 19:38:50</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/March_2016/000506_Acknowledgements-in-BOLT-2.xml.html">Acknowledgements in BOLT #2</a>
                        <b>Rusty Russell 2016-03-31 23:49:26</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/April_2016/000508_Acknowledgements-in-BOLT-2.xml.html">Acknowledgements in BOLT #2</a>
                        <b>Fabrice Drouin 2016-04-01 14:57:37</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-April/000507.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2016-04-01T13:32:15+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>The recent introduction of htlc ids in Rusty has led to discussions about the use of 64-bit unique identifiers for HTLCs instead of relative "order-I-added-them-in" ids. This change is necessary to distinguish between two HTLCs with the same R value and simplify the use of keypair-based contracts. The even/odd differentiation of htlc ids is used to quickly determine the direction of a given htlc, and this helps to catch bugs. At different levels, cases can be handled differently, but using the acknowledge field may not be optimal as it could lead to redundancy, while using the HTLC id at the protocol level would make more sense. At the transport level, the acknowledge field can still be relied upon to determine which messages should be replayed. Pierre had raised concerns about the placement of acknowledgements in BOLT #2, which Rusty agrees with and wants to document. In scenarios where A sends ADD HTLC X, ADD HTLC Y, ADD HTLC Z and B sends FAIL Y, then A sends SIG Z before receiving the last message from B, checking the 'acknowledge' field becomes necessary as it may close the channel without knowing if A received the "FAIL Y" message or not.</p>
        <hr>
        <p><i>Updated on: 2023-06-03T16:23:43.173862+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>