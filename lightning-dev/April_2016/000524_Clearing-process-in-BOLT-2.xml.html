<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Clearing process in BOLT #2</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Pierre 2016-04-29 11:38:53
            <br><i>Published on: 2016-04-29T11:38:53+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/April_2016/combined_Clearing-process-in-BOLT-2.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-April/000524.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The author of the message highlights concerns with the clearing process as described in BOLT #2. There seems to be a contradiction between ยง4.1, which states that a node must respond with update_fail_htlc to any HTLC received after it sent close_clearing, and ยง3.3, which outlines three reasons for removing an HTLC: timing out, failing to route, or supplying the R preimage. The author notes that in this version of the protocol, an HTLC can only be accepted, committed, then removed, and there is no way to decline an HTLC. Furthermore, the sender of a "close_clearing" message may receive an update_add_htlc message without knowing if the other party received the close_clearing prior to sending the HTLC since the update_add_htlc message lacks an 'ack' field. Similarly, there is potential uncertainty with the signature process, as when node A sends an update_commit message to B, there is no way for A to know if B received the update_commit if B keeps sending new HTLCs instead of responding with an update_revocation message.</p>
    <hr>
    <p><i> Updated on: 2023-05-23T23:31:02.068971+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>