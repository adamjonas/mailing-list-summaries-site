<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>BOLT3: Commitment Transaction Outputs is weak to malleability <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/Nov_2017/000809_BOLT3-Commitment-Transaction-Outputs-is-weak-to-malleability.xml.html">BOLT3: Commitment Transaction Outputs is weak to malleability</a>
                        <b>Nicolas Dorier 2017-11-29 07:40:13</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Nov_2017/000808_BOLT3-Commitment-Transaction-Outputs-is-weak-to-malleability.xml.html">BOLT3: Commitment Transaction Outputs is weak to malleability</a>
                        <b>Nicolas Dorier 2017-11-29 07:11:33</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Nov_2017/000810_BOLT3-Commitment-Transaction-Outputs-is-weak-to-malleability.xml.html">BOLT3: Commitment Transaction Outputs is weak to malleability</a>
                        <b>Olaoluwa Osuntokun 2017-11-29 09:22:22</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2017-November/000809.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2017-11-29T07:40:13+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>A vulnerability in the Commitment Transaction Output script has been identified that can be exploited to delay the confirmation of revocation, potentially having a negative impact on Lightning Network due to its reliance on time locks. This vulnerability can be exploited by an attacker by malleating OP_1 into a positive, huge number, filling the mempool with the malleated version and resulting in higher fees and delays. However, there is a policy rule called SCRIPT_VERIFY_MINIMALIF that was created by jl2012 and merged into v0.15.1, which fixes the issue without extensive development work and only has a 2-byte overhead. It is expected that enough miners will have adopted this version by the time Lightning Network is ready to prevent the vulnerability.Despite this fix, some people are still concerned about someone manipulating their transactions. To address this, Lnd plans to implement a scorched earth policy when responding to on-chain contract breach events. With this policy, once the justice transaction punishing the violator of the contract has been broadcast, for each block it doesn't confirm in, the fee on the transaction will gradually be bumped up using RBF. The additional fee would be drawn from the violator's settled balance in that state. Assuming rational miners accept the higher fee transaction and the violator isn't colluding with miners, the justice transaction will make it into the block before the transaction breaching the contract. To counteract this, the violator may try to use CPFP to anchor the transaction into the chain with a more attractive fee package. However, they must spend a total amount of fees greater than the current cumulative fee rate on the justice transaction to beat this strategy, which could result in them being net negative or failing to profit.Enabling RBF of the Penalty transaction so Eve's transaction would be replaced by the initial one is another way to fix the situation that does not require extensive development work. This approach was suggested by Nicolas Dorier, who had raised concerns over the vulnerability of the Commitment Transaction Output script to malleability. SCRIPT_VERIFY_MINIMALIF fixes this issue and was merged into v0.15.1 with a 2-byte overhead. Most upgraded nodes are running a bitcoind version >= 0.14 with segwit widely deployed, making it a safe assumption that most miners have already adopted the standard malleability reducing policy that shipped in that version.</p>
        <hr>
        <p><i>Updated on: 2023-06-02T01:30:33.214725+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>