<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Payment channel without timeout protected from malleability <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/Nov_2015/000360_Payment-channel-without-timeout-protected-from-malleability.xml.html">Payment channel without timeout protected from malleability</a>
                        <b>Anthony Towns 2015-11-27 20:11:13</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Nov_2015/000355_Payment-channel-without-timeout-protected-from-malleability.xml.html">Payment channel without timeout protected from malleability</a>
                        <b>Anthony Towns 2015-11-27 09:09:46</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2015-November/000360.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2015-11-27T20:11:13+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>In a forum post, Nicolas Dorier suggests a method to open a channel without suffering from malleability attack. By adapting an idea from gmaxwell, A can create the first commitment transaction for opening a channel with B. A then extracts the hash that B needs to sign to be able to broadcast the commitment and asks B to sign the hash, but does not disclose the commitment. After confirmation, A announces the anchor to B. A also passes the original unsigned commitment to B, who verifies that it's in the right format and hashes to the hash that he signed. B can't identify A's anchor before announcement because he does not know the P2SH of the multisig. However, someone other than B (ie a third party) could malleate the anchor between broadcast and confirmation just for their own amusement. B can't reuse pubkeys between different channels with this protocol either, but that's good practice anyway.The author of the post believes that child-pays-for-parent seems plausible and would work by doing txA: spend 6 BTC to 5 BTC to A&B and 1 BTC to A. Then doing txB: spend 1 BTC from txA:1 to 0.999 BTC to A. This method should be pretty safe, but CPFP doesn't work yet, and segregated witness seems like it'll happen sooner anyway. Finally, the author prefers seggregated witness to fix the problem cleanly, but thinks that opening the channel as described is a good enough workaround until it happens.</p>
        <hr>
        <p><i>Updated on: 2023-05-18T19:11:45.736453+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>