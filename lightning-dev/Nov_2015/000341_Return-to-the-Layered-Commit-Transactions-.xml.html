<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Return to the Layered Commit Transactions?</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Rusty Russell 2015-11-25 00:02:54
            <br><i>Published on: 2015-11-25T00:02:54+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/Nov_2015/combined_Return-to-the-Layered-Commit-Transactions-.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2015-November/000341.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>While working on the payment layer and experimenting with timeouts for CSV and CLTV, Mats Jerratsch discovered some issues. The design of single output of scripts and commit transaction does not allow HTLCs to have a long revocation time and a short refund time simultaneously. In such cases, there are problematic race conditions where both parties can technically claim the payment depending on the propagation time of the transaction. As the absolute CLTV timeout has to increase with each hop, it can give insight into position within the route even with onion routing. Mats played with numbers but did not see any way out of this problem, as anything lower than one day might be dangerous for DDoS attacks, but 20 hops may result in 30-40 days for a refund. One possible solution is to separate 'claiming-a-payment-using-R' and 'revoking-an-output' into two layers, enforced by revealing R within a separate timeframe than the revocation timeframe.</p>
    <hr>
    <p><i> Updated on: 2023-05-23T21:41:57.844191+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>