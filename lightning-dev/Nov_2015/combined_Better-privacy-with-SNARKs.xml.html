<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Better privacy with SNARKs <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
    <ul>
        
        
        <li>
        <a href="/lightning-dev/Nov_2015/000363_Better-privacy-with-SNARKs.xml.html">Better privacy with SNARKs</a>
        <b>Anthony Towns 2015-11-30 00:07:59</b>
        </li>
        
        <li>
        <a href="/lightning-dev/Nov_2015/000349_Better-privacy-with-SNARKs.xml.html">Better privacy with SNARKs</a>
        <b>Anthony Towns 2015-11-27 04:42:19</b>
        </li>
        
        <li>
        <a href="/lightning-dev/Nov_2015/000344_Better-privacy-with-SNARKs.xml.html">Better privacy with SNARKs</a>
        <b>Anthony Towns 2015-11-26 11:15:16</b>
        </li>
        
        <li>
        <a href="/lightning-dev/Nov_2015/000338_Better-privacy-with-SNARKs.xml.html">Better privacy with SNARKs</a>
        <b>Anthony Towns 2015-11-24 05:45:43</b>
        </li>
        
        <li>
        <a href="/lightning-dev/Nov_2015/000330_Better-privacy-with-SNARKs.xml.html">Better privacy with SNARKs</a>
        <b>Anthony Towns 2015-11-22 02:13:27</b>
        </li>
        
        <li>
        <a href="/lightning-dev/Nov_2015/000329_Better-privacy-with-SNARKs.xml.html">Better privacy with SNARKs</a>
        <b>Anthony Towns 2015-11-20 07:44:15</b>
        </li>
        
        <li>
        <a href="/lightning-dev/Nov_2015/000309_Better-privacy-with-SNARKs.xml.html">Better privacy with SNARKs</a>
        <b>Anthony Towns 2015-11-17 21:14:36</b>
        </li>
        
        <li>
        <a href="/lightning-dev/Dec_2015/000368_Better-privacy-with-SNARKs.xml.html">Better privacy with SNARKs</a>
        <b>Anthony Towns 2015-12-08 02:10:46</b>
        </li>
        

        
    </ul>
    
        <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2015-November/000363.html">Click here to read original discussion on the lightning-dev mailing list</a>
    
    <p><i>Published on: 2015-11-30T00:07:59+00:00</i></p>
    <hr>
    <h3> Summary:</h3>
    <p>Anthony Towns presented three different approaches to forcing someone to reveal a private key corresponding to secp256k1 public key P without adding opcodes to Bitcoin. The first approach involves generating a signature with P that produces parameters for the signature with a combined total of 15 leading zero bytes or more. This approach can be satisfied using brute force by modifying a transaction, hashing it, and doing modular arithmetic ops. Using this approach reveals the secret key p: p = (2s - h)/r (mod O(g)).The second approach involves using elliptic curve (EC) keys to achieve the same result as the first approach without SNARKS. The third approach is an alternative method that Towns and andytoshi came up with. This approach uses a function called "revealP(Q,R,sigA,sigB,sigC)" that requires multiple check_multisig_verify operations in the scriptPubkey with pubkeys P, Q, and R, and stack operations to implement the function. The scriptSig has Q, R, and three signatures.Towns also discussed the cost associated with adding a minimal HTLC, which costs extra fees per HTLC per channel when cleared on the blockchain. He suggested accounting for this cost as "the cost of closing a channel is 4c (or 7c) times the number of simultaneous incoming HTLCs I'll accept, plus 4c times the number of simultaneous outgoing HTLCs I'll do."Andrew Towns suggested using zero-knowledge proofs (ZKPs) to "prove" that a specific payment hash is committed to in a lightning network payment channel without revealing the payment hash itself. The ZKP uses a cryptographic primitive called a SNARK to prove knowledge of a pre-image $R$ of some SHA-256 hash value $H$. The proof can be verified without knowledge of $R$, and $R$ can be kept private until such time as it needs to be revealed. The post goes on to detail how this might work for privacy within lightning network transactions, as well as other applications of HTLCs, such as atomic swaps across chains. The costs associated with generating and verifying these proofs are also discussed. It should be noted however, that this is not yet ready for prime-time, and requires further development and testing.The lightning network can be associated with a privacy limitation, where different hops of a transaction can be recognized by the same R value. By changing R at each step in the route, payment anonymity can be improved and it becomes difficult to attack the system. SNARKs can be used to prove that there are some secrets (R1 and R2) that satisfy some programmable condition based on public inputs (H1, H2, and X), without revealing those secrets. The extra burden for keeping the payment private falls entirely on the consumer rather than the merchant.There are a few "generic" crypto ops that might be useful to have, such as OP_CHECK_SECP256K1_MUL_VERIFY and OP_CHECK_INLINE_SIGNATURE_VERIFY. With a segregated witness proposal, introducing new opcodes is easy, so maybe someone would find a reason to prefer open-coding it like this?</p>
    <hr>
    <p><i> Updated on: 2023-05-18T16:29:42.937436+00:00 </i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>