<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Fat Errors <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/Nov_2022/003739_Fat-Errors.html">Fat Errors</a>
                        <b>Thomas HUET 2022-11-03 15:12:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Nov_2022/003741_Fat-Errors.html">Fat Errors</a>
                        <b>Joost Jager 2022-11-04 06:53:53</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Oct_2022/003725_Fat-Errors.html">Fat Errors</a>
                        <b>Joost Jager 2022-10-20 15:45:16</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Oct_2022/003723_Fat-Errors.html">Fat Errors</a>
                        <b>Joost Jager 2022-10-19 11:12:26</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Nov_2022/003734_Fat-Errors.html">Fat Errors</a>
                        <b>Joost Jager 2022-11-01 21:09:27</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Nov_2022/003750_Fat-Errors.html">Fat Errors</a>
                        <b>Joost Jager 2022-11-10 15:24:28</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Oct_2022/003724_Fat-Errors.html">Fat Errors</a>
                        <b>Bastien TEINTURIER 2022-10-20 15:36:03</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Oct_2022/003727_Fat-Errors.html">Fat Errors</a>
                        <b>Rusty Russell 2022-10-24 22:32:52</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2022-November/003739.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2022-11-03T15:12:00+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>In the Lightning Network, there was a vulnerability in error attribution that needed to be addressed. To tackle this issue, Joost Jager proposed a new failure message format that includes a chain of HMACs. This ensures the integrity of the message and makes it impossible for any node to modify the failure message without revealing their involvement. The proposed solution is seen as justified despite its size, which can be up to 12 KB due to the maximum of 27 hops and the inclusion of 378 HMACs of 32 bytes each.To maintain backward compatibility, signaling is used to determine what algorithm should be run to generate or transform the failure message through a tlv onion field. Advertising intermediate nodes' capability to transform the new format through a feature bit is also necessary. Furthermore, successes can be delayed, and adding the same payloads and HMACs blocks to the update_fulfill_htlc message could be an option.Another proposal from Rusty suggests using a pre-pay scheme where N sats and a secp point are sent, and every chained secret returned earns the forwarder 1 sat. The answers are placed in each layer of the onion, and the distance traveled by the onion is determined based on how much money is received back on failure. However, the error message may be corrupted. Rusty suggests truncating the point to a new secret key as the simplest solution, with each node applying a tweak for decorrelation. The best scheme would be where payment is only received if the next node decrypts, but this requires more thought. Finally, Rusty proposes reducing the number of hops to 16, which is the closest power of 2 to the legacy hop limit, and makes this 4.5k for payloads and hmacs.Overall, these proposals aim to improve the reliability and security of the Lightning Network. Several links to relevant sources are provided as references, including a link to a code repository on GitHub for the Lightning Network project. The context appears to be related to development work being done on the Lightning Network, with discussion potentially taking place on a mailing list called "lightning-dev" hosted by the Linux Foundation.</p>
        <hr>
        <p><i>Updated on: 2023-06-04T04:15:20.291776+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>