<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Stateless invoices with proof-of-payment</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Olaoluwa Osuntokun 2021-09-22 23:40:55
            <br><i>Published on: 2021-09-22T23:40:55+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/Sept_2021/combined_Stateless-invoices-with-proof-of-payment.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2021-September/003252.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The Lightning network can provide light-weight, no-login payments with minimal friction, but optimistically presenting payment requests leads to many of those payment requests going unused. The conventional approach is to create a lightning invoice on a node and store the invoice together with order details in a database. However, this setup needs protection against unbounded generation of payment requests. Stateless invoices could be a solution to this problem. With stateless invoices, invoices can be generated without the need to keep any state at all.To generate stateless invoices, the recipient does not need to know whom or what the payment is for, and they do not know the preimage that is needed to settle the htlc(s). To solve these problems, additional custom tlv records can be attached to the htlc, which would enable the recipient to encode the order details. Alternatively, part of the payment_secret (aka payment address) can be used to encode the order details. For the second problem, a deterministic preimage based on a (recipient node key-derived) secret, the payment secret, and other relevant properties can be used.Resilience can be achieved by implementing just-in-time inserted invoices to keep the difference small. Stateless invoices can be a simple way to improve the resiliency of systems that deal with lightning invoices. Unlimited amounts of invoices can be generated without worrying about storage or memory, regardless of whether the requests are due to popularity of a service or a deliberate dos attack.</p>
    <hr>
    <p><i> Updated on: 2023-05-23T16:12:59.827874+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>