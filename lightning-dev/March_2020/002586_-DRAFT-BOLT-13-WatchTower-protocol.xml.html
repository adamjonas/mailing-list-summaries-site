<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>[DRAFT] BOLT 13(?): WatchTower protocol</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Sergi Delgado Segura 2020-03-09 17:49:47
            <br><i>Published on: 2020-03-09T17:49:47+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/March_2020/combined_-DRAFT-BOLT-13-WatchTower-protocol.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-March/002586.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The Watchtower protocol specification (BOLT DRAFT REV.1) has been revised to include user accounts, payment methods, and message signing. The revision also includes improvements over the original proposal. The document focuses on hiring a third party watching service (Watchtower) to watch the blockchain and respond to channel breaches on behalf of the customers.The client sends an encrypted penalty transaction and a transaction locator to the Watchtower every time there is a new transfer in the lightning channel. The Watchtower can identify a breach with the locator and decrypt the penalty transaction using the commitment transaction ID. Extensions can be offered by the Watchtower to provide stronger guarantees to the clients, such as a signed receipt for every new job to build an accountable Watchtower.Upon establishing the first connection with the tower, the client needs to register a public key. Freeing expired appointment from the tower after a channel closure or breach should be beneficial for both parties. The deletion_accepted message contains information about the acceptance of an appointment deletion by the Watchtower. The data must match with delete_appointment message before sending a deletion accepted message. Implementations should compute the locator, encryption_key, and encryption_iv from the commitment transaction. Users and servers should use ChaCha20-Poly1305 to encrypt/decrypt blobs. The sample code for the client to prepare the encrypted_blob has also been provided in the document.The article discusses the different payment modes for Watchtowers, which are entities responsible for monitoring Bitcoin Lightning Network channels and taking action in case of a breach. The three payment modes are on-chain bounty, micropayments, and subscription. The on-chain bounty approach pays the tower only if the job is done but allows multiple towers to be hired with only one receiving the reward. The micropayment and subscription approaches are favorable for Watchtowers, with the ideal approach being a combination of both.The article also explains the data serialization and signing process for requests and receipts made to Watchtowers. Signatures are zbase32 encoded and performed over the sha256d of the message prefixed by "Lightning Signed Message". Additionally, the article discusses the vulnerability of Watchtowers to attacks and precautions that can be taken to prevent them, such as subscriptions instead of single appointments.Lastly, the article mentions some possible improvements to the current hiring protocol and acknowledges areas for further development, such as defining proper tower discovery and error handling. The document does not include Watchtower server discovery. There's a list discussion topics at the end of the document with things that need opinions.</p>
    <hr>
    <p><i> Updated on: 2023-06-02T22:00:37.536738+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>