<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Factory-Optimized Protocols For Lightning</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> jlspc 2022-12-02 20:18:25
            <br><i>Published on: 2022-12-02T20:18:25+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/Dec_2022/combined_Factory-Optimized-Protocols-For-Lightning.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2022-December/003782.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The Lightning Network is a second-layer scaling solution for Bitcoin that aims to make micropayments faster and more efficient. However, the network has scalability issues, and factories with two-party channels are essential for Bitcoin to be widely used in a trust-free manner. Hash Time-Locked Contracts (HTLCs) are used to implement payments across multiple channels in the Lightning Network.If one of the parties is unresponsive, the other party must resolve the HTLC on-chain, which creates two problems. Firstly, the HTLC's expiry must be delayed by the time required to close the factory and put the channel containing the HTLC on-chain, leading to inefficient use of channels' capital and long waits to obtain payment receipts. Secondly, the requirement to close a factory due to the need to resolve an HTLC on-chain means that a single unresponsive party can force the closure of an entire factory, limiting the factory's ability to scale Bitcoin.To solve these problems, factory-optimized channel protocols have been presented. The post presents the PFO, FFO, and FFO-WF protocols, which aim to make the resolution of HTLCs in channels independent of the latency to close the channel factory. Additionally, the FFO and FFO-WF protocols allow HTLCs to be resolved on-chain without closing the channel factory, making them suitable for watchtower-freedom and one-shot receives for casual users.The FFO-WF protocol modifies the FFO protocol to add a relative delay before Alice can time out an HTLC offered to Bob, allowing Bob to stay off-chain after the HTLC’s expiry, thus tolerating Alice’s intentional unavailability. However, it creates a risk that Alice will never put her State transaction on-chain, thus preventing Bob from receiving payment for HTLCs offered to him. To solve this risk, Bob’s Commitment transaction is modified to ignore the HTLC control results and pay all HTLC amounts to Bob, but delaying his State and Commitment transactions enough that Alice can always get hers on-chain.Finally, the post notes that these protocols are based on the TP protocol presented by Law and inspired by Lightning’s use of HTLC-timeout and HTLC-success transactions to resolve HTLCs before their associated Commitment transaction has been verified to be unrevoked. BOLT specifications and other research papers provide detailed information about these developments. In addition, recent proposals such as TAPLEAF_UPDATE_VERIFY covenant opcode and Channel Eviction from Channel Factories by New Covenant Operations highlight how Bitcoin developers are working on improvements to the Lightning Network.Overall, the protocols are a significant improvement to the Lightning Network, allowing factories to scale Bitcoin efficiently. The protocols are optimized for factories, enabling casual users to use one-shot receives and dedicated users to use watchtowers with logarithmic storage.</p>
    <hr>
    <p><i> Updated on: 2023-06-03T10:58:41.683782+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>