<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Potential vulnerability in Lightning backends: BOLT-11 &#34;payment hash&#34; does not commit to payment! <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/July_2023/004012_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.html">Potential vulnerability in Lightning backends: BOLT-11 &#34;payment hash&#34; does not commit to payment!</a>
                        <b>Martin Habovštiak 2023-07-16 18:11:58+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/July_2023/004010_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.html">Potential vulnerability in Lightning backends: BOLT-11 &#34;payment hash&#34; does not commit to payment!</a>
                        <b>Olaoluwa Osuntokun 2023-07-16 11:32:08+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/July_2023/004009_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.html">Potential vulnerability in Lightning backends: BOLT-11 &#34;payment hash&#34; does not commit to payment!</a>
                        <b>Martin Habovštiak 2023-07-15 20:30:06+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/July_2023/004008_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.html">Potential vulnerability in Lightning backends: BOLT-11 &#34;payment hash&#34; does not commit to payment!</a>
                        <b>fiatjaf 2023-07-13 21:03:11+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/July_2023/004007_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.html">Potential vulnerability in Lightning backends: BOLT-11 &#34;payment hash&#34; does not commit to payment!</a>
                        <b>David A. Harding 2023-07-12 20:04:19+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/July_2023/004006_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.html">Potential vulnerability in Lightning backends: BOLT-11 &#34;payment hash&#34; does not commit to payment!</a>
                        <b>callebtc 2023-07-06 07:22:59+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/July_2023/004005_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.html">Potential vulnerability in Lightning backends: BOLT-11 &#34;payment hash&#34; does not commit to payment!</a>
                        <b>Rusty Russell 2023-07-06 07:10:42+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003986_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.html">Potential vulnerability in Lightning backends: BOLT-11 &#34;payment hash&#34; does not commit to payment!</a>
                        <b>Antoine Riard 2023-06-19 20:34:10+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003983_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.html">Potential vulnerability in Lightning backends: BOLT-11 &#34;payment hash&#34; does not commit to payment!</a>
                        <b>callebtc 2023-06-19 15:26:05+00:00</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-July/004012.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2023-07-16T18:11:58+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>The LNbits team has addressed an exploit in their system by patching it in the latest version, 0.10.5. They strongly advise users to update their software promptly to mitigate the risk of similar exploits. This incident highlights the importance of raising awareness about attacks and implementing robust security measures in Lightning applications, especially those related to custodial wallets, payment processors, and account management software.The attack involves manipulating invoices by inserting the payment hash of one payment into a different payment, creating a malicious invoice that tricks the backend into treating it as a legitimate payment. The attacker creates invoice A with a specific amount in LNbits and then creates another invoice B' with a small amount on their own node. By exploiting the invoices, the attacker is able to settle the payment internally by crediting A and debiting B, effectively creating balances out of thin air.To mitigate this exploit, it is recommended that backends use self-generated unique "checking IDs" for internal payment lookups or implement additional checks to ensure that invoice details have not been tampered with. It is important to note that payment hashes only commit to the preimage and not other payment details like the amount or pubkey.This incident showcases the sophistication of attackers who possess a deep understanding of bolt-11 and use custom tools to create malicious invoices. It underlines the need for developers to be aware of potential vulnerabilities and take appropriate measures to prevent similar attacks. Collaboration and information sharing within the Lightning community are crucial in addressing and mitigating security issues.Developers working on Lightning applications should update their software to the latest version and remain vigilant against potential exploits. By implementing additional checks and following best practices, they can strengthen the security of their systems and protect against future attacks.</p>
        <hr>
        <p><i>Updated on: 2023-08-01T01:15:30.015132+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>