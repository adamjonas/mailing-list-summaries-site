<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Potential vulnerability in Lightning backends: BOLT-11 &#34;payment hash&#34; does not commit to payment!</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Olaoluwa Osuntokun 2023-07-16 11:32:08+00:00
            <br><i>Published on: 2023-07-16T11:32:08+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/July_2023/combined_Potential-vulnerability-in-Lightning-backends-BOLT-11-payment-hash-does-not-commit-to-payment-.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-July/004010.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The Lightning Network (LN) supports paying invoices it generates by setting the `allow_self_payment` field using the API provided at <a href="https://lightning.engineering/api-docs/api/lnd/router/send-payment-v2">https://lightning.engineering/api-docs/api/lnd/router/send-payment-v2</a>. This feature allows for circular rebalancing within the network. However, another method to achieve the same result is by setting up another node and funding bi-lateral "trusted channels" that will never confirm on the blockchain. This method enables the ability to pay invoices without relying on the actual network route and does not require any external software. It also provides all the necessary payment/invoice records.One alternative way to accomplish self-payment is by using the `"allow-circular-route"` flag, which allows users to double back on the same channel for the route. During a discussion on the Lightning-dev mailing list, the idea of implementing self-payment in Lightning node implementations was raised. Currently, no Lightning node has this ability, but the suggestion was deemed worthwhile. The implementation of self-payment would be a significant feature for custodial Lightning service providers.</p>
    <hr>
    <p><i> Updated on: 2023-07-17T02:42:06.507708+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>