<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Liquidity griefing for 0-conf dual-funded txs</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-07 00:41:12+00:00
            <br><i>Published on: 2023-06-07T00:41:12+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/June_2023/combined_Liquidity-griefing-for-0-conf-dual-funded-txs.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003974.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The introduction of dual funded transactions in lightning has created challenges, including how to protect against liquidity griefing attacks from malicious peers. The dual funding protocol involves exchanging data about the utxos each peer adds to the shared transaction, then exchanging signatures and broadcasting the resulting transaction. If a remote node goes silent in the middle of an instance of the protocol, liquidity is locked and unusable. To address this issue, an elegant solution is to never lock utxos used in dual funded transactions, which allows for automatic reuse in another instance of the protocol if a remote node goes silent. However, this solution falls short when using 0-conf, as accidentally double-spending a 0-conf channel can result in loss of funds for one of the peers. Nodes that want to offer 0-conf channels must ensure that the utxos they use for 0-conf are isolated from the utxos they use for non 0-conf. This can be fixed by using a "soft lock" when selecting utxos for a non 0-conf funding attempt. In eclair, opportunistic 0-conf is used under certain conditions, but this cannot be done when mixing 0-conf and non 0-conf funding attempts because the utxos may be soft-locked, preventing an upgrade to 0-conf. To prevent liquidity griefing related to mempool vectors, the honest counterparty can enforce that any contributed outputs must be encumbered by a 1 CSV unless being a 2-of-2 funding. As a long-term solution, solutions worked out to mitigate channel jamming could be reused, such as deploying the Staking Credentials framework by dual-funding market-makers beyond routing hops. The dual-funding initiator should pay the maker a fee scale up on the amount of UTXOs contributed and some worst-case liquidity griefing scenario. A privacy-preserving credential can be introduced between the payment of the fee and the redeem of the service to unlink dual-funding initiators.</p>
    <hr>
    <p><i> Updated on: 2023-06-23T01:34:08.520996+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>