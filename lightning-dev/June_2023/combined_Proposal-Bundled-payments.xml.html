<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Proposal: Bundled payments <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/June_2023/003977_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin 2023-06-13 08:10:29+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003980_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Matt Corallo 2023-06-14 17:28:04+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003988_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin 2023-06-20 08:45:34+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003990_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>SomberNight 2023-06-20 16:49:05+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003979_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin 2023-06-14 08:09:45+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003978_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Olaoluwa Osuntokun 2023-06-14 02:56:54+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003985_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>David A. Harding 2023-06-19 20:29:34+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003987_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin 2023-06-20 07:32:15+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003989_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER 2023-06-20 16:44:17+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003991_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Matt Corallo 2023-06-20 17:00:45+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003992_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Steve Lee 2023-06-20 17:16:52+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.xml.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003977.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2023-06-13T08:10:29+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>Thomas Voegtlin, the creator of Electrum wallet, has proposed an extension to BOLT-11 that would allow an invoice to contain two bundled payments with distinct preimages and amounts. The proposal is aimed at services that require prepayment of a mining fee for non-custodian exchange such as Submarine swaps and JIT channels. This change would level the field in terms of competition between lightning service providers, as competitors who refuse to offer custodian services are excluded from that game.The semantics of bundled payments will be such that the BOLT-11 invoice contains two preimages and two amounts: prepayment and main payment. The receiver should wait until all the HTLCs of both payments have arrived before they fulfill the HTLCs of the pre-payment. If the main payment does not arrive, they should fail the pre-payment with a MPP timeout. Once the HTLCs of both payments have arrived, the receiver fulfills the HTLCs of the prepayment, and they broadcast their on-chain transaction. The decision to make this feature required or optional remains with the service provider.Thomas believes that ACINQ would benefit from this because it would make it possible for them to make their pay-to-open service fully non-custodian. Currently, a dedicated client is required to use Loop, and competitors who do not have an established user base running a dedicated client are exposed to the mining fee attack.Matt Corallo replied to Thomas's proposal stating that he thinks the ship has probably sailed on getting any kind of new interoperable change in to BOLT-11. He suggests working towards specifying some "standard" way of doing swaps, and why it shouldn't be built on OMs so you can do it more privately. Regarding Thomas's question about the distinction between splice-out and submarine swaps, he said that submarine swaps make it possible to add receiving capacity to a channel.Finally, Thomas believes that such a change should be implemented in BOLT-11, and not using BOLT-12 or onion messages. However, it requires senders to be aware that the payment will lead to a channel creation or a splice on the receiver end, and it requires all existing software used by senders to be updated.In conclusion, Thomas Voegtlin proposes an extension to BOLT-11 where an invoice can contain two bundled payments with distinct preimages and amounts, aimed at services that require the prepayment of a mining fee for non-custodian exchanges such as Submarine swaps and JIT channels. The proposal aims to level the field in terms of competition between lightning service providers by providing a non-interactive and efficient way of handling the prepayment of the fee. There are potentially three different entities at play in these payments: Alice generates an invoice as they want to receive some money on-chain, and Bob wants to pay that invoice via Lightning. This creates a situation where Bob is a simple lightning wallet, with the only added assumption that his wallet is able to parse/pay this new type of LN invoice that contains two hashes. The other clear use case for this proposal besides swaps is JIT channels. Analogous to the above swap example, Alice could negotiate with the service provider to have a JIT channel opened to her, and the HTLC forwarded using that.</p>
        <hr>
        <p><i>Updated on: 2023-06-22T01:34:06.702908+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>