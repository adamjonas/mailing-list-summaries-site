<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Proposal: Bundled payments</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Steve Lee 2023-06-20 17:16:52+00:00
            <br><i>Published on: 2023-06-20T17:16:52+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/June_2023/combined_Proposal-Bundled-payments.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003992.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In an email exchange on June 20, 2023, Thomas Voegtlin expressed his interest in implementing BOLT-12 support in Electrum and proposed an extension to BOLT-11. This extension would allow invoices to contain two bundled payments with distinct preimages and amounts, addressing the need for prepayment of mining fees in services like submarine swaps and JIT channels. Bastien TEINTURIER suggested that extending BOLT-12 would make more sense than updating BOLT-11, as it requires new sender code anyway. He outlined three strategies for providing JIT liquidity: asking the receiver for the preimage and a fee, opening a channel and forwarding the HTLC amount minus a fee, or pre-paying the fee and then opening a channel and forwarding the whole HTLC amount.Thomas disagreed with Bastien's suggestion and argued that technical decisions should be dictated by technical needs. He proposed adding a new invoice feature to describe the prepayment of a fee using a different preimage. He provided a possible way to make this feature optional during a transition period, suggesting the use of a new feature bit, two extra fields, and specific behavior based on whether the sender supports the feature or not. Matt Corallo expressed skepticism about adding new interoperable changes to BOLT-11 and questioned the need for Thomas' proposed feature.In his initial email on June 13, 2023, Thomas explained the use case for the extension to BOLT-11, highlighting the need for prepayment of mining fees in services like submarine swaps and JIT channels. He argued that bundling the prepayment and main payment in the same BOLT-11 invoice would benefit lightning service providers by leveling the competition field and allowing non-custodian exchanges.The discussion revolved around the proposal to extend BOLT-11 to accommodate bundled payments with distinct preimages and amounts. The potential benefits, technical considerations, and implications for various lightning service providers were evaluated. ThomasV proposed a solution that avoids the use of new messages, arguing against using BOLT-12 or onion messages as it unnecessarily complicates things. He believes that non-interactive methods can be used instead. Some initial feedback suggested using BOLT-12 or OM for this use case, but ThomasV disagrees, emphasizing the importance of avoiding the addition of new messages when alternative approaches are available.Overall, ThomasV's proposal aims to address a specific use case without introducing additional complexity through the use of new messages. The discussion continues on the Lightning-dev mailing list, where further feedback and opinions can be shared.</p>
    <hr>
    <p><i> Updated on: 2023-07-05T02:53:32.014175+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>