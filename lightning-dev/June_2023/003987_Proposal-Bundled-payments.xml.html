<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Proposal: Bundled payments</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Thomas Voegtlin 2023-06-20 07:32:15+00:00
            <br><i>Published on: 2023-06-20T07:32:15+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/June_2023/combined_Proposal-Bundled-payments.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003987.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In the email thread, David A. Harding proposed an idea to Thomas Voegtlin regarding prepayment for BOLT11 invoices. He asked about the possibility of using keysend payment with metadata indicating the receiver should not claim it until they receive the 1 BTC HTLC to 0123...cdef instead of requiring payment hash for prepayment in BOLT11 invoice. In response, Thomas agreed that the idea would save space for the prepayment hash and added that the invoice would still need a feature bit as the receiver should decide to make prepayment optional or required.He further explained that for the feature to be optional, the prepayment amount needed to be subtracted from the main payment amount. Thus, in the example given by David, Alice would expect to receive either (1 BTC, invoice payment_hash) or (1 BTC - minus 10k sats, invoice payment_hash) + (10k sats, prepayment_hash via keysend). Thomas also suggested extending BOLT11 invoices with an extra_fee_via_keysend field, which could be encoded in an existing BOLT11 field like description or metadata field. This would allow immediate implementation until an updated version of BOLT11 becomes widely deployed.</p>
    <hr>
    <p><i> Updated on: 2023-06-21T01:22:34.194444+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>