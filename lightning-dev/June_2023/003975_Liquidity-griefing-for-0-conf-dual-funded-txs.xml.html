<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Liquidity griefing for 0-conf dual-funded txs</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Bastien TEINTURIER 2023-06-07 09:46:36+00:00
            <br><i>Published on: 2023-06-07T09:46:36+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/June_2023/combined_Liquidity-griefing-for-0-conf-dual-funded-txs.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003975.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The Lightning Network has introduced dual funded transactions, which can be vulnerable to liquidity griefing attacks from malicious peers. One solution is to never lock utxos used in dual funded transactions; however, this falls short when using 0-conf because accidentally double-spending a 0-conf channel can result in loss of funds for one of the peers. Nodes offering 0-conf services expose themselves to liquidity griefing and must ensure that the utxos they use for 0-conf are isolated from the utxos they use for non 0-conf. A "soft lock" can be used when selecting utxos for a non 0-conf funding attempt. 0-conf funding attempts must ignore soft locked utxos while non 0-conf funding attempts can reuse soft locked utxos. In eclair, opportunistic 0-conf is done by immediately sending `channel_ready` if the conditions are met, but this cannot be done when mixing 0-conf and non 0-conf funding attempts. A mid-term solution is suggested, which involves using v3 transactions for channel funding and splicing. In the longer term, some kind of anti-DoS token will need to be exchanged to avoid liquidity griefing attacks, but designing and analyzing this is not easy. It may be valuable to disable inbound payments or require a longer `cltv_expiry_delta` than usual in case of mempool fee spikes delaying the 0-conf chain confirmation. Long-term solutions could involve reusing solutions worked out to mitigate channel jamming. The Staking Credentials framework could be deployed by dual-funding market-makers beyond routing hops.</p>
    <hr>
    <p><i> Updated on: 2023-06-27T03:45:19.330767+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>