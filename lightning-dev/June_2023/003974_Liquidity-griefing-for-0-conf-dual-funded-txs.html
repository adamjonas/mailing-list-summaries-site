<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Liquidity griefing for 0-conf dual-funded txs</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-07 00:41:12+00:00
            <br><i>Published on: 2023-06-07T00:41:12+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/June_2023/combined_Liquidity-griefing-for-0-conf-dual-funded-txs.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003974.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The email exchange between Antoine and Bastien discusses the issue of liquidity griefing in dual-funded transactions in Lightning Network. The problem arises when one peer locks their UTXOs in the shared transaction, causing the other peer's liquidity to be locked and unusable if the remote node goes silent. Simply unlocking the UTXOs after detecting a fishy remote node is not a viable solution, as the remote node could still succeed in locking the liquidity for a duration and initiate other instances of the attack.To address this issue, an elegant solution proposed is to never lock UTXOs used in dual-funded transactions. If a remote node goes silent during the protocol, the UTXOs will automatically be re-used in another instance of the protocol. However, this approach falls short when using 0-conf (zero-confirmation) channels because accidentally double-spending a 0-conf channel can result in loss of funds. Nodes offering 0-conf services expose themselves to liquidity griefing.Another related issue is the race scenario where the same UTXO is selected for both non 0-conf and 0-conf funding attempts. To fix this, a "soft lock" can be implemented, where soft locked UTXOs are ignored for 0-conf funding attempts but can be reused for non 0-conf funding attempts.In the context of Eclair, the opportunistic use of 0-conf is discussed. If the node receives a `channel_ready` message immediately, is the sole contributor to the funding transaction, and the transaction hasn't been replaced by fee (RBF-ed), the node can start using the channel for 0-conf payments. This allows for the use of 0-conf where only one side of the channel needs to trust the other side.However, when mixing 0-conf and non 0-conf funding attempts, the presence of soft locked UTXOs prevents the upgrade to 0-conf. The discussion concludes by inviting ideas to improve the situation and provide better protections against liquidity griefing for nodes offering 0-conf services. The email includes links to relevant resources and discussions for further reference.Overall, the discussion delves into the challenges and potential solutions related to liquidity griefing in dual-funded transactions and the use of 0-conf channels in Lightning Network.</p>
    <hr>
    <p><i> Updated on: 2023-07-04T02:52:20.379619+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>