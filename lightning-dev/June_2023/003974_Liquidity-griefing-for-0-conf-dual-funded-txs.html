<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Liquidity griefing for 0-conf dual-funded txs</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Antoine Riard 2023-06-07 00:41:12+00:00
            <br><i>Published on: 2023-06-07T00:41:12+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/June_2023/combined_Liquidity-griefing-for-0-conf-dual-funded-txs.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003974.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a discussion on the Lightning-dev mailing list, Bastien Teinturier raises concerns about liquidity griefing attacks in dual-funded transactions. He explains that when peers lock their UTXOs as soon as they are added to the shared transaction, it can lead to the honest node's liquidity being locked and unusable if the remote node goes silent. Bastien suggests an elegant solution to this issue, which is to never lock UTXOs used in dual-funded transactions. This way, if a remote node goes silent, the UTXOs will automatically be reused in another instance of the protocol. However, this solution falls short when using 0-conf (zero-confirmation) channels, as accidental double-spending can result in loss of funds. To address this, Bastien proposes using a "soft lock" for non 0-conf funding attempts, where soft locked UTXOs are ignored for 0-conf funding attempts.Bastien also discusses the race scenario that can occur when nodes want to offer both 0-conf and non 0-conf channels. If an unlocked UTXO is selected for a non 0-conf funding attempt and then subsequently locked for a 0-conf funding attempt, there is a risk of accidental double-spending. To fix this, Bastien suggests using a "soft lock" during the selection of UTXOs for non 0-conf funding attempts, allowing them to be reused for 0-conf funding attempts.In terms of implementing 0-conf in Eclair, Bastien explains that they currently use an opportunistic approach, where if they receive a `channel_ready` message immediately and meet certain conditions (such as being the only contributor to the funding transaction and the transaction not being Replace-By-Fee-ed), they immediately send a `channel_ready` message and start using the channel. However, this approach cannot be used when mixing 0-conf and non 0-conf funding attempts due to the potential soft locking of UTXOs.Bastien concludes by seeking ideas on how to improve the situation and offer better protections against liquidity griefing for nodes offering 0-conf services. He acknowledges that 0-conf is a pain point in implementation but recognizes its popularity among users.This discussion on liquidity griefing and the challenges of implementing 0-conf channels can be found on the Lightning-dev mailing list [1].</p>
    <hr>
    <p><i> Updated on: 2023-06-29T02:47:13.805985+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>