<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Proposal: Bundled payments</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Thomas Voegtlin 2023-06-20 07:32:15+00:00
            <br><i>Published on: 2023-06-20T07:32:15+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/June_2023/combined_Proposal-Bundled-payments.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003987.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Dave and Thomas are discussing an interesting idea that would save space for the prepayment hash. They agree that the invoice would still need a feature bit so that the receiver can decide whether to make prepayment optional or required.To make the feature optional, they would subtract the prepayment amount from the main payment amount. For example, if Alice expects to receive 1 BTC, the invoice would be either (1 BTC, invoice payment_hash) or (1 BTC - minus 10k sats, invoice payment_hash) + (10k sats, prepayment_hash via keysend).David suggests using a keysend payment with an onion message payload to indicate what payment hash to associate with the prepayment. For example, Alice wants to receive 1 BTC to hash 0123...cdef with a prepayment of 10k sats. The 10k sats would be sent via keysend with metadata indicating that the receiver shouldn't claim it until they receive the 1 BTC HTLC to 0123...cdef.If this approach is acceptable, Dave believes that extending BOLT11 invoices with an extra_fee_via_keysend field would be sufficient. This would be smaller in size and could be encoded in an existing BOLT11 field like (d) description or (m) metadata. It may allow for immediate implementation until an updated version of BOLT11 or an alternative using offers becomes widely deployed.The discussion concludes with the contact information for Electrum Technologies GmbH, including their address and legal details.</p>
    <hr>
    <p><i> Updated on: 2023-07-01T03:18:04.010496+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>