<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Liquidity griefing for 0-conf dual-funded txs</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Bastien TEINTURIER 2023-06-07 09:46:36+00:00
            <br><i>Published on: 2023-06-07T09:46:36+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/June_2023/combined_Liquidity-griefing-for-0-conf-dual-funded-txs.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003975.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a discussion between Antoine and Bastien, they agree on the importance of addressing mempool pinning issues in Lightning Network. They discuss using v3 transactions as a mid-term solution for channel funding and splicing, noting that this could make transactions identifiable on-chain. They also acknowledge the need for a long-term solution involving an anti-DoS token exchange, although designing and analyzing such a solution is challenging.Antoine raises concerns about liquidity griefing in dual-funding or splicing scenarios. He explains how a malicious counterparty can pin a transaction in the mempool using sneaky tactics, such as abusing replacement rule 3. He suggests that enforcing encumbrance by a 1 CSV for contributed outputs can mitigate some of the risks, but acknowledges that the initial commitment transaction still requires anchor outputs for each party to recover their UTXOs.Regarding 0-conf transactions, Antoine argues that even with package relay/nVersion deployment, liquidity griefing due to lack of signature release or mempool manipulation will always be present. He proposes leveraging solutions developed to mitigate channel jamming, such as the Staking Credentials framework, which could be used by dual-funding market-makers to charge fees based on the amount of UTXOs contributed.Bastien starts the discussion by highlighting the challenge of protecting against liquidity griefing attacks in dual-funded transactions. He explains that if a remote node goes silent during the protocol, the honest node's locked utxos become unusable. To address this issue, he suggests not locking utxos used in dual-funded transactions, allowing them to be automatically re-used in subsequent instances of the protocol. However, he notes that when using 0-conf, utxos must be locked to prevent accidental double-spending, creating exposure to liquidity griefing.Another issue raised by Bastien is the race scenario where the same utxo is selected for both non 0-conf and 0-conf funding attempts. He proposes using a "soft lock" for non 0-conf funding attempts, allowing them to reuse locked utxos while 0-conf funding attempts ignore soft locked utxos.Bastien explains the opportunistic approach to 0-conf used in eclair, where if certain conditions are met, they immediately send `channel_ready` and start using the channel. However, this approach becomes problematic when mixing 0-conf and non 0-conf funding attempts due to soft locks on utxos.In conclusion, Bastien seeks ideas to improve protections against liquidity griefing for nodes offering 0-conf services. Despite the challenges of implementing 0-conf, he acknowledges its popularity among users.</p>
    <hr>
    <p><i> Updated on: 2023-07-04T02:52:38.065293+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>