<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Proposal: Bundled payments <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/June_2023/003977_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin 2023-06-13 08:10:29+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003980_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Matt Corallo 2023-06-14 17:28:04+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003988_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin 2023-06-20 08:45:34+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003990_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>SomberNight 2023-06-20 16:49:05+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003979_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin 2023-06-14 08:09:45+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003978_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Olaoluwa Osuntokun 2023-06-14 02:56:54+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003985_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>David A. Harding 2023-06-19 20:29:34+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003987_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin 2023-06-20 07:32:15+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003989_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER 2023-06-20 16:44:17+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003991_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Matt Corallo 2023-06-20 17:00:45+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003992_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Steve Lee 2023-06-20 17:16:52+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003977.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2023-06-13T08:10:29+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>Thomas Voegtlin has proposed an extension to BOLT-11, the Lightning Network protocol, that would allow invoices to contain two bundled payments with distinct preimages and amounts. This change is aimed at services like submarine swaps and JIT channels, which require a prepayment of a mining fee for non-custodian exchanges. The goal is to level the playing field in terms of competition between lightning service providers.Currently, service providers without dedicated client software face vulnerabilities in terms of DoS attacks and custodial requirements. By bundling the prepayment and main payment in the same invoice, this proposal aims to address these challenges. It suggests implementing the change in BOLT-11 as it does not require the exchange of new messages.The semantics of bundled payments in this proposal are as follows: the BOLT-11 invoice would contain two preimages and two amounts (prepayment and main payment). The receiver would need to wait until all the HTLCs (Hashed Time-Locked Contracts) of both payments have arrived before fulfilling the HTLCs of the pre-payment. If the main payment does not arrive, the pre-payment would be failed with a MPP (Multi-Path Payments) timeout. Once the HTLCs of both payments have arrived, the receiver would fulfill the HTLCs of the prepayment and broadcast their on-chain transaction. However, the main payment can still fail if the sender never reveals the preimage of the main payment.While this proposal does not prevent service providers from potentially stealing the pre-payment, Thomas acknowledges that this is already a possibility under the current system. He believes that implementing this change in BOLT-11, rather than using BOLT-12 or onion messages, would be more practical.In response to Thomas's proposal, Matt Corallo expressed skepticism about the feasibility of introducing new changes into BOLT-11. He recommended focusing on specifying a "standard" way of doing swaps, potentially built on Onion Messages (OMs) for increased privacy. Matt also addressed Thomas's question regarding the distinction between splice-out and submarine swaps, stating that submarine swaps allow for the addition of receiving capacity to a channel.Overall, Thomas's proposal aims to address the challenges faced by lightning service providers and create a more level playing field in terms of competition. It suggests bundling prepayment and main payment in the same BOLT-11 invoice and outlines the semantics of bundled payments. However, there are concerns about the feasibility of implementing these changes in BOLT-11 and suggestions to explore alternative solutions such as BOLT-12 or onion messages.</p>
        <hr>
        <p><i>Updated on: 2023-07-08T02:51:16.117135+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>