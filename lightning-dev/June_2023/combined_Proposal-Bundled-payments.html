<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Proposal: Bundled payments <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/June_2023/003977_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin 2023-06-13 08:10:29+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003980_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Matt Corallo 2023-06-14 17:28:04+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003988_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin 2023-06-20 08:45:34+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003990_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>SomberNight 2023-06-20 16:49:05+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003979_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin 2023-06-14 08:09:45+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003978_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Olaoluwa Osuntokun 2023-06-14 02:56:54+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003985_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>David A. Harding 2023-06-19 20:29:34+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003987_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin 2023-06-20 07:32:15+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003989_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER 2023-06-20 16:44:17+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003991_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Matt Corallo 2023-06-20 17:00:45+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003992_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Steve Lee 2023-06-20 17:16:52+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003982_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Bastien TEINTURIER  + 2023-06-15 09:01:32+00:00</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/June_2023/003981_Proposal-Bundled-payments.html">Proposal: Bundled payments</a>
                        <b>Thomas Voegtlin  + 2023-06-15 08:22:39+00:00</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003977.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2023-06-13T08:10:29+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>Thomas Voegtlin has proposed an extension to BOLT-11, the Lightning Network protocol, that would allow invoices to contain two bundled payments with distinct preimages and amounts. This proposal is aimed at services that require a prepayment of a mining fee for non-custodian exchanges, such as Submarine swaps and JIT channels. The goal is to level the playing field for lightning service providers and improve competition. Currently, using Loop, a dedicated client is required for these services, leaving competitors without an established user base vulnerable to mining fee attacks. Thomas believes that ACINQ, for example, could benefit from this proposal by making their pay-to-open service fully non-custodian.The proposed change would be implemented in BOLT-11 itself, rather than using BOLT-12 or onion messages. The semantics of bundled payments would involve the invoice containing two preimages and two amounts: a prepayment and a main payment. The receiver would need to wait for all the HTLCs (Hash Time-Locked Contracts) of both payments to arrive before fulfilling the HTLCs of the pre-payment. If the main payment does not arrive, the pre-payment would be failed with a MPP (Multipath Payments) timeout. Once the HTLCs of both payments have arrived, the receiver fulfills the HTLCs of the pre-payment and broadcasts their on-chain transaction. The decision to make this feature required or optional would be up to the service provider.Matt Corallo responded to Thomas's proposal, expressing skepticism about the feasibility of adding new interoperable changes to BOLT-11. He believes that rolling out another incompatible version of BOLT-11 and expecting widespread support is unlikely. Instead, he suggests working towards specifying a "standard" way of doing swaps, potentially built on OMs (Onion Messages), which would offer more privacy. Regarding Thomas's question about the distinction between splice-out and submarine swaps, Matt explains that submarine swaps allow for adding receiving capacity to a channel.In response to Thomas's inquiry about BOLT-12 support in Electrum, Bastien TEINTURIER highlights the importance of making senders aware of the payment leading to a channel creation or splice on the receiver's end. He suggests that extending BOLT-12, which requires new sender code, would make more sense than updating BOLT-11. Bastien discusses three strategies for providing Just-In-Time (JIT) liquidity, including opening a channel and pushing the HTLC amount minus a fee, forwarding the HTLC amount minus a fee, and pre-paying the fee before opening a channel. He also mentions that solution 2, coupled with zero-conf transactions, can work well as long as trust and regulation are considered.Thomas responds to Matt's concerns, stating that he believes it is not too late to add a new feature to BOLT-11. He argues that technical decisions should be based on technical needs and suggests a minimalistic approach to adding new features. He points out that Lightning Labs and ACINQ have incentives to support this proposal, offering their services to non-LND users and enabling non-custodian channel openings, respectively. Thomas suggests a simple invoice feature that describes the prepayment of a fee using a different preimage. He proposes making this feature optional during a transition period and outlines how it could be implemented.Overall, Thomas Voegtlin has proposed an extension to BOLT-11 that would allow invoices to contain two bundled payments, aiming to address the need for prepayments in certain lightning service scenarios. While there are differing opinions on the feasibility and implementation of this proposal, discussions continue regarding the best approach for standardizing swaps and ensuring privacy.</p>
        <hr>
        <p><i>Updated on: 2023-07-12T02:51:48.156334+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>