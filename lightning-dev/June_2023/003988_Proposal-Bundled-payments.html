<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Proposal: Bundled payments</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Thomas Voegtlin 2023-06-20 08:45:34+00:00
            <br><i>Published on: 2023-06-20T08:45:34+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/June_2023/combined_Proposal-Bundled-payments.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003988.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In an email exchange on the Lightning-dev mailing list hosted on lists.linuxfoundation.org, Thomas Voegtlin suggests an extension to BOLT-11 that would allow invoices to contain two bundled payments with distinct preimages and amounts. This proposal aims to address the need for prepayment of mining fees in services like submarine swaps and JIT (Just-In-Time) channels. Currently, some services require prepayment of fees but are vulnerable to DoS attacks, while others become custodians due to the ordering of events.Voegtlin proposes bundling the prepayment and main payment in the same BOLT-11 invoice to create a level playing field among Lightning service providers. The proposal outlines the semantics of bundled payments, including waiting for both payments' HTLCs to arrive before fulfilling the pre-payment's HTLCs. Once both payments' HTLCs have arrived, the receiver can fulfill the prepayment's HTLCs and broadcast their on-chain transaction. Voegtlin emphasizes that this change should be implemented in BOLT-11 rather than using BOLT-12 or onion messages, as it can be done in a non-interactive way without the need for new message exchanges.Bastien Teinturier responds to Voegtlin's proposal by highlighting the importance of senders being aware of the channel creation or splice on the receiver's end. He suggests three strategies for providing JIT liquidity and discusses the advantages of the currently deployed strategies. Teinturier also mentions the use of 0-conf (zero-confirmation) transactions and the possibility of including this new feature in BOLT-12 instead of BOLT-11.Matt Corallo expresses skepticism about adding a new interoperable change to BOLT-11, citing challenges in achieving broader support for existing features. He questions the necessity of the proposed change in light of splice-out and suggests exploring privacy-focused options like OMs (onion messages) for swaps.In conclusion, Voegtlin maintains that the proposed change to BOLT-11 is a minimal one and suggests adding a new invoice feature to describe the prepayment of a fee. He highlights specific implementations that could benefit from this proposal and emphasizes the need to consider trust, regulation, and competition among Lightning service providers.The email also includes contact information for Electrum Technologies GmbH, a company based in Berlin, Germany, including their address and legal registration details. It provides a link to the mailing list's subscription page on the Linux Foundation website, allowing recipients to join or manage their subscription.</p>
    <hr>
    <p><i> Updated on: 2023-07-11T02:37:22.641361+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>