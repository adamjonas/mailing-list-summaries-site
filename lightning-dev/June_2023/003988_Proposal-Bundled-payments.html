<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Proposal: Bundled payments</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Thomas Voegtlin 2023-06-20 08:45:34+00:00
            <br><i>Published on: 2023-06-20T08:45:34+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/June_2023/combined_Proposal-Bundled-payments.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2023-June/003988.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>Thomas Voegtlin has proposed an extension to BOLT-11, the Lightning Network's invoice protocol. The proposed extension allows invoices to include two bundled payments with distinct preimages and amounts. This proposal is specifically targeted towards services that require prepayment of a mining fee for non-custodian exchanges such as submarine swaps and JIT channels.Currently, services like Loop by Lightning Labs can request a prepayment because their software supports it. However, competitors like the Boltz exchange, who do not require a dedicated wallet, cannot. This creates vulnerabilities and potential denial-of-service attacks. In the case of JIT channels, service providers wanting protection against mining fee attacks need to ask for the preimage of the main payment before opening the channel, which makes them custodians and subject to regulation.To address these issues, Thomas suggests bundling the prepayment and main payment in the same invoice. The proposal outlines the semantics of bundled payments, where the receiver waits for all HTLCs (Hashed Time-Locked Contracts) of both payments to arrive before fulfilling the prepayment. Once the HTLCs of both payments have arrived, the receiver fulfills the prepayment and broadcasts the on-chain transaction.It is important to note that this proposal does not prevent service providers from stealing the prepayment. Its purpose is to level the playing field among Lightning service providers, benefiting companies like Lightning Labs and ACINQ. Thomas believes this change should be implemented in BOLT-11 rather than using BOLT-12 or onion messages, as it does not require the exchange of new messages and can be done in a non-interactive way.The context also includes the signature of an email sent by Electrum Technologies GmbH, a company based in Berlin, Germany. The email provides contact information for Electrum Technologies GmbH, including their address at Paul-Lincke-Ufer 8d in Berlin and their business registration details with the Amtsgericht Charlottenburg under HRB 164636. The email identifies Thomas Voegtlin as the Geschäftsführer (Managing Director) of the company. This signature indicates that the email was sent from Electrum Technologies GmbH, a registered company in Berlin, Germany, and provides relevant contact information for the company.</p>
    <hr>
    <p><i> Updated on: 2023-07-06T02:58:43.636530+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>