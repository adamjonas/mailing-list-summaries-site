<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Proposal for Stuckless Payment</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Hiroki Gondo 2019-06-25 08:20:12
            <br><i>Published on: 2019-06-25T08:20:12+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/June_2019/combined_Proposal-for-Stuckless-Payment.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2019-June/002029.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The proposal is designed to reduce the possibility of payments getting stuck. It allows both the payee and the payer to provide keys to settle payments, which means that it is safe to retry each phase of a payment. This can be done without involving intermediate nodes. However, this proposal cannot be used with BOLT 1.x and will only apply to future specifications.If payments do get stuck, additional trusted operations will be required by the final node's implementation, the application or the service operator. For example, if a payment gets stuck when a payer orders a cup of coffee and attempts to pay for the invoice, what needs to be done to correct the problem?If an 'update_add_htlc' gets stuck on an intermediate node, the payer cannot ignore the issue. If it is fulfilled or failed, the payer may have to wait until the 'cltv_expiry', which is not practical for user experience. Attempting to retry payment using different routes using the same invoice presents problems because if the previous payment that was stuck begins moving again after a successful retry and succeeds, the payer will end up paying twice for the same invoice. The payer cannot obtain information to prove that he has paid twice as he only has a single preimage. However, the payer can provide the key (preimage). In this case, the HTLCs and the preimage(key) are sent together. This means that the HTLCs can be fulfilled in unintended timing for the payer. If the payer receives another invoice from the payee and pays again, he must obtain a refund from the payee for the extra payment, which requires additional trusted operations dependent on the application or the service operator.</p>
    <hr>
    <p><i> Updated on: 2023-06-02T18:56:37.193853+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>