<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Insufficient funder balance for paying fees</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Pierre 2018-01-12 11:56:39
            <br><i>Published on: 2018-01-12T11:56:39+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/Jan_2018/combined_Insufficient-funder-balance-for-paying-fees.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-January/000924.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>In a conversation between Johan and Pierre about a corner case, Pierre suggests that it has similarities with a race condition described in BOLT 2. The timing of `commit_sig`/`revoke_and_ack` messages is crucial, not the `update_add_htlc`s because of the acknowledgement logic that excludes remote's unsigned updates. Each party ends up receiving a commitment tx which has insufficient fees. According to BOLT 3, at this point, it may decide to fail the channel using its previous commitment. Eclair currently won't fail the channel, but Pierre thinks it probably should, especially if they are the fundee and would end up with all funds in an unpublishable tx. The funder could also face the same situation if the pending htlcs have a high value. Pierre suggests that an appropriate choice of channel parameters mainly max_htlc_value_in_flight_msat, channel_reserve_satoshis, max_accepted_htlcs could probably reduce the probability of this happening. Two links are provided: [1] for updating fees and [2] for fee payment in lightning transactions.</p>
    <hr>
    <p><i> Updated on: 2023-05-24T18:28:14.350594+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>