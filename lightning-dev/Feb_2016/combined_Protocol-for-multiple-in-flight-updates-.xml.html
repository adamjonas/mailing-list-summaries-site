<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Protocol for multiple in-flight updates. <span class="combined-summary">[combined summary]</span></h1>
    <hr class="solid">
    <br><b>Individual post summaries:</b>
    
        <ul>
            
                
                    <li>
                        <a href="/lightning-dev/Feb_2016/000418_Protocol-for-multiple-in-flight-updates-.xml.html">Protocol for multiple in-flight updates.</a>
                        <b>Rusty Russell 2016-02-01 10:08:01</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Feb_2016/000430_Protocol-for-multiple-in-flight-updates-.xml.html">Protocol for multiple in-flight updates.</a>
                        <b>Rusty Russell 2016-02-04 06:35:03</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Feb_2016/000431_Protocol-for-multiple-in-flight-updates-.xml.html">Protocol for multiple in-flight updates.</a>
                        <b>Rusty Russell 2016-02-05 00:54:14</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Feb_2016/000422_Protocol-for-multiple-in-flight-updates-.xml.html">Protocol for multiple in-flight updates.</a>
                        <b>Joseph Poon 2016-02-02 07:28:14</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Feb_2016/000427_Protocol-for-multiple-in-flight-updates-.xml.html">Protocol for multiple in-flight updates.</a>
                        <b>Rusty Russell 2016-02-03 04:35:33</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Feb_2016/000428_Protocol-for-multiple-in-flight-updates-.xml.html">Protocol for multiple in-flight updates.</a>
                        <b>Joseph Poon 2016-02-03 05:01:35</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Feb_2016/000421_Protocol-for-multiple-in-flight-updates-.xml.html">Protocol for multiple in-flight updates.</a>
                        <b>Rusty Russell 2016-02-02 01:18:17</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Feb_2016/000424_Protocol-for-multiple-in-flight-updates-.xml.html">Protocol for multiple in-flight updates.</a>
                        <b>Rusty Russell 2016-02-03 00:32:50</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Feb_2016/000426_Protocol-for-multiple-in-flight-updates-.xml.html">Protocol for multiple in-flight updates.</a>
                        <b>Joseph Poon 2016-02-03 01:33:30</b>
                    </li>
                
                    <li>
                        <a href="/lightning-dev/Feb_2016/000429_Protocol-for-multiple-in-flight-updates-.xml.html">Protocol for multiple in-flight updates.</a>
                        <b>Rusty Russell 2016-02-04 04:08:35</b>
                    </li>
                
            
        </ul>
        
            <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-February/000418.html">Click here to read the original discussion on the lightning-dev mailing list</a>
        
        <p><i>Published on: 2016-02-01T10:08:01+00:00</i></p>
        <hr>
        <h3>Summary:</h3>
        <p>The email exchange between Rusty Russell and Joseph Poon discusses the HTLC negotiation protocol for preventing cut-through HTLCs in Lightning Network. The protocol involves different states and steps, including adding an HTLC, removing an HTLC through timeout or settle, committing all changes, and proposing a new protocol to prevent overlapping requests. Joseph suggests a more secure three-step commit transaction, while Rusty proposes variants of the protocol for better throughput.They also discuss the need for two IDs sent in the commitment message and the importance of keeping messages in order. If the replyer skips the requester's Add Requests when replying, it is assumed that the skipped requests are request rejections or an outright channel closeout since it should never happen. This is to enforce accept/reject order and to ensure that modifications included in the signature/transaction do not change after-the-fact. Joseph suggests disallowing skipping as a protocol violation, which could lead to a gentler close protocol where sending a close message implies the initiator would send no more adds and reject all received. Two IDs, one for each party, are included in the Commitment signature message, allowing for timing issues with HTLC Add responses not being fully synced up.Rusty thanks Joseph and mentions he will try to document the protocol in another email. The protocol is still being optimized, but any accepted modification by the other party is included. While it may take some time to clean out all the remaining HTLCs for mutual close, at least the other side knows what is happening and can replace capacity by opening new channels if needed.</p>
        <hr>
        <p><i>Updated on: 2023-06-03T16:11:45.898023+00:00</i></p>
    

    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>