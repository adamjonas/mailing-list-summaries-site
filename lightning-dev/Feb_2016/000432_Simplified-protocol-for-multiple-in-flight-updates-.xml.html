<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
    <title>Atom Feed Display</title>
    <link rel="stylesheet" href="../../archive_styles.css">
</head>

<body BGCOLOR="#fffffb">
    
    <h1>Simplified protocol for multiple in-flight updates.</h1>
    <hr class="solid">
    
    <ul>
        
        
            <p><b>Author:</b> Rusty Russell 2016-02-08 20:17:07
            <br><i>Published on: 2016-02-08T20:17:07+00:00</i></p>

        
        

        
        
        <li>
        <a href="/lightning-dev/Feb_2016/combined_Simplified-protocol-for-multiple-in-flight-updates-.xml.html"> Combined Summary of all posts in thread </a>
        </li>
        
        <li>
            
                <a href="https://lists.linuxfoundation.org/pipermail/lightning-dev/2016-February/000432.html">Click here to read original discussion on the lightning-dev mailing list</a>
            
        </li>

    </ul>

    <hr>
    <h3> Summary:</h3>
    <p>The protocol for a Lightning Network payment channel can be simplified by eliminating acknowledgements. Each side of the transaction sends updates in the form of ADD, SETTLE, TIMEOUT, FAIL, and UNADD messages, followed by a COMMIT message with a signature. When a side sends a COMMIT message, they are locking in their updates to the other side's commit transaction, enforcing a requirement that they commit to their own updates first. Each side tracks two commit transactions: their own and the other side's. Once the recipient receives the COMMIT message, they commit the updates to their own commit transaction and stage them to the other side's commit transaction. A COMPLETE message is then sent to complete removal of the old commit transaction.To speed up the process, a non-binding ADD_FAIL message can be added to hint at failing an HTLC as soon as it is committed, allowing the recipient to UNADD if it receives it in time. Fee negotiation can be included in the COMMIT message, with a requested fee rate and a range of acceptable values. In the case of a REJECT message, the fee range can be adjusted and the COMPLETE message can be reattempted. Similar fee negotiation would be required for mutual close.</p>
    <hr>
    <p><i> Updated on: 2023-05-23T22:33:43.102957+00:00 </i></p>
    
    

    <footer>
        <span style="font-family: Arial, Helvetica, sans-serif;">&#10084;&#65039;</span> <a href="https://chaincode.com" target="_blank" rel="noreferrer" style="text-decoration: none; color: inherit;">Chaincode</a>
    </footer>
</body>

</html>